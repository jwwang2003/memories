/*! For license information please see 858.bundle.js.LICENSE.txt */
(self.webpackChunkmemories_optimized=self.webpackChunkmemories_optimized||[]).push([[858],{99:(t,e,n)=>{"use strict";n.d(e,{Z:()=>I});var r,i,o=n(655),s=n(589),a=n(909),u=n(594),c=((r={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",r["bad-app-name"]="Illegal App name: '{$appName}",r["duplicate-app"]="Firebase App named '{$appName}' already exists",r["app-deleted"]="Firebase App named '{$appName}' already deleted",r["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",r["invalid-log-argument"]="First argument to `onLog` must be null or a function.",r),h=new s.LL("app","Firebase",c),f="@firebase/app",l="[DEFAULT]",p=((i={})[f]="fire-core",i["@firebase/analytics"]="fire-analytics",i["@firebase/auth"]="fire-auth",i["@firebase/database"]="fire-rtdb",i["@firebase/functions"]="fire-fn",i["@firebase/installations"]="fire-iid",i["@firebase/messaging"]="fire-fcm",i["@firebase/performance"]="fire-perf",i["@firebase/remote-config"]="fire-rc",i["@firebase/storage"]="fire-gcs",i["@firebase/firestore"]="fire-fst",i["fire-js"]="fire-js",i["firebase-wrapper"]="fire-js-all",i),d=new u.Yd("@firebase/app"),v=function(){function t(t,e,n){var r,i,u=this;this.firebase_=n,this.isDeleted_=!1,this.name_=e.name,this.automaticDataCollectionEnabled_=e.automaticDataCollectionEnabled||!1,this.options_=(0,s.p$)(t),this.container=new a.H0(e.name),this._addComponent(new a.wA("app",(function(){return u}),"PUBLIC"));try{for(var c=(0,o.XA)(this.firebase_.INTERNAL.components.values()),h=c.next();!h.done;h=c.next()){var f=h.value;this._addComponent(f)}}catch(t){r={error:t}}finally{try{h&&!h.done&&(i=c.return)&&i.call(c)}finally{if(r)throw r.error}}}return Object.defineProperty(t.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(t){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!1,configurable:!0}),t.prototype.delete=function(){var t=this;return new Promise((function(e){t.checkDestroyed_(),e()})).then((function(){return t.firebase_.INTERNAL.removeApp(t.name_),Promise.all(t.container.getProviders().map((function(t){return t.delete()})))})).then((function(){t.isDeleted_=!0}))},t.prototype._getService=function(t,e){return void 0===e&&(e=l),this.checkDestroyed_(),this.container.getProvider(t).getImmediate({identifier:e})},t.prototype._removeServiceInstance=function(t,e){void 0===e&&(e=l),this.container.getProvider(t).clearInstance(e)},t.prototype._addComponent=function(t){try{this.container.addComponent(t)}catch(e){d.debug("Component "+t.name+" failed to register with FirebaseApp "+this.name,e)}},t.prototype._addOrOverwriteComponent=function(t){this.container.addOrOverwriteComponent(t)},t.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw h.create("app-deleted",{appName:this.name_})},t}();v.prototype.name&&v.prototype.options||v.prototype.delete||console.log("dc");var y=function t(){var e=function(t){var e={},n=new Map,r={__esModule:!0,initializeApp:function(n,i){void 0===i&&(i={}),"object"==typeof i&&null!==i||(i={name:i});var o=i;void 0===o.name&&(o.name=l);var a=o.name;if("string"!=typeof a||!a)throw h.create("bad-app-name",{appName:String(a)});if((0,s.r3)(e,a))throw h.create("duplicate-app",{appName:a});var u=new t(n,o,r);return e[a]=u,u},app:i,registerVersion:function(t,e,n){var r,i=null!==(r=p[t])&&void 0!==r?r:t;n&&(i+="-"+n);var o=i.match(/\s|\//),s=e.match(/\s|\//);if(o||s){var u=['Unable to register library "'+i+'" with version "'+e+'":'];return o&&u.push('library name "'+i+'" contains illegal characters (whitespace or "/")'),o&&s&&u.push("and"),s&&u.push('version name "'+e+'" contains illegal characters (whitespace or "/")'),void d.warn(u.join(" "))}c(new a.wA(i+"-version",(function(){return{library:i,version:e}}),"VERSION"))},setLogLevel:u.Ub,onLog:function(t,e){if(null!==t&&"function"!=typeof t)throw h.create("invalid-log-argument",{appName:name});(0,u.Am)(t,e)},apps:null,SDK_VERSION:"8.0.0",INTERNAL:{registerComponent:c,removeApp:function(t){delete e[t]},components:n,useAsService:function(t,e){return"serverAuth"===e?null:e}}};function i(t){if(t=t||l,!(0,s.r3)(e,t))throw h.create("no-app",{appName:t});return e[t]}function c(a){var u,c,f=a.name;if(n.has(f))return d.debug("There were multiple attempts to register component "+f+"."),"PUBLIC"===a.type?r[f]:null;if(n.set(f,a),"PUBLIC"===a.type){var l=function(t){if(void 0===t&&(t=i()),"function"!=typeof t[f])throw h.create("invalid-app-argument",{appName:f});return t[f]()};void 0!==a.serviceProps&&(0,s.ZB)(l,a.serviceProps),r[f]=l,t.prototype[f]=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this._getService.bind(this,f).apply(this,a.multipleInstances?t:[])}}try{for(var p=(0,o.XA)(Object.keys(e)),v=p.next();!v.done;v=p.next()){var y=v.value;e[y]._addComponent(a)}}catch(t){u={error:t}}finally{try{v&&!v.done&&(c=p.return)&&c.call(p)}finally{if(u)throw u.error}}return"PUBLIC"===a.type?r[f]:null}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(e).map((function(t){return e[t]}))}}),i.App=t,r}(v);return e.INTERNAL=(0,o.pi)((0,o.pi)({},e.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(t){(0,s.ZB)(e,t)},createSubscribe:s.ne,ErrorFactory:s.LL,deepExtend:s.ZB}),e}(),m=function(){function t(t){this.container=t}return t.prototype.getPlatformInfoString=function(){return this.container.getProviders().map((function(t){if(function(t){var e=t.getComponent();return"VERSION"===(null==e?void 0:e.type)}(t)){var e=t.getImmediate();return e.library+"/"+e.version}return null})).filter((function(t){return t})).join(" ")},t}();if((0,s.jU)()&&void 0!==self.firebase){d.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var g=self.firebase.SDK_VERSION;g&&g.indexOf("LITE")>=0&&d.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var b=y.initializeApp;y.initializeApp=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return(0,s.UG)()&&d.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the @rollup/plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/@rollup/plugin-node-resolve\n      '),b.apply(void 0,t)};var w=y;!function(t,e){t.INTERNAL.registerComponent(new a.wA("platform-logger",(function(t){return new m(t)}),"PRIVATE")),t.registerVersion(f,"0.6.12",void 0),t.registerVersion("fire-js","")}(w);const I=w},909:(t,e,n)=>{"use strict";n.d(e,{wA:()=>o,H0:()=>u});var r=n(655),i=n(589),o=function(){function t(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY"}return t.prototype.setInstantiationMode=function(t){return this.instantiationMode=t,this},t.prototype.setMultipleInstances=function(t){return this.multipleInstances=t,this},t.prototype.setServiceProps=function(t){return this.serviceProps=t,this},t}(),s="[DEFAULT]",a=function(){function t(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map}return t.prototype.get=function(t){void 0===t&&(t=s);var e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){var n=new i.BH;this.instancesDeferred.set(e,n);try{var r=this.getOrInitializeService(e);r&&n.resolve(r)}catch(t){}}return this.instancesDeferred.get(e).promise},t.prototype.getImmediate=function(t){var e=(0,r.pi)({identifier:s,optional:!1},t),n=e.identifier,i=e.optional,o=this.normalizeInstanceIdentifier(n);try{var a=this.getOrInitializeService(o);if(!a){if(i)return null;throw Error("Service "+this.name+" is not available")}return a}catch(t){if(i)return null;throw t}},t.prototype.getComponent=function(){return this.component},t.prototype.setComponent=function(t){var e,n;if(t.name!==this.name)throw Error("Mismatching Component "+t.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=t,function(t){return"EAGER"===t.instantiationMode}(t))try{this.getOrInitializeService(s)}catch(t){}try{for(var i=(0,r.XA)(this.instancesDeferred.entries()),o=i.next();!o.done;o=i.next()){var a=(0,r.CR)(o.value,2),u=a[0],c=a[1],h=this.normalizeInstanceIdentifier(u);try{var f=this.getOrInitializeService(h);c.resolve(f)}catch(t){}}}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}},t.prototype.clearInstance=function(t){void 0===t&&(t=s),this.instancesDeferred.delete(t),this.instances.delete(t)},t.prototype.delete=function(){return(0,r.mG)(this,void 0,void 0,(function(){var t;return(0,r.Jh)(this,(function(e){switch(e.label){case 0:return t=Array.from(this.instances.values()),[4,Promise.all((0,r.fl)(t.filter((function(t){return"INTERNAL"in t})).map((function(t){return t.INTERNAL.delete()})),t.filter((function(t){return"_delete"in t})).map((function(t){return t._delete()}))))];case 1:return e.sent(),[2]}}))}))},t.prototype.isComponentSet=function(){return null!=this.component},t.prototype.getOrInitializeService=function(t){var e=this.instances.get(t);return!e&&this.component&&(e=this.component.instanceFactory(this.container,function(t){return t===s?void 0:t}(t)),this.instances.set(t,e)),e||null},t.prototype.normalizeInstanceIdentifier=function(t){return this.component?this.component.multipleInstances?t:s:t},t}(),u=function(){function t(t){this.name=t,this.providers=new Map}return t.prototype.addComponent=function(t){var e=this.getProvider(t.name);if(e.isComponentSet())throw new Error("Component "+t.name+" has already been registered with "+this.name);e.setComponent(t)},t.prototype.addOrOverwriteComponent=function(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)},t.prototype.getProvider=function(t){if(this.providers.has(t))return this.providers.get(t);var e=new a(t,this);return this.providers.set(t,e),e},t.prototype.getProviders=function(){return Array.from(this.providers.values())},t}()},594:(t,e,n)=>{"use strict";function r(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}var i;n.d(e,{in:()=>o,Yd:()=>f,Ub:()=>l,Am:()=>p});var o,s=[];!function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"}(o||(o={}));var a={debug:o.DEBUG,verbose:o.VERBOSE,info:o.INFO,warn:o.WARN,error:o.ERROR,silent:o.SILENT},u=o.INFO,c=((i={})[o.DEBUG]="log",i[o.VERBOSE]="log",i[o.INFO]="info",i[o.WARN]="warn",i[o.ERROR]="error",i),h=function(t,e){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];if(!(e<t.logLevel)){var o=(new Date).toISOString(),s=c[e];if(!s)throw new Error("Attempted to log a message with an invalid logType (value: "+e+")");console[s].apply(console,r(["["+o+"]  "+t.name+":"],n))}},f=function(){function t(t){this.name=t,this._logLevel=u,this._logHandler=h,this._userLogHandler=null,s.push(this)}return Object.defineProperty(t.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in o))throw new TypeError('Invalid value "'+t+'" assigned to `logLevel`');this._logLevel=t},enumerable:!1,configurable:!0}),t.prototype.setLogLevel=function(t){this._logLevel="string"==typeof t?a[t]:t},Object.defineProperty(t.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(t){this._userLogHandler=t},enumerable:!1,configurable:!0}),t.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.DEBUG],t)),this._logHandler.apply(this,r([this,o.DEBUG],t))},t.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.VERBOSE],t)),this._logHandler.apply(this,r([this,o.VERBOSE],t))},t.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.INFO],t)),this._logHandler.apply(this,r([this,o.INFO],t))},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.WARN],t)),this._logHandler.apply(this,r([this,o.WARN],t))},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.ERROR],t)),this._logHandler.apply(this,r([this,o.ERROR],t))},t}();function l(t){s.forEach((function(e){e.setLogLevel(t)}))}function p(t,e){for(var n=function(n){var r=null;e&&e.level&&(r=a[e.level]),n.userLogHandler=null===t?null:function(e,n){for(var i=[],s=2;s<arguments.length;s++)i[s-2]=arguments[s];var a=i.map((function(t){if(null==t)return null;if("string"==typeof t)return t;if("number"==typeof t||"boolean"==typeof t)return t.toString();if(t instanceof Error)return t.message;try{return JSON.stringify(t)}catch(t){return null}})).filter((function(t){return t})).join(" ");n>=(null!=r?r:e.logLevel)&&t({level:o[n].toLowerCase(),message:a,args:i,type:e.name})}},r=0,i=s;r<i.length;r++)n(i[r])}},589:(t,e,n)=>{"use strict";n.d(e,{BH:()=>s,LL:()=>m,r3:()=>w,ne:()=>I,p$:()=>i,ZB:()=>o,z$:()=>a,jU:()=>h,ru:()=>f,d:()=>p,w1:()=>d,uI:()=>u,UG:()=>c,b$:()=>l,Mn:()=>v});var r=n(655);function i(t){return o(void 0,t)}function o(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(var n in e)e.hasOwnProperty(n)&&(t[n]=o(t[n],e[n]));return t}var s=function(){function t(){var t=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return t.prototype.wrapCallback=function(t){var e=this;return function(n,r){n?e.reject(n):e.resolve(r),"function"==typeof t&&(e.promise.catch((function(){})),1===t.length?t(n):t(n,r))}},t}();function a(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function u(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(a())}function c(){try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(t){return!1}}function h(){return"object"==typeof self&&self.self===self}function f(){var t="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof t&&void 0!==t.id}function l(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function p(){return a().indexOf("Electron/")>=0}function d(){var t=a();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function v(){return a().indexOf("MSAppHost/")>=0}var y=function(t){function e(n,r,i){var o=t.call(this,r)||this;return o.code=n,o.customData=i,o.name="FirebaseError",Object.setPrototypeOf(o,e.prototype),Error.captureStackTrace&&Error.captureStackTrace(o,m.prototype.create),o}return(0,r.ZT)(e,t),e}(Error),m=function(){function t(t,e,n){this.service=t,this.serviceName=e,this.errors=n}return t.prototype.create=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=e[0]||{},i=this.service+"/"+t,o=this.errors[t],s=o?g(o,r):"Error",a=this.serviceName+": "+s+" ("+i+").",u=new y(i,a,r);return u},t}();function g(t,e){return t.replace(b,(function(t,n){var r=e[n];return null!=r?String(r):"<"+n+"?>"}))}var b=/\{\$([^}]+)}/g;function w(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function I(t,e){var n=new E(t,e);return n.subscribe.bind(n)}!function(){function t(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}t.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},t.prototype.compress_=function(t,e){e||(e=0);var n=this.W_;if("string"==typeof t)for(var r=0;r<16;r++)n[r]=t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|t.charCodeAt(e+3),e+=4;else for(r=0;r<16;r++)n[r]=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3],e+=4;for(r=16;r<80;r++){var i=n[r-3]^n[r-8]^n[r-14]^n[r-16];n[r]=4294967295&(i<<1|i>>>31)}var o,s,a=this.chain_[0],u=this.chain_[1],c=this.chain_[2],h=this.chain_[3],f=this.chain_[4];for(r=0;r<80;r++)r<40?r<20?(o=h^u&(c^h),s=1518500249):(o=u^c^h,s=1859775393):r<60?(o=u&c|h&(u|c),s=2400959708):(o=u^c^h,s=3395469782),i=(a<<5|a>>>27)+o+f+s+n[r]&4294967295,f=h,h=c,c=4294967295&(u<<30|u>>>2),u=a,a=i;this.chain_[0]=this.chain_[0]+a&4294967295,this.chain_[1]=this.chain_[1]+u&4294967295,this.chain_[2]=this.chain_[2]+c&4294967295,this.chain_[3]=this.chain_[3]+h&4294967295,this.chain_[4]=this.chain_[4]+f&4294967295},t.prototype.update=function(t,e){if(null!=t){void 0===e&&(e=t.length);for(var n=e-this.blockSize,r=0,i=this.buf_,o=this.inbuf_;r<e;){if(0===o)for(;r<=n;)this.compress_(t,r),r+=this.blockSize;if("string"==typeof t){for(;r<e;)if(i[o]=t.charCodeAt(r),++r,++o===this.blockSize){this.compress_(i),o=0;break}}else for(;r<e;)if(i[o]=t[r],++r,++o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=e}},t.prototype.digest=function(){var t=[],e=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&e,e/=256;this.compress_(this.buf_);var r=0;for(n=0;n<5;n++)for(var i=24;i>=0;i-=8)t[r]=this.chain_[n]>>i&255,++r;return t}}();var E=function(){function t(t,e){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then((function(){t(n)})).catch((function(t){n.error(t)}))}return t.prototype.next=function(t){this.forEachObserver((function(e){e.next(t)}))},t.prototype.error=function(t){this.forEachObserver((function(e){e.error(t)})),this.close(t)},t.prototype.complete=function(){this.forEachObserver((function(t){t.complete()})),this.close()},t.prototype.subscribe=function(t,e,n){var r,i=this;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=0,r=["next","error","complete"];n<r.length;n++){var i=r[n];if(i in t&&"function"==typeof t[i])return!0}return!1}(t)?t:{next:t,error:e,complete:n}).next&&(r.next=T),void 0===r.error&&(r.error=T),void 0===r.complete&&(r.complete=T);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(t){}})),this.observers.push(r),o},t.prototype.unsubscribeOne=function(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},t.prototype.forEachObserver=function(t){if(!this.finalized)for(var e=0;e<this.observers.length;e++)this.sendOne(e,t)},t.prototype.sendOne=function(t,e){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[t])try{e(n.observers[t])}catch(t){"undefined"!=typeof console&&console.error&&console.error(t)}}))},t.prototype.close=function(t){var e=this;this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then((function(){e.observers=void 0,e.onNoObservers=void 0})))},t}();function T(){}},503:(t,e,n)=>{"use strict";n(99).Z.registerVersion("firebase","8.0.0","app")},397:(t,e,n)=>{"use strict";var r=n(99);(function(){var t,e="function"==typeof Object.defineProperties?Object.defineProperty:function(t,e,n){t!=Array.prototype&&t!=Object.prototype&&(t[e]=n.value)},i=function(t){t=["object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof n.g&&n.g,t];for(var e=0;e<t.length;++e){var r=t[e];if(r&&r.Math==Math)return r}return globalThis}(this);function o(t){var e=0;return function(){return e<t.length?{done:!1,value:t[e++]}:{done:!0}}}function s(t){var e="undefined"!=typeof Symbol&&Symbol.iterator&&t[Symbol.iterator];return e?e.call(t):{next:o(t)}}!function(t,n){if(n){var r=i;t=t.split(".");for(var o=0;o<t.length-1;o++){var s=t[o];s in r||(r[s]={}),r=r[s]}(n=n(o=r[t=t[t.length-1]]))!=o&&null!=n&&e(r,t,{configurable:!0,writable:!0,value:n})}}("Promise",(function(t){function e(t){this.b=0,this.c=void 0,this.a=[];var e=this.f();try{t(e.resolve,e.reject)}catch(t){e.reject(t)}}function n(){this.a=null}function r(t){return t instanceof e?t:new e((function(e){e(t)}))}if(t)return t;n.prototype.b=function(t){if(null==this.a){this.a=[];var e=this;this.c((function(){e.g()}))}this.a.push(t)};var o=i.setTimeout;n.prototype.c=function(t){o(t,0)},n.prototype.g=function(){for(;this.a&&this.a.length;){var t=this.a;this.a=[];for(var e=0;e<t.length;++e){var n=t[e];t[e]=null;try{n()}catch(t){this.f(t)}}}this.a=null},n.prototype.f=function(t){this.c((function(){throw t}))},e.prototype.f=function(){function t(t){return function(r){n||(n=!0,t.call(e,r))}}var e=this,n=!1;return{resolve:t(this.v),reject:t(this.g)}},e.prototype.v=function(t){if(t===this)this.g(new TypeError("A Promise cannot resolve to itself"));else if(t instanceof e)this.o(t);else{t:switch(typeof t){case"object":var n=null!=t;break t;case"function":n=!0;break t;default:n=!1}n?this.m(t):this.h(t)}},e.prototype.m=function(t){var e=void 0;try{e=t.then}catch(t){return void this.g(t)}"function"==typeof e?this.u(e,t):this.h(t)},e.prototype.g=function(t){this.i(2,t)},e.prototype.h=function(t){this.i(1,t)},e.prototype.i=function(t,e){if(0!=this.b)throw Error("Cannot settle("+t+", "+e+"): Promise already settled in state"+this.b);this.b=t,this.c=e,this.l()},e.prototype.l=function(){if(null!=this.a){for(var t=0;t<this.a.length;++t)a.b(this.a[t]);this.a=null}};var a=new n;return e.prototype.o=function(t){var e=this.f();t.Pa(e.resolve,e.reject)},e.prototype.u=function(t,e){var n=this.f();try{t.call(e,n.resolve,n.reject)}catch(t){n.reject(t)}},e.prototype.then=function(t,n){function r(t,e){return"function"==typeof t?function(e){try{i(t(e))}catch(t){o(t)}}:e}var i,o,s=new e((function(t,e){i=t,o=e}));return this.Pa(r(t,i),r(n,o)),s},e.prototype.catch=function(t){return this.then(void 0,t)},e.prototype.Pa=function(t,e){function n(){switch(r.b){case 1:t(r.c);break;case 2:e(r.c);break;default:throw Error("Unexpected state: "+r.b)}}var r=this;null==this.a?a.b(n):this.a.push(n)},e.resolve=r,e.reject=function(t){return new e((function(e,n){n(t)}))},e.race=function(t){return new e((function(e,n){for(var i=s(t),o=i.next();!o.done;o=i.next())r(o.value).Pa(e,n)}))},e.all=function(t){var n=s(t),i=n.next();return i.done?r([]):new e((function(t,e){function o(e){return function(n){s[e]=n,0==--a&&t(s)}}var s=[],a=0;do{s.push(void 0),a++,r(i.value).Pa(o(s.length-1),e),i=n.next()}while(!i.done)}))},e}));var a=a||{},u=this||self,c=/^[\w+/_-]+[=]{0,2}$/,h=null;function f(){}function l(t){var e=typeof t;if("object"==e){if(!t)return"null";if(t instanceof Array)return"array";if(t instanceof Object)return e;var n=Object.prototype.toString.call(t);if("[object Window]"==n)return"object";if("[object Array]"==n||"number"==typeof t.length&&void 0!==t.splice&&void 0!==t.propertyIsEnumerable&&!t.propertyIsEnumerable("splice"))return"array";if("[object Function]"==n||void 0!==t.call&&void 0!==t.propertyIsEnumerable&&!t.propertyIsEnumerable("call"))return"function"}else if("function"==e&&void 0===t.call)return"object";return e}function p(t){var e=l(t);return"array"==e||"object"==e&&"number"==typeof t.length}function d(t){return"function"==l(t)}function v(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}function y(t){return Object.prototype.hasOwnProperty.call(t,m)&&t[m]||(t[m]=++g)}var m="closure_uid_"+(1e9*Math.random()>>>0),g=0;function b(t,e,n){return t.call.apply(t.bind,arguments)}function w(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function I(t,e,n){return(I=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?b:w).apply(null,arguments)}function E(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}var T=Date.now||function(){return+new Date};function _(t,e){function n(){}n.prototype=e.prototype,t.$a=e.prototype,t.prototype=new n,t.prototype.constructor=t}function A(t,e,n){this.code=k+t,this.message=e||D[t]||"",this.a=n||null}function N(t){var e=t&&t.code;return e?new A(e.substring(k.length),t.message,t.serverResponse):null}_(A,Error),A.prototype.w=function(){var t={code:this.code,message:this.message};return this.a&&(t.serverResponse=this.a),t},A.prototype.toJSON=function(){return this.w()};var S,k="auth/",D={"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","expired-action-code":"The action code has expired. ","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal error has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal error has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal error has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network error (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal error has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled."},O={kd:{Sa:"https://staging-identitytoolkit.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",Ya:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Va:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"b"},rd:{Sa:"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",Ya:"https://securetoken.googleapis.com/v1/token",Va:"https://identitytoolkit.googleapis.com/v2/",id:"p"},td:{Sa:"https://staging-www.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",Ya:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Va:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"s"},ud:{Sa:"https://www-googleapis-test.sandbox.google.com/identitytoolkit/v3/relyingparty/",Ya:"https://test-securetoken.sandbox.googleapis.com/v1/token",Va:"https://test-identitytoolkit.sandbox.googleapis.com/v2/",id:"t"}};function P(t){for(var e in O)if(O[e].id===t)return{firebaseEndpoint:(t=O[e]).Sa,secureTokenEndpoint:t.Ya,identityPlatformEndpoint:t.Va};return null}function L(t){if(!t)return!1;try{return!!t.$goog_Thenable}catch(t){return!1}}function C(t){if(Error.captureStackTrace)Error.captureStackTrace(this,C);else{var e=Error().stack;e&&(this.stack=e)}t&&(this.message=String(t))}function R(t,e){for(var n="",r=(t=t.split("%s")).length-1,i=0;i<r;i++)n+=t[i]+(i<e.length?e[i]:"%s");C.call(this,n+t[r])}function x(t,e){throw new R("Failure"+(t?": "+t:""),Array.prototype.slice.call(arguments,1))}function M(t,e){this.c=t,this.f=e,this.b=0,this.a=null}function V(t,e){t.f(e),100>t.b&&(t.b++,e.next=t.a,t.a=e)}function U(){this.b=this.a=null}S=P("__EID__")?"__EID__":void 0,_(C,Error),C.prototype.name="CustomError",_(R,C),R.prototype.name="AssertionError",M.prototype.get=function(){if(0<this.b){this.b--;var t=this.a;this.a=t.next,t.next=null}else t=this.c();return t};var j=new M((function(){return new G}),(function(t){t.reset()}));function F(){var t=me,e=null;return t.a&&(e=t.a,t.a=t.a.next,t.a||(t.b=null),e.next=null),e}function G(){this.next=this.b=this.a=null}U.prototype.add=function(t,e){var n=j.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},G.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},G.prototype.reset=function(){this.next=this.b=this.a=null};var q=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},B=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)},z=Array.prototype.filter?function(t,e){return Array.prototype.filter.call(t,e,void 0)}:function(t,e){for(var n=t.length,r=[],i=0,o="string"==typeof t?t.split(""):t,s=0;s<n;s++)if(s in o){var a=o[s];e.call(void 0,a,s,t)&&(r[i++]=a)}return r},K=Array.prototype.map?function(t,e){return Array.prototype.map.call(t,e,void 0)}:function(t,e){for(var n=t.length,r=Array(n),i="string"==typeof t?t.split(""):t,o=0;o<n;o++)o in i&&(r[o]=e.call(void 0,i[o],o,t));return r},H=Array.prototype.some?function(t,e){return Array.prototype.some.call(t,e,void 0)}:function(t,e){for(var n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t))return!0;return!1};function J(t,e){return 0<=q(t,e)}function W(t,e){var n;return(n=0<=(e=q(t,e)))&&Array.prototype.splice.call(t,e,1),n}function X(t,e){!function(t,e){for(var n="string"==typeof t?t.split(""):t,r=t.length-1;0<=r;--r)r in n&&e.call(void 0,n[r],r,t)}(t,(function(n,r){e.call(void 0,n,r,t)&&Array.prototype.splice.call(t,r,1).length}))}function Y(t){return Array.prototype.concat.apply([],arguments)}function Z(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}var Q,$=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]},tt=/&/g,et=/</g,nt=/>/g,rt=/"/g,it=/'/g,ot=/\x00/g,st=/[\x00&<>"']/;function at(t,e){return-1!=t.indexOf(e)}function ut(t,e){return t<e?-1:t>e?1:0}t:{var ct=u.navigator;if(ct){var ht=ct.userAgent;if(ht){Q=ht;break t}}Q=""}function ft(t){return at(Q,t)}function lt(t,e){for(var n in t)e.call(void 0,t[n],n,t)}function pt(t){for(var e in t)return!1;return!0}function dt(t){var e,n={};for(e in t)n[e]=t[e];return n}var vt="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function yt(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<vt.length;o++)n=vt[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function mt(t,e){t:{try{var n=t&&t.ownerDocument,r=n&&(n.defaultView||n.parentWindow);if((r=r||u).Element&&r.Location){var i=r;break t}}catch(t){}i=null}if(i&&void 0!==i[e]&&(!t||!(t instanceof i[e])&&(t instanceof i.Location||t instanceof i.Element))){if(v(t))try{var o=t.constructor.displayName||t.constructor.name||Object.prototype.toString.call(t)}catch(t){o="<object could not be stringified>"}else o=void 0===t?"undefined":null===t?"null":typeof t;x("Argument is not a %s (or a non-Element, non-Location mock); got: %s",e,o)}}function gt(t,e){this.a=t===It&&e||"",this.b=wt}function bt(t){return t instanceof gt&&t.constructor===gt&&t.b===wt?t.a:(x("expected object of type Const, got '"+t+"'"),"type_error:Const")}gt.prototype.sa=!0,gt.prototype.ra=function(){return this.a},gt.prototype.toString=function(){return"Const{"+this.a+"}"};var wt={},It={},Et=new gt(It,"");function Tt(t,e){this.a=t===Dt&&e||"",this.b=kt}function _t(t){return t instanceof Tt&&t.constructor===Tt&&t.b===kt?t.a:(x("expected object of type TrustedResourceUrl, got '"+t+"' of type "+l(t)),"type_error:TrustedResourceUrl")}function At(t,e){var n=bt(t);if(!St.test(n))throw Error("Invalid TrustedResourceUrl format: "+n);return t=n.replace(Nt,(function(t,r){if(!Object.prototype.hasOwnProperty.call(e,r))throw Error('Found marker, "'+r+'", in format string, "'+n+'", but no valid label mapping found in args: '+JSON.stringify(e));return(t=e[r])instanceof gt?bt(t):encodeURIComponent(String(t))})),new Tt(Dt,t)}Tt.prototype.sa=!0,Tt.prototype.ra=function(){return this.a.toString()},Tt.prototype.toString=function(){return"TrustedResourceUrl{"+this.a+"}"};var Nt=/%{(\w+)}/g,St=/^((https:)?\/\/[0-9a-z.:[\]-]+\/|\/[^/\\]|[^:/\\%]+\/|[^:/\\%]*[?#]|about:blank#)/i,kt={},Dt={};function Ot(t,e){this.a=t===xt&&e||"",this.b=Rt}function Pt(t){return t instanceof Ot&&t.constructor===Ot&&t.b===Rt?t.a:(x("expected object of type SafeUrl, got '"+t+"' of type "+l(t)),"type_error:SafeUrl")}Ot.prototype.sa=!0,Ot.prototype.ra=function(){return this.a.toString()},Ot.prototype.toString=function(){return"SafeUrl{"+this.a+"}"};var Lt=/^(?:(?:https?|mailto|ftp):|[^:/?#]*(?:[/?#]|$))/i;function Ct(t){return t instanceof Ot?t:(t="object"==typeof t&&t.sa?t.ra():String(t),Lt.test(t)||(t="about:invalid#zClosurez"),new Ot(xt,t))}var Rt={},xt={};function Mt(){this.a="",this.b=Ut}function Vt(t){return t instanceof Mt&&t.constructor===Mt&&t.b===Ut?t.a:(x("expected object of type SafeHtml, got '"+t+"' of type "+l(t)),"type_error:SafeHtml")}Mt.prototype.sa=!0,Mt.prototype.ra=function(){return this.a.toString()},Mt.prototype.toString=function(){return"SafeHtml{"+this.a+"}"};var Ut={};function jt(t){var e=new Mt;return e.a=t,e}jt("<!DOCTYPE html>");var Ft=jt("");function Gt(t,e){for(var n=t.split("%s"),r="",i=Array.prototype.slice.call(arguments,1);i.length&&1<n.length;)r+=n.shift()+i.shift();return r+n.join("%s")}function qt(t){return st.test(t)&&(-1!=t.indexOf("&")&&(t=t.replace(tt,"&amp;")),-1!=t.indexOf("<")&&(t=t.replace(et,"&lt;")),-1!=t.indexOf(">")&&(t=t.replace(nt,"&gt;")),-1!=t.indexOf('"')&&(t=t.replace(rt,"&quot;")),-1!=t.indexOf("'")&&(t=t.replace(it,"&#39;")),-1!=t.indexOf("\0")&&(t=t.replace(ot,"&#0;"))),t}function Bt(t){return Bt[" "](t),t}jt("<br>"),Bt[" "]=f;var zt,Kt,Ht=ft("Opera"),Jt=ft("Trident")||ft("MSIE"),Wt=ft("Edge"),Xt=Wt||Jt,Yt=ft("Gecko")&&!(at(Q.toLowerCase(),"webkit")&&!ft("Edge"))&&!(ft("Trident")||ft("MSIE"))&&!ft("Edge"),Zt=at(Q.toLowerCase(),"webkit")&&!ft("Edge");function Qt(){var t=u.document;return t?t.documentMode:void 0}t:{var $t="",te=(Kt=Q,Yt?/rv:([^\);]+)(\)|;)/.exec(Kt):Wt?/Edge\/([\d\.]+)/.exec(Kt):Jt?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(Kt):Zt?/WebKit\/(\S+)/.exec(Kt):Ht?/(?:Version)[ \/]?(\S+)/.exec(Kt):void 0);if(te&&($t=te?te[1]:""),Jt){var ee=Qt();if(null!=ee&&ee>parseFloat($t)){zt=String(ee);break t}}zt=$t}var ne,re={};function ie(t){return function(t,e){var n=re;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e()}(t,(function(){for(var e=0,n=$(String(zt)).split("."),r=$(String(t)).split("."),i=Math.max(n.length,r.length),o=0;0==e&&o<i;o++){var s=n[o]||"",a=r[o]||"";do{if(s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==s[0].length&&0==a[0].length)break;e=ut(0==s[1].length?0:parseInt(s[1],10),0==a[1].length?0:parseInt(a[1],10))||ut(0==s[2].length,0==a[2].length)||ut(s[2],a[2]),s=s[3],a=a[3]}while(0==e)}return 0<=e}))}ne=u.document&&Jt?Qt():void 0;try{new self.OffscreenCanvas(0,0).getContext("2d")}catch(Kt){}var oe=!Jt||9<=Number(ne);function se(t){var e=document;return"string"==typeof t?e.getElementById(t):t}function ae(t,e){lt(e,(function(e,n){e&&"object"==typeof e&&e.sa&&(e=e.ra()),"style"==n?t.style.cssText=e:"class"==n?t.className=e:"for"==n?t.htmlFor=e:he.hasOwnProperty(n)?t.setAttribute(he[n],e):0==n.lastIndexOf("aria-",0)||0==n.lastIndexOf("data-",0)?t.setAttribute(n,e):t[n]=e}))}var ue,ce,he={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",nonce:"nonce",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};function fe(t,e,n){function r(n){n&&e.appendChild("string"==typeof n?t.createTextNode(n):n)}for(var i=2;i<n.length;i++){var o=n[i];!p(o)||v(o)&&0<o.nodeType?r(o):B(pe(o)?Z(o):o,r)}}function le(t,e){return e=String(e),"application/xhtml+xml"===t.contentType&&(e=e.toLowerCase()),t.createElement(e)}function pe(t){if(t&&"number"==typeof t.length){if(v(t))return"function"==typeof t.item||"string"==typeof t.item;if(d(t))return"function"==typeof t.item}return!1}function de(t){u.setTimeout((function(){throw t}),0)}function ve(t,e){ce||function(){if(u.Promise&&u.Promise.resolve){var t=u.Promise.resolve(void 0);ce=function(){t.then(ge)}}else ce=function(){var t=ge;!d(u.setImmediate)||u.Window&&u.Window.prototype&&!ft("Edge")&&u.Window.prototype.setImmediate==u.setImmediate?(ue||(ue=function(){var t=u.MessageChannel;if(void 0===t&&"undefined"!=typeof window&&window.postMessage&&window.addEventListener&&!ft("Presto")&&(t=function(){var t=le(document,"IFRAME");t.style.display="none",function(t){var e=new Tt(Dt,bt(Et));mt(t,"HTMLIFrameElement"),t.src=_t(e).toString()}(t),document.documentElement.appendChild(t);var e=t.contentWindow;(t=e.document).open(),t.write(Vt(Ft)),t.close();var n="callImmediate"+Math.random(),r="file:"==e.location.protocol?"*":e.location.protocol+"//"+e.location.host;t=I((function(t){"*"!=r&&t.origin!=r||t.data!=n||this.port1.onmessage()}),this),e.addEventListener("message",t,!1),this.port1={},this.port2={postMessage:function(){e.postMessage(n,r)}}}),void 0!==t&&!ft("Trident")&&!ft("MSIE")){var e=new t,n={},r=n;return e.port1.onmessage=function(){if(void 0!==n.next){var t=(n=n.next).Fb;n.Fb=null,t()}},function(t){r.next={Fb:t},r=r.next,e.port2.postMessage(0)}}return function(t){u.setTimeout(t,0)}}()),ue(t)):u.setImmediate(t)}}(),ye||(ce(),ye=!0),me.add(t,e)}var ye=!1,me=new U;function ge(){for(var t;t=F();){try{t.a.call(t.b)}catch(t){de(t)}V(j,t)}ye=!1}function be(t,e){if(this.a=we,this.i=void 0,this.f=this.b=this.c=null,this.g=this.h=!1,t!=f)try{var n=this;t.call(e,(function(t){Ce(n,Ie,t)}),(function(t){if(!(t instanceof Fe))try{if(t instanceof Error)throw t;throw Error("Promise rejected.")}catch(t){}Ce(n,Ee,t)}))}catch(t){Ce(this,Ee,t)}}var we=0,Ie=2,Ee=3;function Te(){this.next=this.f=this.b=this.g=this.a=null,this.c=!1}Te.prototype.reset=function(){this.f=this.b=this.g=this.a=null,this.c=!1};var _e=new M((function(){return new Te}),(function(t){t.reset()}));function Ae(t,e,n){var r=_e.get();return r.g=t,r.b=e,r.f=n,r}function Ne(t){if(t instanceof be)return t;var e=new be(f);return Ce(e,Ie,t),e}function Se(t){return new be((function(e,n){n(t)}))}function ke(t,e,n){Re(t,e,n,null)||ve(E(e,t))}function De(t){return new be((function(e){var n=t.length,r=[];if(n)for(var i=function(t,i,o){n--,r[t]=i?{Ob:!0,value:o}:{Ob:!1,reason:o},0==n&&e(r)},o=0;o<t.length;o++)ke(t[o],E(i,o,!0),E(i,o,!1));else e(r)}))}function Oe(t,e){if(t.a==we)if(t.c){var n=t.c;if(n.b){for(var r=0,i=null,o=null,s=n.b;s&&(s.c||(r++,s.a==t&&(i=s),!(i&&1<r)));s=s.next)i||(o=s);i&&(n.a==we&&1==r?Oe(n,e):(o?((r=o).next==n.f&&(n.f=r),r.next=r.next.next):Me(n),Ve(n,i,Ee,e)))}t.c=null}else Ce(t,Ee,e)}function Pe(t,e){t.b||t.a!=Ie&&t.a!=Ee||xe(t),t.f?t.f.next=e:t.b=e,t.f=e}function Le(t,e,n,r){var i=Ae(null,null,null);return i.a=new be((function(t,o){i.g=e?function(n){try{var i=e.call(r,n);t(i)}catch(t){o(t)}}:t,i.b=n?function(e){try{var i=n.call(r,e);void 0===i&&e instanceof Fe?o(e):t(i)}catch(t){o(t)}}:o})),i.a.c=t,Pe(t,i),i.a}function Ce(t,e,n){t.a==we&&(t===n&&(e=Ee,n=new TypeError("Promise cannot resolve to itself")),t.a=1,Re(n,t.Zc,t.$c,t)||(t.i=n,t.a=e,t.c=null,xe(t),e!=Ee||n instanceof Fe||function(t,e){t.g=!0,ve((function(){t.g&&je.call(null,e)}))}(t,n)))}function Re(t,e,n,r){if(t instanceof be)return Pe(t,Ae(e||f,n||null,r)),!0;if(L(t))return t.then(e,n,r),!0;if(v(t))try{var i=t.then;if(d(i))return function(t,e,n,r,i){function o(t){s||(s=!0,r.call(i,t))}var s=!1;try{e.call(t,(function(t){s||(s=!0,n.call(i,t))}),o)}catch(t){o(t)}}(t,i,e,n,r),!0}catch(t){return n.call(r,t),!0}return!1}function xe(t){t.h||(t.h=!0,ve(t.fc,t))}function Me(t){var e=null;return t.b&&(e=t.b,t.b=e.next,e.next=null),t.b||(t.f=null),e}function Ve(t,e,n,r){if(n==Ee&&e.b&&!e.c)for(;t&&t.g;t=t.c)t.g=!1;if(e.a)e.a.c=null,Ue(e,n,r);else try{e.c?e.g.call(e.f):Ue(e,n,r)}catch(t){je.call(null,t)}V(_e,e)}function Ue(t,e,n){e==Ie?t.g.call(t.f,n):t.b&&t.b.call(t.f,n)}be.prototype.then=function(t,e,n){return Le(this,d(t)?t:null,d(e)?e:null,n)},be.prototype.$goog_Thenable=!0,(t=be.prototype).na=function(t,e){return(t=Ae(t,t,e)).c=!0,Pe(this,t),this},t.s=function(t,e){return Le(this,null,t,e)},t.cancel=function(t){if(this.a==we){var e=new Fe(t);ve((function(){Oe(this,e)}),this)}},t.Zc=function(t){this.a=we,Ce(this,Ie,t)},t.$c=function(t){this.a=we,Ce(this,Ee,t)},t.fc=function(){for(var t;t=Me(this);)Ve(this,t,this.a,this.i);this.h=!1};var je=de;function Fe(t){C.call(this,t)}function Ge(){0!=qe&&(Be[y(this)]=this),this.xa=this.xa,this.oa=this.oa}_(Fe,C),Fe.prototype.name="cancel";var qe=0,Be={};function ze(t){if(!t.xa&&(t.xa=!0,t.Da(),0!=qe)){var e=y(t);if(0!=qe&&t.oa&&0<t.oa.length)throw Error(t+" did not empty its onDisposeCallbacks queue. This probably means it overrode dispose() or disposeInternal() without calling the superclass' method.");delete Be[e]}}Ge.prototype.xa=!1,Ge.prototype.Da=function(){if(this.oa)for(;this.oa.length;)this.oa.shift()()};var Ke=Object.freeze||function(t){return t},He=!Jt||9<=Number(ne),Je=Jt&&!ie("9"),We=function(){if(!u.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{u.addEventListener("test",f,e),u.removeEventListener("test",f,e)}catch(t){}return t}();function Xe(t,e){this.type=t,this.b=this.target=e,this.defaultPrevented=!1}function Ye(t,e){if(Xe.call(this,t?t.type:""),this.relatedTarget=this.b=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.a=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.b=e,e=t.relatedTarget){if(Yt){t:{try{Bt(e.nodeName);var i=!0;break t}catch(t){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:Ze[t.pointerType]||"",this.a=t,t.defaultPrevented&&this.preventDefault()}}Xe.prototype.preventDefault=function(){this.defaultPrevented=!0},_(Ye,Xe);var Ze=Ke({2:"touch",3:"pen",4:"mouse"});Ye.prototype.preventDefault=function(){Ye.$a.preventDefault.call(this);var t=this.a;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,Je)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(t){}},Ye.prototype.g=function(){return this.a};var Qe="closure_listenable_"+(1e6*Math.random()|0),$e=0;function tn(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.Ua=i,this.key=++$e,this.va=this.Oa=!1}function en(t){t.va=!0,t.listener=null,t.proxy=null,t.src=null,t.Ua=null}function nn(t){this.src=t,this.a={},this.b=0}function rn(t,e){var n=e.type;n in t.a&&W(t.a[n],e)&&(en(e),0==t.a[n].length&&(delete t.a[n],t.b--))}function on(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.va&&o.listener==e&&o.capture==!!n&&o.Ua==r)return i}return-1}nn.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var s=on(t,e,r,i);return-1<s?(e=t[s],n||(e.Oa=!1)):((e=new tn(e,this.src,o,!!r,i)).Oa=n,t.push(e)),e};var sn="closure_lm_"+(1e6*Math.random()|0),an={};function un(t,e,n,r,i){if(r&&r.once)hn(t,e,n,r,i);else if(Array.isArray(e))for(var o=0;o<e.length;o++)un(t,e[o],n,r,i);else n=bn(n),t&&t[Qe]?In(t,e,n,v(r)?!!r.capture:!!r,i):cn(t,e,n,!1,r,i)}function cn(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var s=v(i)?!!i.capture:!!i,a=mn(t);if(a||(t[sn]=a=new nn(t)),!(n=a.add(e,n,r,s,o)).proxy)if(r=function(){var t=yn,e=He?function(n){return t.call(e.src,e.listener,n)}:function(n){if(!(n=t.call(e.src,e.listener,n)))return n};return e}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)We||(i=s),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(pn(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}}function hn(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)hn(t,e[o],n,r,i);else n=bn(n),t&&t[Qe]?En(t,e,n,v(r)?!!r.capture:!!r,i):cn(t,e,n,!0,r,i)}function fn(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)fn(t,e[o],n,r,i);else r=v(r)?!!r.capture:!!r,n=bn(n),t&&t[Qe]?(t=t.v,(e=String(e).toString())in t.a&&-1<(n=on(o=t.a[e],n,r,i))&&(en(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.a[e],t.b--))):t&&(t=mn(t))&&(e=t.a[e.toString()],t=-1,e&&(t=on(e,n,r,i)),(n=-1<t?e[t]:null)&&ln(n))}function ln(t){if("number"!=typeof t&&t&&!t.va){var e=t.src;if(e&&e[Qe])rn(e.v,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(pn(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=mn(e))?(rn(n,t),0==n.b&&(n.src=null,e[sn]=null)):en(t)}}}function pn(t){return t in an?an[t]:an[t]="on"+t}function dn(t,e,n,r){var i=!0;if((t=mn(t))&&(e=t.a[e.toString()]))for(e=e.concat(),t=0;t<e.length;t++){var o=e[t];o&&o.capture==n&&!o.va&&(o=vn(o,r),i=i&&!1!==o)}return i}function vn(t,e){var n=t.listener,r=t.Ua||t.src;return t.Oa&&ln(t),n.call(r,e)}function yn(t,e){if(t.va)return!0;if(!He){if(!e)t:{e=["window","event"];for(var n=u,r=0;r<e.length;r++)if(null==(n=n[e[r]])){e=null;break t}e=n}if(e=new Ye(r=e,this),n=!0,!(0>r.keyCode||null!=r.returnValue)){t:{var i=!1;if(0==r.keyCode)try{r.keyCode=-1;break t}catch(t){i=!0}(i||null==r.returnValue)&&(r.returnValue=!0)}for(r=[],i=e.b;i;i=i.parentNode)r.push(i);for(t=t.type,i=r.length-1;0<=i;i--){e.b=r[i];var o=dn(r[i],t,!0,e);n=n&&o}for(i=0;i<r.length;i++)e.b=r[i],o=dn(r[i],t,!1,e),n=n&&o}return n}return vn(t,new Ye(e,this))}function mn(t){return(t=t[sn])instanceof nn?t:null}var gn="__closure_events_fn_"+(1e9*Math.random()>>>0);function bn(t){return d(t)?t:(t[gn]||(t[gn]=function(e){return t.handleEvent(e)}),t[gn])}function wn(){Ge.call(this),this.v=new nn(this),this.$b=this,this.fb=null}function In(t,e,n,r,i){t.v.add(String(e),n,!1,r,i)}function En(t,e,n,r,i){t.v.add(String(e),n,!0,r,i)}function Tn(t,e,n,r){if(!(e=t.v.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s=e[o];if(s&&!s.va&&s.capture==n){var a=s.listener,u=s.Ua||s.src;s.Oa&&rn(t.v,s),i=!1!==a.call(u,r)&&i}}return i&&!r.defaultPrevented}function _n(t,e,n){if(d(t))n&&(t=I(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=I(t.handleEvent,t)}return 2147483647<Number(e)?-1:u.setTimeout(t,e||0)}function An(t){var e=null;return new be((function(n,r){-1==(e=_n((function(){n(void 0)}),t))&&r(Error("Failed to schedule timer."))})).s((function(t){throw u.clearTimeout(e),t}))}function Nn(t){if(t.V&&"function"==typeof t.V)return t.V();if("string"==typeof t)return t.split("");if(p(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}function Sn(t){if(t.Y&&"function"==typeof t.Y)return t.Y();if(!t.V||"function"!=typeof t.V){if(p(t)||"string"==typeof t){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}for(var r in e=[],n=0,t)e[n++]=r;return e}}function kn(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof kn)for(n=t.Y(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function Dn(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];On(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)On(i,r=t.a[e])||(t.a[n++]=r,i[r]=1),e++;t.a.length=n}}function On(t,e){return Object.prototype.hasOwnProperty.call(t,e)}_(wn,Ge),wn.prototype[Qe]=!0,wn.prototype.addEventListener=function(t,e,n,r){un(this,t,e,n,r)},wn.prototype.removeEventListener=function(t,e,n,r){fn(this,t,e,n,r)},wn.prototype.dispatchEvent=function(t){var e,n=this.fb;if(n)for(e=[];n;n=n.fb)e.push(n);n=this.$b;var r=t.type||t;if("string"==typeof t)t=new Xe(t,n);else if(t instanceof Xe)t.target=t.target||n;else{var i=t;yt(t=new Xe(r,n),i)}if(i=!0,e)for(var o=e.length-1;0<=o;o--){var s=t.b=e[o];i=Tn(s,r,!0,t)&&i}if(i=Tn(s=t.b=n,r,!0,t)&&i,i=Tn(s,r,!1,t)&&i,e)for(o=0;o<e.length;o++)i=Tn(s=t.b=e[o],r,!1,t)&&i;return i},wn.prototype.Da=function(){if(wn.$a.Da.call(this),this.v){var t,e=this.v;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)en(n[r]);delete e.a[t],e.b--}}this.fb=null},(t=kn.prototype).V=function(){Dn(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},t.Y=function(){return Dn(this),this.a.concat()},t.clear=function(){this.b={},this.c=this.a.length=0},t.get=function(t,e){return On(this.b,t)?this.b[t]:e},t.set=function(t,e){On(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},t.forEach=function(t,e){for(var n=this.Y(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var Pn=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/\\#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Ln(t,e){var n;this.a=this.l=this.f="",this.g=null,this.h=this.c="",this.i=!1,t instanceof Ln?(this.i=void 0!==e?e:t.i,Cn(this,t.f),this.l=t.l,this.a=t.a,Rn(this,t.g),this.c=t.c,xn(this,tr(t.b)),this.h=t.h):t&&(n=String(t).match(Pn))?(this.i=!!e,Cn(this,n[1]||"",!0),this.l=Fn(n[2]||""),this.a=Fn(n[3]||"",!0),Rn(this,n[4]),this.c=Fn(n[5]||"",!0),xn(this,n[6]||"",!0),this.h=Fn(n[7]||"")):(this.i=!!e,this.b=new Wn(null,this.i))}function Cn(t,e,n){t.f=n?Fn(e,!0):e,t.f&&(t.f=t.f.replace(/:$/,""))}function Rn(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.g=e}else t.g=null}function xn(t,e,n){e instanceof Wn?(t.b=e,function(t,e){e&&!t.f&&(Xn(t),t.c=null,t.a.forEach((function(t,e){var n=e.toLowerCase();e!=n&&(Zn(this,e),$n(this,n,t))}),t)),t.f=e}(t.b,t.i)):(n||(e=Gn(e,Hn)),t.b=new Wn(e,t.i))}function Mn(t,e,n){t.b.set(e,n)}function Vn(t,e){return t.b.get(e)}function Un(t){return t instanceof Ln?new Ln(t):new Ln(t,void 0)}function jn(t,e,n,r){var i=new Ln(null,void 0);return t&&Cn(i,t),e&&(i.a=e),n&&Rn(i,n),r&&(i.c=r),i}function Fn(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Gn(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,qn),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function qn(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}Ln.prototype.toString=function(){var t=[],e=this.f;e&&t.push(Gn(e,Bn,!0),":");var n=this.a;return(n||"file"==e)&&(t.push("//"),(e=this.l)&&t.push(Gn(e,Bn,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.g)&&t.push(":",String(n))),(n=this.c)&&(this.a&&"/"!=n.charAt(0)&&t.push("/"),t.push(Gn(n,"/"==n.charAt(0)?Kn:zn,!0))),(n=this.b.toString())&&t.push("?",n),(n=this.h)&&t.push("#",Gn(n,Jn)),t.join("")},Ln.prototype.resolve=function(t){var e=new Ln(this),n=!!t.f;n?Cn(e,t.f):n=!!t.l,n?e.l=t.l:n=!!t.a,n?e.a=t.a:n=null!=t.g;var r=t.c;if(n)Rn(e,t.g);else if(n=!!t.c){if("/"!=r.charAt(0))if(this.a&&!this.c)r="/"+r;else{var i=e.c.lastIndexOf("/");-1!=i&&(r=e.c.substr(0,i+1)+r)}if(".."==(i=r)||"."==i)r="";else if(at(i,"./")||at(i,"/.")){r=0==i.lastIndexOf("/",0),i=i.split("/");for(var o=[],s=0;s<i.length;){var a=i[s++];"."==a?r&&s==i.length&&o.push(""):".."==a?((1<o.length||1==o.length&&""!=o[0])&&o.pop(),r&&s==i.length&&o.push("")):(o.push(a),r=!0)}r=o.join("/")}else r=i}return n?e.c=r:n=""!==t.b.toString(),n?xn(e,tr(t.b)):n=!!t.h,n&&(e.h=t.h),e};var Bn=/[#\/\?@]/g,zn=/[#\?:]/g,Kn=/[#\?]/g,Hn=/[#\?@]/g,Jn=/#/g;function Wn(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function Xn(t){t.a||(t.a=new kn,t.b=0,t.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.c,(function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)})))}function Yn(t){var e=Sn(t);if(void 0===e)throw Error("Keys are undefined");var n=new Wn(null,void 0);t=Nn(t);for(var r=0;r<e.length;r++){var i=e[r],o=t[r];Array.isArray(o)?$n(n,i,o):n.add(i,o)}return n}function Zn(t,e){Xn(t),e=er(t,e),On(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,On((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&Dn(t)))}function Qn(t,e){return Xn(t),e=er(t,e),On(t.a.b,e)}function $n(t,e,n){Zn(t,e),0<n.length&&(t.c=null,t.a.set(er(t,e),Z(n)),t.b+=n.length)}function tr(t){var e=new Wn;return e.c=t.c,t.a&&(e.a=new kn(t.a),e.b=t.b),e}function er(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}function nr(t){var e=[];return ir(new rr,t,e),e.join("")}function rr(){}function ir(t,e,n){if(null==e)n.push("null");else{if("object"==typeof e){if(Array.isArray(e)){var r=e;e=r.length,n.push("[");for(var i="",o=0;o<e;o++)n.push(i),ir(t,r[o],n),i=",";return void n.push("]")}if(!(e instanceof String||e instanceof Number||e instanceof Boolean)){for(r in n.push("{"),i="",e)Object.prototype.hasOwnProperty.call(e,r)&&"function"!=typeof(o=e[r])&&(n.push(i),ar(r,n),n.push(":"),ir(t,o,n),i=",");return void n.push("}")}e=e.valueOf()}switch(typeof e){case"string":ar(e,n);break;case"number":n.push(isFinite(e)&&!isNaN(e)?String(e):"null");break;case"boolean":n.push(String(e));break;case"function":n.push("null");break;default:throw Error("Unknown type: "+typeof e)}}}(t=Wn.prototype).add=function(t,e){Xn(this),this.c=null,t=er(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},t.clear=function(){this.a=this.c=null,this.b=0},t.forEach=function(t,e){Xn(this),this.a.forEach((function(n,r){B(n,(function(n){t.call(e,n,r,this)}),this)}),this)},t.Y=function(){Xn(this);for(var t=this.a.V(),e=this.a.Y(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},t.V=function(t){Xn(this);var e=[];if("string"==typeof t)Qn(this,t)&&(e=Y(e,this.a.get(er(this,t))));else{t=this.a.V();for(var n=0;n<t.length;n++)e=Y(e,t[n])}return e},t.set=function(t,e){return Xn(this),this.c=null,Qn(this,t=er(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},t.get=function(t,e){return t&&0<(t=this.V(t)).length?String(t[0]):e},t.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.Y(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.V(r);for(var o=0;o<r.length;o++){var s=i;""!==r[o]&&(s+="="+encodeURIComponent(String(r[o]))),t.push(s)}}return this.c=t.join("&")};var or={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\u000b"},sr=/\uffff/.test("￿")?/[\\"\x00-\x1f\x7f-\uffff]/g:/[\\"\x00-\x1f\x7f-\xff]/g;function ar(t,e){e.push('"',t.replace(sr,(function(t){var e=or[t];return e||(e="\\u"+(65536|t.charCodeAt(0)).toString(16).substr(1),or[t]=e),e})),'"')}function ur(){var t=kr();return Jt&&!!ne&&11==ne||/Edge\/\d+/.test(t)}function cr(){return u.window&&u.window.location.href||self&&self.location&&self.location.href||""}function hr(t,e){e=e||u.window;var n="about:blank";t&&(n=Pt(Ct(t))),e.location.href=n}function fr(t,e){var n,r=[];for(n in t)n in e?typeof t[n]!=typeof e[n]?r.push(n):"object"==typeof t[n]&&null!=t[n]&&null!=e[n]?0<fr(t[n],e[n]).length&&r.push(n):t[n]!==e[n]&&r.push(n):r.push(n);for(n in e)n in t||r.push(n);return r}function lr(t){return!!((t=(t||kr()).toLowerCase()).match(/android/)||t.match(/webos/)||t.match(/iphone|ipad|ipod/)||t.match(/blackberry/)||t.match(/windows phone/)||t.match(/iemobile/))}function pr(t){t=t||u.window;try{t.close()}catch(t){}}function dr(t,e,n){var r=Math.floor(1e9*Math.random()).toString();e=e||500,n=n||600;var i=(window.screen.availHeight-n)/2,o=(window.screen.availWidth-e)/2;for(s in e={width:e,height:n,top:0<i?i:0,left:0<o?o:0,location:!0,resizable:!0,statusbar:!0,toolbar:!1},n=kr().toLowerCase(),r&&(e.target=r,at(n,"crios/")&&(e.target="_blank")),Ar(kr())==Tr&&(t=t||"http://localhost",e.scrollbars=!0),n=t||"",(t=e)||(t={}),r=window,e=n instanceof Ot?n:Ct(void 0!==n.href?n.href:String(n)),n=t.target||n.target,i=[],t)switch(s){case"width":case"height":case"top":case"left":i.push(s+"="+t[s]);break;case"target":case"noopener":case"noreferrer":break;default:i.push(s+"="+(t[s]?1:0))}var s=i.join(",");if((ft("iPhone")&&!ft("iPod")&&!ft("iPad")||ft("iPad")||ft("iPod"))&&r.navigator&&r.navigator.standalone&&n&&"_self"!=n?(mt(s=le(document,"A"),"HTMLAnchorElement"),e instanceof Ot||e instanceof Ot||(e="object"==typeof e&&e.sa?e.ra():String(e),Lt.test(e)||(e="about:invalid#zClosurez"),e=new Ot(xt,e)),s.href=Pt(e),s.setAttribute("target",n),t.noreferrer&&s.setAttribute("rel","noreferrer"),(t=document.createEvent("MouseEvent")).initMouseEvent("click",!0,!0,r,1),s.dispatchEvent(t),s={}):t.noreferrer?(s=r.open("",n,s),t=Pt(e),s&&(Xt&&at(t,";")&&(t="'"+t.replace(/'/g,"%27")+"'"),s.opener=null,t=jt('<meta name="referrer" content="no-referrer"><meta http-equiv="refresh" content="0; url='+qt(t)+'">'),r=s.document)&&(r.write(Vt(t)),r.close())):(s=r.open(Pt(e),n,s))&&t.noopener&&(s.opener=null),s)try{s.focus()}catch(t){}return s}var vr=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,yr=/^[^@]+@[^@]+$/;function mr(){var t=null;return new be((function(e){"complete"==u.document.readyState?e():(t=function(){e()},hn(window,"load",t))})).s((function(e){throw fn(window,"load",t),e}))}function gr(t){return t=t||kr(),!("file:"!==Cr()&&"ionic:"!==Cr()||!t.toLowerCase().match(/iphone|ipad|ipod|android/))}function br(){var t=u.window;try{return!(!t||t==t.top)}catch(t){return!1}}function wr(){return void 0!==u.WorkerGlobalScope&&"function"==typeof u.importScripts}function Ir(){return r.Z.INTERNAL.hasOwnProperty("reactNative")?"ReactNative":r.Z.INTERNAL.hasOwnProperty("node")?"Node":wr()?"Worker":"Browser"}function Er(){var t=Ir();return"ReactNative"===t||"Node"===t}var Tr="Firefox",_r="Chrome";function Ar(t){var e=t.toLowerCase();return at(e,"opera/")||at(e,"opr/")||at(e,"opios/")?"Opera":at(e,"iemobile")?"IEMobile":at(e,"msie")||at(e,"trident/")?"IE":at(e,"edge/")?"Edge":at(e,"firefox/")?Tr:at(e,"silk/")?"Silk":at(e,"blackberry")?"Blackberry":at(e,"webos")?"Webos":!at(e,"safari/")||at(e,"chrome/")||at(e,"crios/")||at(e,"android")?!at(e,"chrome/")&&!at(e,"crios/")||at(e,"edge/")?at(e,"android")?"Android":(t=t.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/))&&2==t.length?t[1]:"Other":_r:"Safari"}var Nr={ld:"FirebaseCore-web",nd:"FirebaseUI-web"};function Sr(t,e){e=e||[];var n,r=[],i={};for(n in Nr)i[Nr[n]]=!0;for(n=0;n<e.length;n++)void 0!==i[e[n]]&&(delete i[e[n]],r.push(e[n]));return r.sort(),(e=r).length||(e=["FirebaseCore-web"]),"Browser"===(r=Ir())?r=Ar(i=kr()):"Worker"===r&&(r=Ar(i=kr())+"-"+r),r+"/JsCore/"+t+"/"+e.join(",")}function kr(){return u.navigator&&u.navigator.userAgent||""}function Dr(t,e){t=t.split("."),e=e||u;for(var n=0;n<t.length&&"object"==typeof e&&null!=e;n++)e=e[t[n]];return n!=t.length&&(e=void 0),e}function Or(){try{var t=u.localStorage,e=Ur();if(t)return t.setItem(e,"1"),t.removeItem(e),!ur()||!!u.indexedDB}catch(t){return wr()&&!!u.indexedDB}return!1}function Pr(){return(Lr()||"chrome-extension:"===Cr()||gr())&&!Er()&&Or()&&!wr()}function Lr(){return"http:"===Cr()||"https:"===Cr()}function Cr(){return u.location&&u.location.protocol||null}function Rr(t){return!lr(t=t||kr())&&Ar(t)!=Tr}function xr(t){return void 0===t?null:nr(t)}function Mr(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&null!==t[e]&&void 0!==t[e]&&(n[e]=t[e]);return n}function Vr(t){if(null!==t)return JSON.parse(t)}function Ur(t){return t||Math.floor(1e9*Math.random()).toString()}function jr(t){return"Safari"!=Ar(t=t||kr())&&!t.toLowerCase().match(/iphone|ipad|ipod/)}function Fr(){var t=u.___jsl;if(t&&t.H)for(var e in t.H)if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=t.H[e].L.concat(),t.CP)for(var n=0;n<t.CP.length;n++)t.CP[n]=null}function Gr(t,e){if(t>e)throw Error("Short delay should be less than long delay!");this.a=t,this.c=e,t=kr(),e=Ir(),this.b=lr(t)||"ReactNative"===e}function qr(){var t=u.document;return!t||void 0===t.visibilityState||"visible"==t.visibilityState}function Br(t){"undefined"!=typeof console&&"function"==typeof console.warn&&console.warn(t)}function zr(t){try{var e=new Date(parseInt(t,10));if(!isNaN(e.getTime())&&!/[^0-9]/.test(t))return e.toUTCString()}catch(t){}return null}function Kr(){return!(!Dr("fireauth.oauthhelper",u)&&!Dr("fireauth.iframe",u))}Gr.prototype.get=function(){var t=u.navigator;return!t||"boolean"!=typeof t.onLine||!Lr()&&"chrome-extension:"!==Cr()&&void 0===t.connection||t.onLine?this.b?this.c:this.a:Math.min(5e3,this.a)};var Hr,Jr={};function Wr(t){Jr[t]||(Jr[t]=!0,Br(t))}try{var Xr={};Object.defineProperty(Xr,"abcd",{configurable:!0,enumerable:!0,value:1}),Object.defineProperty(Xr,"abcd",{configurable:!0,enumerable:!0,value:2}),Hr=2==Xr.abcd}catch(Kt){Hr=!1}function Yr(t,e,n){Hr?Object.defineProperty(t,e,{configurable:!0,enumerable:!0,value:n}):t[e]=n}function Zr(t,e){if(e)for(var n in e)e.hasOwnProperty(n)&&Yr(t,n,e[n])}function Qr(t){var e={};return Zr(e,t),e}function $r(t){var e=t;if("object"==typeof t&&null!=t)for(var n in e="length"in t?[]:{},t)Yr(e,n,$r(t[n]));return e}function ti(t){var e=t&&(t[oi]?"phone":null);if(!(e&&t&&t[ii]))throw new A("internal-error","Internal assert: invalid MultiFactorInfo object");Yr(this,"uid",t[ii]),Yr(this,"displayName",t[ni]||null);var n=null;t[ri]&&(n=new Date(t[ri]).toUTCString()),Yr(this,"enrollmentTime",n),Yr(this,"factorId",e)}function ei(t){try{var e=new si(t)}catch(t){e=null}return e}ti.prototype.w=function(){return{uid:this.uid,displayName:this.displayName,factorId:this.factorId,enrollmentTime:this.enrollmentTime}};var ni="displayName",ri="enrolledAt",ii="mfaEnrollmentId",oi="phoneInfo";function si(t){ti.call(this,t),Yr(this,"phoneNumber",t[oi])}function ai(t){var e={},n=t[fi],r=t[pi],i=t[di];if(t=ei(t[li]),!i||i!=ci&&i!=hi&&!n||i==hi&&!r||i==ui&&!t)throw Error("Invalid checkActionCode response!");i==hi?(e[yi]=n||null,e[gi]=n||null,e[vi]=r):(e[yi]=r||null,e[gi]=r||null,e[vi]=n||null),e[mi]=t||null,Yr(this,wi,i),Yr(this,bi,$r(e))}_(si,ti),si.prototype.w=function(){var t=si.$a.w.call(this);return t.phoneNumber=this.phoneNumber,t};var ui="REVERT_SECOND_FACTOR_ADDITION",ci="EMAIL_SIGNIN",hi="VERIFY_AND_CHANGE_EMAIL",fi="email",li="mfaInfo",pi="newEmail",di="requestType",vi="email",yi="fromEmail",mi="multiFactorInfo",gi="previousEmail",bi="data",wi="operation";function Ii(t){var e=Vn(t=Un(t),Ei)||null,n=Vn(t,Ti)||null,r=Vn(t,Ni)||null;if(r=r&&ki[r]||null,!e||!n||!r)throw new A("argument-error",Ei+", "+Ti+"and "+Ni+" are required in a valid action code URL.");Zr(this,{apiKey:e,operation:r,code:n,continueUrl:Vn(t,_i)||null,languageCode:Vn(t,Ai)||null,tenantId:Vn(t,Si)||null})}var Ei="apiKey",Ti="oobCode",_i="continueUrl",Ai="languageCode",Ni="mode",Si="tenantId",ki={recoverEmail:"RECOVER_EMAIL",resetPassword:"PASSWORD_RESET",revertSecondFactorAddition:ui,signIn:ci,verifyAndChangeEmail:hi,verifyEmail:"VERIFY_EMAIL"};function Di(t){try{return new Ii(t)}catch(t){return null}}function Oi(t){var e=t[xi];if(void 0===e)throw new A("missing-continue-uri");if("string"!=typeof e||"string"==typeof e&&!e.length)throw new A("invalid-continue-uri");this.h=e,this.b=this.a=null,this.g=!1;var n=t[Pi];if(n&&"object"==typeof n){e=n[Ui];var r=n[Mi];if(n=n[Vi],"string"==typeof e&&e.length){if(this.a=e,void 0!==r&&"boolean"!=typeof r)throw new A("argument-error",Mi+" property must be a boolean when specified.");if(this.g=!!r,void 0!==n&&("string"!=typeof n||"string"==typeof n&&!n.length))throw new A("argument-error",Vi+" property must be a non empty string when specified.");this.b=n||null}else{if(void 0!==e)throw new A("argument-error",Ui+" property must be a non empty string when specified.");if(void 0!==r||void 0!==n)throw new A("missing-android-pkg-name")}}else if(void 0!==n)throw new A("argument-error",Pi+" property must be a non null object when specified.");if(this.f=null,(e=t[Ri])&&"object"==typeof e){if("string"==typeof(e=e[ji])&&e.length)this.f=e;else if(void 0!==e)throw new A("argument-error",ji+" property must be a non empty string when specified.")}else if(void 0!==e)throw new A("argument-error",Ri+" property must be a non null object when specified.");if(void 0!==(e=t[Ci])&&"boolean"!=typeof e)throw new A("argument-error",Ci+" property must be a boolean when specified.");if(this.c=!!e,void 0!==(t=t[Li])&&("string"!=typeof t||"string"==typeof t&&!t.length))throw new A("argument-error",Li+" property must be a non empty string when specified.");this.i=t||null}var Pi="android",Li="dynamicLinkDomain",Ci="handleCodeInApp",Ri="iOS",xi="url",Mi="installApp",Vi="minimumVersion",Ui="packageName",ji="bundleId";function Fi(t){var e={};for(var n in e.continueUrl=t.h,e.canHandleCodeInApp=t.c,(e.androidPackageName=t.a)&&(e.androidMinimumVersion=t.b,e.androidInstallApp=t.g),e.iOSBundleId=t.f,e.dynamicLinkDomain=t.i,e)null===e[n]&&delete e[n];return e}var Gi=null;function qi(t){var e=zi(t);if(!(e&&e.sub&&e.iss&&e.aud&&e.exp))throw Error("Invalid JWT");this.g=t,this.c=e.exp,this.h=e.sub,T(),this.a=e.provider_id||e.firebase&&e.firebase.sign_in_provider||null,this.f=e.firebase&&e.firebase.tenant||null,this.b=!!e.is_anonymous||"anonymous"==this.a}function Bi(t){try{return new qi(t)}catch(t){return null}}function zi(t){if(!t)return null;if(3!=(t=t.split(".")).length)return null;for(var e=(4-(t=t[1]).length%4)%4,n=0;n<e;n++)t+=".";try{return JSON.parse(function(t){var e="";return function(t,e){function n(e){for(;r<t.length;){var n=t.charAt(r++),i=Gi[n];if(null!=i)return i;if(!/^[\s\xa0]*$/.test(n))throw Error("Unknown base64 encoding at char: "+n)}return e}!function(){if(!Gi){Gi={};for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),e=["+/=","+/","-_=","-_.","-_"],n=0;5>n;n++)for(var r=t.concat(e[n].split("")),i=0;i<r.length;i++){var o=r[i];void 0===Gi[o]&&(Gi[o]=i)}}}();for(var r=0;;){var i=n(-1),o=n(0),s=n(64),a=n(64);if(64===a&&-1===i)break;e(i<<2|o>>4),64!=s&&(e(o<<4&240|s>>2),64!=a&&e(s<<6&192|a))}}(t,(function(t){e+=String.fromCharCode(t)})),e}(t))}catch(t){}return null}qi.prototype.S=function(){return this.f},qi.prototype.i=function(){return this.b},qi.prototype.toString=function(){return this.g};var Ki="oauth_consumer_key oauth_nonce oauth_signature oauth_signature_method oauth_timestamp oauth_token oauth_version".split(" "),Hi=["client_id","response_type","scope","redirect_uri","state"],Ji={md:{Ja:"locale",ua:700,ta:600,fa:"facebook.com",Wa:Hi},od:{Ja:null,ua:500,ta:750,fa:"github.com",Wa:Hi},pd:{Ja:"hl",ua:515,ta:680,fa:"google.com",Wa:Hi},vd:{Ja:"lang",ua:485,ta:705,fa:"twitter.com",Wa:Ki},jd:{Ja:"locale",ua:640,ta:600,fa:"apple.com",Wa:[]}};function Wi(t){for(var e in Ji)if(Ji[e].fa==t)return Ji[e];return null}function Xi(t){var e={};e["facebook.com"]=to,e["google.com"]=no,e["github.com"]=eo,e["twitter.com"]=ro;var n=t&&t[Zi];try{if(n)return e[n]?new e[n](t):new $i(t);if(void 0!==t[Yi])return new Qi(t)}catch(t){}return null}var Yi="idToken",Zi="providerId";function Qi(t){var e=t[Zi];if(!e&&t[Yi]){var n=Bi(t[Yi]);n&&n.a&&(e=n.a)}if(!e)throw Error("Invalid additional user info!");"anonymous"!=e&&"custom"!=e||(e=null),n=!1,void 0!==t.isNewUser?n=!!t.isNewUser:"identitytoolkit#SignupNewUserResponse"===t.kind&&(n=!0),Yr(this,"providerId",e),Yr(this,"isNewUser",n)}function $i(t){Qi.call(this,t),Yr(this,"profile",$r((t=Vr(t.rawUserInfo||"{}"))||{}))}function to(t){if($i.call(this,t),"facebook.com"!=this.providerId)throw Error("Invalid provider ID!")}function eo(t){if($i.call(this,t),"github.com"!=this.providerId)throw Error("Invalid provider ID!");Yr(this,"username",this.profile&&this.profile.login||null)}function no(t){if($i.call(this,t),"google.com"!=this.providerId)throw Error("Invalid provider ID!")}function ro(t){if($i.call(this,t),"twitter.com"!=this.providerId)throw Error("Invalid provider ID!");Yr(this,"username",t.screenName||null)}function io(t){var e=Un(t),n=Vn(e,"link"),r=Vn(Un(n),"link");return e=Vn(e,"deep_link_id"),Vn(Un(e),"link")||e||r||n||t}function oo(t,e){if(!t&&!e)throw new A("internal-error","Internal assert: no raw session string available");if(t&&e)throw new A("internal-error","Internal assert: unable to determine the session type");this.a=t||null,this.b=e||null,this.type=this.a?so:ao}_($i,Qi),_(to,$i),_(eo,$i),_(no,$i),_(ro,$i);var so="enroll",ao="signin";function uo(){}function co(t,e){return t.then((function(t){if(t[Zs]){var n=Bi(t[Zs]);if(!n||e!=n.h)throw new A("user-mismatch");return t}throw new A("user-mismatch")})).s((function(t){throw t&&t.code&&t.code==k+"user-not-found"?new A("user-mismatch"):t}))}function ho(t,e){if(!e)throw new A("internal-error","failed to construct a credential");this.a=e,Yr(this,"providerId",t),Yr(this,"signInMethod",t)}function fo(t){return{pendingToken:t.a,requestUri:"http://localhost"}}function lo(t){if(t&&t.providerId&&t.signInMethod&&0==t.providerId.indexOf("saml.")&&t.pendingToken)try{return new ho(t.providerId,t.pendingToken)}catch(t){}return null}function po(t,e,n){if(this.a=null,e.idToken||e.accessToken)e.idToken&&Yr(this,"idToken",e.idToken),e.accessToken&&Yr(this,"accessToken",e.accessToken),e.nonce&&!e.pendingToken&&Yr(this,"nonce",e.nonce),e.pendingToken&&(this.a=e.pendingToken);else{if(!e.oauthToken||!e.oauthTokenSecret)throw new A("internal-error","failed to construct a credential");Yr(this,"accessToken",e.oauthToken),Yr(this,"secret",e.oauthTokenSecret)}Yr(this,"providerId",t),Yr(this,"signInMethod",n)}function vo(t){var e={};return t.idToken&&(e.id_token=t.idToken),t.accessToken&&(e.access_token=t.accessToken),t.secret&&(e.oauth_token_secret=t.secret),e.providerId=t.providerId,t.nonce&&!t.a&&(e.nonce=t.nonce),e={postBody:Yn(e).toString(),requestUri:"http://localhost"},t.a&&(delete e.postBody,e.pendingToken=t.a),e}function yo(t){if(t&&t.providerId&&t.signInMethod){var e={idToken:t.oauthIdToken,accessToken:t.oauthTokenSecret?null:t.oauthAccessToken,oauthTokenSecret:t.oauthTokenSecret,oauthToken:t.oauthTokenSecret&&t.oauthAccessToken,nonce:t.nonce,pendingToken:t.pendingToken};try{return new po(t.providerId,e,t.signInMethod)}catch(t){}}return null}function mo(t,e){this.Pc=e||[],Zr(this,{providerId:t,isOAuthProvider:!0}),this.Hb={},this.ob=(Wi(t)||{}).Ja||null,this.nb=null}function go(t){if("string"!=typeof t||0!=t.indexOf("saml."))throw new A("argument-error",'SAML provider IDs must be prefixed with "saml."');mo.call(this,t,[])}function bo(t){mo.call(this,t,Hi),this.a=[]}function wo(){bo.call(this,"facebook.com")}function Io(t){if(!t)throw new A("argument-error","credential failed: expected 1 argument (the OAuth access token).");var e=t;return v(t)&&(e=t.accessToken),(new wo).credential({accessToken:e})}function Eo(){bo.call(this,"github.com")}function To(t){if(!t)throw new A("argument-error","credential failed: expected 1 argument (the OAuth access token).");var e=t;return v(t)&&(e=t.accessToken),(new Eo).credential({accessToken:e})}function _o(){bo.call(this,"google.com"),this.Ca("profile")}function Ao(t,e){var n=t;return v(t)&&(n=t.idToken,e=t.accessToken),(new _o).credential({idToken:n,accessToken:e})}function No(){mo.call(this,"twitter.com",Ki)}function So(t,e){var n=t;if(v(n)||(n={oauthToken:t,oauthTokenSecret:e}),!n.oauthToken||!n.oauthTokenSecret)throw new A("argument-error","credential failed: expected 2 arguments (the OAuth access token and secret).");return new po("twitter.com",n,"twitter.com")}function ko(t,e,n){this.a=t,this.f=e,Yr(this,"providerId","password"),Yr(this,"signInMethod",n===Oo.EMAIL_LINK_SIGN_IN_METHOD?Oo.EMAIL_LINK_SIGN_IN_METHOD:Oo.EMAIL_PASSWORD_SIGN_IN_METHOD)}function Do(t){return t&&t.email&&t.password?new ko(t.email,t.password,t.signInMethod):null}function Oo(){Zr(this,{providerId:"password",isOAuthProvider:!1})}function Po(t,e){if(!(e=Lo(e)))throw new A("argument-error","Invalid email link!");return new ko(t,e.code,Oo.EMAIL_LINK_SIGN_IN_METHOD)}function Lo(t){return(t=Di(t=io(t)))&&t.operation===ci?t:null}function Co(t){if(!(t.cb&&t.bb||t.La&&t.ea))throw new A("internal-error");this.a=t,Yr(this,"providerId","phone"),this.fa="phone",Yr(this,"signInMethod","phone")}function Ro(t){if(t&&"phone"===t.providerId&&(t.verificationId&&t.verificationCode||t.temporaryProof&&t.phoneNumber)){var e={};return B(["verificationId","verificationCode","temporaryProof","phoneNumber"],(function(n){t[n]&&(e[n]=t[n])})),new Co(e)}return null}function xo(t){return t.a.La&&t.a.ea?{temporaryProof:t.a.La,phoneNumber:t.a.ea}:{sessionInfo:t.a.cb,code:t.a.bb}}function Mo(t){try{this.a=t||r.Z.auth()}catch(t){throw new A("argument-error","Either an instance of firebase.auth.Auth must be passed as an argument to the firebase.auth.PhoneAuthProvider constructor, or the default firebase App instance must be initialized via firebase.initializeApp().")}Zr(this,{providerId:"phone",isOAuthProvider:!1})}function Vo(t,e){if(!t)throw new A("missing-verification-id");if(!e)throw new A("missing-verification-code");return new Co({cb:t,bb:e})}function Uo(t){if(t.temporaryProof&&t.phoneNumber)return new Co({La:t.temporaryProof,ea:t.phoneNumber});var e=t&&t.providerId;if(!e||"password"===e)return null;var n=t&&t.oauthAccessToken,r=t&&t.oauthTokenSecret,i=t&&t.nonce,o=t&&t.oauthIdToken,s=t&&t.pendingToken;try{switch(e){case"google.com":return Ao(o,n);case"facebook.com":return Io(n);case"github.com":return To(n);case"twitter.com":return So(n,r);default:return n||r||o||s?s?0==e.indexOf("saml.")?new ho(e,s):new po(e,{pendingToken:s,idToken:t.oauthIdToken,accessToken:t.oauthAccessToken},e):new bo(e).credential({idToken:o,accessToken:n,rawNonce:i}):null}}catch(t){return null}}function jo(t){if(!t.isOAuthProvider)throw new A("invalid-oauth-provider")}function Fo(t,e,n,r,i,o,s){if(this.c=t,this.b=e||null,this.g=n||null,this.f=r||null,this.i=o||null,this.h=s||null,this.a=i||null,!this.g&&!this.a)throw new A("invalid-auth-event");if(this.g&&this.a)throw new A("invalid-auth-event");if(this.g&&!this.f)throw new A("invalid-auth-event")}function Go(t){return(t=t||{}).type?new Fo(t.type,t.eventId,t.urlResponse,t.sessionId,t.error&&N(t.error),t.postBody,t.tenantId):null}function qo(){this.b=null,this.a=[]}oo.prototype.Ha=function(){return this.a?Ne(this.a):Ne(this.b)},oo.prototype.w=function(){return this.type==so?{multiFactorSession:{idToken:this.a}}:{multiFactorSession:{pendingCredential:this.b}}},uo.prototype.ja=function(){},uo.prototype.b=function(){},uo.prototype.c=function(){},uo.prototype.w=function(){},ho.prototype.ja=function(t){return ga(t,fo(this))},ho.prototype.b=function(t,e){var n=fo(this);return n.idToken=e,ba(t,n)},ho.prototype.c=function(t,e){return co(wa(t,fo(this)),e)},ho.prototype.w=function(){return{providerId:this.providerId,signInMethod:this.signInMethod,pendingToken:this.a}},po.prototype.ja=function(t){return ga(t,vo(this))},po.prototype.b=function(t,e){var n=vo(this);return n.idToken=e,ba(t,n)},po.prototype.c=function(t,e){return co(wa(t,vo(this)),e)},po.prototype.w=function(){var t={providerId:this.providerId,signInMethod:this.signInMethod};return this.idToken&&(t.oauthIdToken=this.idToken),this.accessToken&&(t.oauthAccessToken=this.accessToken),this.secret&&(t.oauthTokenSecret=this.secret),this.nonce&&(t.nonce=this.nonce),this.a&&(t.pendingToken=this.a),t},mo.prototype.Ka=function(t){return this.Hb=dt(t),this},_(go,mo),_(bo,mo),bo.prototype.Ca=function(t){return J(this.a,t)||this.a.push(t),this},bo.prototype.Pb=function(){return Z(this.a)},bo.prototype.credential=function(t,e){var n;if(!(n=v(t)?{idToken:t.idToken||null,accessToken:t.accessToken||null,nonce:t.rawNonce||null}:{idToken:t||null,accessToken:e||null}).idToken&&!n.accessToken)throw new A("argument-error","credential failed: must provide the ID token and/or the access token.");return new po(this.providerId,n,this.providerId)},_(wo,bo),Yr(wo,"PROVIDER_ID","facebook.com"),Yr(wo,"FACEBOOK_SIGN_IN_METHOD","facebook.com"),_(Eo,bo),Yr(Eo,"PROVIDER_ID","github.com"),Yr(Eo,"GITHUB_SIGN_IN_METHOD","github.com"),_(_o,bo),Yr(_o,"PROVIDER_ID","google.com"),Yr(_o,"GOOGLE_SIGN_IN_METHOD","google.com"),_(No,mo),Yr(No,"PROVIDER_ID","twitter.com"),Yr(No,"TWITTER_SIGN_IN_METHOD","twitter.com"),ko.prototype.ja=function(t){return this.signInMethod==Oo.EMAIL_LINK_SIGN_IN_METHOD?eu(t,ka,{email:this.a,oobCode:this.f}):eu(t,Ya,{email:this.a,password:this.f})},ko.prototype.b=function(t,e){return this.signInMethod==Oo.EMAIL_LINK_SIGN_IN_METHOD?eu(t,Da,{idToken:e,email:this.a,oobCode:this.f}):eu(t,qa,{idToken:e,email:this.a,password:this.f})},ko.prototype.c=function(t,e){return co(this.ja(t),e)},ko.prototype.w=function(){return{email:this.a,password:this.f,signInMethod:this.signInMethod}},Zr(Oo,{PROVIDER_ID:"password"}),Zr(Oo,{EMAIL_LINK_SIGN_IN_METHOD:"emailLink"}),Zr(Oo,{EMAIL_PASSWORD_SIGN_IN_METHOD:"password"}),Co.prototype.ja=function(t){return t.eb(xo(this))},Co.prototype.b=function(t,e){var n=xo(this);return n.idToken=e,eu(t,Qa,n)},Co.prototype.c=function(t,e){var n=xo(this);return n.operation="REAUTH",co(t=eu(t,$a,n),e)},Co.prototype.w=function(){var t={providerId:"phone"};return this.a.cb&&(t.verificationId=this.a.cb),this.a.bb&&(t.verificationCode=this.a.bb),this.a.La&&(t.temporaryProof=this.a.La),this.a.ea&&(t.phoneNumber=this.a.ea),t},Mo.prototype.eb=function(t,e){var n=this.a.a;return Ne(e.verify()).then((function(r){if("string"!=typeof r)throw new A("argument-error","An implementation of firebase.auth.ApplicationVerifier.prototype.verify() must return a firebase.Promise that resolves with a string.");switch(e.type){case"recaptcha":var i=v(t)?t.session:null,o=v(t)?t.phoneNumber:t;return(i&&i.type==so?i.Ha().then((function(t){return function(t,e){return eu(t,za,e).then((function(t){return t.phoneSessionInfo.sessionInfo}))}(n,{idToken:t,phoneEnrollmentInfo:{phoneNumber:o,recaptchaToken:r}})})):i&&i.type==ao?i.Ha().then((function(e){return function(t,e){return eu(t,Ka,e).then((function(t){return t.phoneResponseInfo.sessionInfo}))}(n,{mfaPendingCredential:e,mfaEnrollmentId:t.multiFactorHint&&t.multiFactorHint.uid||t.multiFactorUid,phoneSignInInfo:{recaptchaToken:r}})})):function(t,e){return eu(t,Fa,e)}(n,{phoneNumber:o,recaptchaToken:r})).then((function(t){return"function"==typeof e.reset&&e.reset(),t}),(function(t){throw"function"==typeof e.reset&&e.reset(),t}));default:throw new A("argument-error",'Only firebase.auth.ApplicationVerifiers with type="recaptcha" are currently supported.')}}))},Zr(Mo,{PROVIDER_ID:"phone"}),Zr(Mo,{PHONE_SIGN_IN_METHOD:"phone"}),Fo.prototype.getUid=function(){var t=[];return t.push(this.c),this.b&&t.push(this.b),this.f&&t.push(this.f),this.h&&t.push(this.h),t.join("-")},Fo.prototype.S=function(){return this.h},Fo.prototype.w=function(){return{type:this.c,eventId:this.b,urlResponse:this.g,sessionId:this.f,postBody:this.i,tenantId:this.h,error:this.a&&this.a.w()}};var Bo,zo=null;function Ko(t){var e="unauthorized-domain",n=void 0,r=Un(t);t=r.a,"chrome-extension"==(r=r.f)?n=Gt("This chrome extension ID (chrome-extension://%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",t):"http"==r||"https"==r?n=Gt("This domain (%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",t):e="operation-not-supported-in-this-environment",A.call(this,e,n)}function Ho(t,e,n){A.call(this,t,n),(t=e||{}).Ib&&Yr(this,"email",t.Ib),t.ea&&Yr(this,"phoneNumber",t.ea),t.credential&&Yr(this,"credential",t.credential),t.Yb&&Yr(this,"tenantId",t.Yb)}function Jo(t){if(t.code){var e=t.code||"";0==e.indexOf(k)&&(e=e.substring(k.length));var n={credential:Uo(t),Yb:t.tenantId};if(t.email)n.Ib=t.email;else if(t.phoneNumber)n.ea=t.phoneNumber;else if(!n.credential)return new A(e,t.message||void 0);return new Ho(e,n,t.message)}return null}function Wo(){}function Xo(t){return t.c||(t.c=t.b())}function Yo(){}function Zo(t){if(!t.f&&"undefined"==typeof XMLHttpRequest&&"undefined"!=typeof ActiveXObject){for(var e=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],n=0;n<e.length;n++){var r=e[n];try{return new ActiveXObject(r),t.f=r}catch(t){}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed")}return t.f}function Qo(){}function $o(){this.a=new XDomainRequest,this.readyState=0,this.onreadystatechange=null,this.responseType=this.responseText=this.response="",this.status=-1,this.statusText="",this.a.onload=I(this.pc,this),this.a.onerror=I(this.Rb,this),this.a.onprogress=I(this.qc,this),this.a.ontimeout=I(this.uc,this)}function ts(t,e){t.readyState=e,t.onreadystatechange&&t.onreadystatechange()}function es(t,e,n){this.reset(t,e,n,void 0,void 0)}function ns(t){this.f=t,this.b=this.c=this.a=null}function rs(t,e){this.name=t,this.value=e}_(Ko,A),_(Ho,A),Ho.prototype.w=function(){var t={code:this.code,message:this.message};this.email&&(t.email=this.email),this.phoneNumber&&(t.phoneNumber=this.phoneNumber),this.tenantId&&(t.tenantId=this.tenantId);var e=this.credential&&this.credential.w();return e&&yt(t,e),t},Ho.prototype.toJSON=function(){return this.w()},Wo.prototype.c=null,_(Yo,Wo),Yo.prototype.a=function(){var t=Zo(this);return t?new ActiveXObject(t):new XMLHttpRequest},Yo.prototype.b=function(){var t={};return Zo(this)&&(t[0]=!0,t[1]=!0),t},Bo=new Yo,_(Qo,Wo),Qo.prototype.a=function(){var t=new XMLHttpRequest;if("withCredentials"in t)return t;if("undefined"!=typeof XDomainRequest)return new $o;throw Error("Unsupported browser")},Qo.prototype.b=function(){return{}},(t=$o.prototype).open=function(t,e,n){if(null!=n&&!n)throw Error("Only async requests are supported.");this.a.open(t,e)},t.send=function(t){if(t){if("string"!=typeof t)throw Error("Only string data is supported");this.a.send(t)}else this.a.send()},t.abort=function(){this.a.abort()},t.setRequestHeader=function(){},t.getResponseHeader=function(t){return"content-type"==t.toLowerCase()?this.a.contentType:""},t.pc=function(){this.status=200,this.response=this.responseText=this.a.responseText,ts(this,4)},t.Rb=function(){this.status=500,this.response=this.responseText="",ts(this,4)},t.uc=function(){this.Rb()},t.qc=function(){this.status=200,ts(this,1)},t.getAllResponseHeaders=function(){return"content-type: "+this.a.contentType},es.prototype.a=null,es.prototype.reset=function(t,e,n,r,i){r||T(),delete this.a},rs.prototype.toString=function(){return this.name};var is=new rs("SEVERE",1e3),os=new rs("WARNING",900),ss=new rs("CONFIG",700),as=new rs("FINE",500);function us(t){return t.c?t.c:t.a?us(t.a):(x("Root logger has no level set."),null)}ns.prototype.log=function(t,e,n){if(t.value>=us(this).value)for(d(e)&&(e=e()),t=new es(t,String(e),this.f),n&&(t.a=n),n=this;n;)n=n.a};var cs={},hs=null;function fs(t){var e;if(hs||(hs=new ns(""),cs[""]=hs,hs.c=ss),!(e=cs[t])){e=new ns(t);var n=t.lastIndexOf("."),r=t.substr(n+1);(n=fs(t.substr(0,n))).b||(n.b={}),n.b[r]=e,e.a=n,cs[t]=e}return e}function ls(t,e){t&&t.log(as,e,void 0)}function ps(t){this.f=t}function ds(t){wn.call(this),this.o=t,this.readyState=vs,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.i=new Headers,this.b=null,this.m="GET",this.g="",this.a=!1,this.h=fs("goog.net.FetchXmlHttp"),this.l=this.c=this.f=null}_(ps,Wo),ps.prototype.a=function(){return new ds(this.f)},ps.prototype.b=function(t){return function(){return t}}({}),_(ds,wn);var vs=0;function ys(t){t.c.read().then(t.oc.bind(t)).catch(t.Ta.bind(t))}function ms(t,e){e&&t.f&&(t.status=t.f.status,t.statusText=t.f.statusText),t.readyState=4,t.f=null,t.c=null,t.l=null,gs(t)}function gs(t){t.onreadystatechange&&t.onreadystatechange.call(t)}function bs(t){wn.call(this),this.headers=new kn,this.O=t||null,this.c=!1,this.A=this.a=null,this.h=this.P=this.l="",this.f=this.N=this.i=this.G=!1,this.g=0,this.o=null,this.m=ws,this.u=this.R=!1}(t=ds.prototype).open=function(t,e){if(this.readyState!=vs)throw this.abort(),Error("Error reopening a connection");this.m=t,this.g=e,this.readyState=1,gs(this)},t.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.a=!0;var e={headers:this.i,method:this.m,credentials:void 0,cache:void 0};t&&(e.body=t),this.o.fetch(new Request(this.g,e)).then(this.tc.bind(this),this.Ta.bind(this))},t.abort=function(){this.response=this.responseText="",this.i=new Headers,this.status=0,this.c&&this.c.cancel("Request was aborted."),1<=this.readyState&&this.a&&4!=this.readyState&&(this.a=!1,ms(this,!1)),this.readyState=vs},t.tc=function(t){this.a&&(this.f=t,this.b||(this.b=t.headers,this.readyState=2,gs(this)),this.a&&(this.readyState=3,gs(this),this.a&&("arraybuffer"===this.responseType?t.arrayBuffer().then(this.rc.bind(this),this.Ta.bind(this)):void 0!==u.ReadableStream&&"body"in t?(this.response=this.responseText="",this.c=t.body.getReader(),this.l=new TextDecoder,ys(this)):t.text().then(this.sc.bind(this),this.Ta.bind(this)))))},t.oc=function(t){if(this.a){var e=this.l.decode(t.value?t.value:new Uint8Array(0),{stream:!t.done});e&&(this.response=this.responseText+=e),t.done?ms(this,!0):gs(this),3==this.readyState&&ys(this)}},t.sc=function(t){this.a&&(this.response=this.responseText=t,ms(this,!0))},t.rc=function(t){this.a&&(this.response=t,ms(this,!0))},t.Ta=function(t){var e=this.h;e&&e.log(os,"Failed to fetch url "+this.g,t instanceof Error?t:Error(t)),this.a&&ms(this,!0)},t.setRequestHeader=function(t,e){this.i.append(t,e)},t.getResponseHeader=function(t){return this.b?this.b.get(t.toLowerCase())||"":((t=this.h)&&t.log(os,"Attempting to get response header but no headers have been received for url: "+this.g,void 0),"")},t.getAllResponseHeaders=function(){if(!this.b){var t=this.h;return t&&t.log(os,"Attempting to get all response headers but no headers have been received for url: "+this.g,void 0),""}t=[];for(var e=this.b.entries(),n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join("\r\n")},_(bs,wn);var ws="";bs.prototype.b=fs("goog.net.XhrIo");var Is=/^https?$/i,Es=["POST","PUT"];function Ts(t){return"content-type"==t.toLowerCase()}function _s(t,e){t.c=!1,t.a&&(t.f=!0,t.a.abort(),t.f=!1),t.h=e,As(t),Ss(t)}function As(t){t.G||(t.G=!0,t.dispatchEvent("complete"),t.dispatchEvent("error"))}function Ns(t){if(t.c&&void 0!==a)if(t.A[1]&&4==Ds(t)&&2==Os(t))ls(t.b,Ps(t,"Local request error detected and ignored"));else if(t.i&&4==Ds(t))_n(t.Ub,0,t);else if(t.dispatchEvent("readystatechange"),4==Ds(t)){ls(t.b,Ps(t,"Request complete")),t.c=!1;try{var e,n=Os(t);t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var o=String(t.l).match(Pn)[1]||null;if(!o&&u.self&&u.self.location){var s=u.self.location.protocol;o=s.substr(0,s.length-1)}i=!Is.test(o?o.toLowerCase():"")}e=i}if(e)t.dispatchEvent("complete"),t.dispatchEvent("success");else{try{var c=2<Ds(t)?t.a.statusText:""}catch(e){ls(t.b,"Can not get status: "+e.message),c=""}t.h=c+" ["+Os(t)+"]",As(t)}}finally{Ss(t)}}}function Ss(t,e){if(t.a){ks(t);var n=t.a,r=t.A[0]?f:null;t.a=null,t.A=null,e||t.dispatchEvent("ready");try{n.onreadystatechange=r}catch(e){(t=t.b)&&t.log(is,"Problem encountered resetting onreadystatechange: "+e.message,void 0)}}}function ks(t){t.a&&t.u&&(t.a.ontimeout=null),t.o&&(u.clearTimeout(t.o),t.o=null)}function Ds(t){return t.a?t.a.readyState:0}function Os(t){try{return 2<Ds(t)?t.a.status:-1}catch(t){return-1}}function Ps(t,e){return e+" ["+t.P+" "+t.l+" "+Os(t)+"]"}function Ls(t){var e=Bs;this.g=[],this.u=e,this.o=t||null,this.f=this.a=!1,this.c=void 0,this.m=this.A=this.i=!1,this.h=0,this.b=null,this.l=0}function Cs(t,e,n){t.a=!0,t.c=n,t.f=!e,Vs(t)}function Rs(t){if(t.a){if(!t.m)throw new Us(t);t.m=!1}}function xs(t,e,n,r){t.g.push([e,n,r]),t.a&&Vs(t)}function Ms(t){return H(t.g,(function(t){return d(t[1])}))}function Vs(t){if(t.h&&t.a&&Ms(t)){var e=t.h,n=Gs[e];n&&(u.clearTimeout(n.a),delete Gs[e]),t.h=0}t.b&&(t.b.l--,delete t.b),e=t.c;for(var r=n=!1;t.g.length&&!t.i;){var i=t.g.shift(),o=i[0],s=i[1];if(i=i[2],o=t.f?s:o)try{var a=o.call(i||t.o,e);void 0!==a&&(t.f=t.f&&(a==e||a instanceof Error),t.c=e=a),(L(e)||"function"==typeof u.Promise&&e instanceof u.Promise)&&(r=!0,t.i=!0)}catch(r){e=r,t.f=!0,Ms(t)||(n=!0)}}t.c=e,r&&(a=I(t.v,t,!0),r=I(t.v,t,!1),e instanceof Ls?(xs(e,a,r),e.A=!0):e.then(a,r)),n&&(e=new Fs(e),Gs[e.a]=e,t.h=e.a)}function Us(){C.call(this)}function js(){C.call(this)}function Fs(t){this.a=u.setTimeout(I(this.c,this),0),this.b=t}(t=bs.prototype).Ma=function(){void 0!==a&&this.a&&(this.h="Timed out after "+this.g+"ms, aborting",ls(this.b,Ps(this,this.h)),this.dispatchEvent("timeout"),this.abort(8))},t.abort=function(){this.a&&this.c&&(ls(this.b,Ps(this,"Aborting")),this.c=!1,this.f=!0,this.a.abort(),this.f=!1,this.dispatchEvent("complete"),this.dispatchEvent("abort"),Ss(this))},t.Da=function(){this.a&&(this.c&&(this.c=!1,this.f=!0,this.a.abort(),this.f=!1),Ss(this,!0)),bs.$a.Da.call(this)},t.Ub=function(){this.xa||(this.N||this.i||this.f?Ns(this):this.Ic())},t.Ic=function(){Ns(this)},t.getResponse=function(){try{if(!this.a)return null;if("response"in this.a)return this.a.response;switch(this.m){case ws:case"text":return this.a.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in this.a)return this.a.mozResponseArrayBuffer}var t=this.b;return t&&t.log(is,"Response type "+this.m+" is not supported on this browser",void 0),null}catch(t){return ls(this.b,"Can not get response: "+t.message),null}},Ls.prototype.cancel=function(t){if(this.a)this.c instanceof Ls&&this.c.cancel();else{if(this.b){var e=this.b;delete this.b,t?e.cancel(t):(e.l--,0>=e.l&&e.cancel())}this.u?this.u.call(this.o,this):this.m=!0,this.a||(t=new js(this),Rs(this),Cs(this,!1,t))}},Ls.prototype.v=function(t,e){this.i=!1,Cs(this,t,e)},Ls.prototype.then=function(t,e,n){var r,i,o=new be((function(t,e){r=t,i=e}));return xs(this,r,(function(t){t instanceof js?o.cancel():i(t)})),o.then(t,e,n)},Ls.prototype.$goog_Thenable=!0,_(Us,C),Us.prototype.message="Deferred has already fired",Us.prototype.name="AlreadyCalledError",_(js,C),js.prototype.message="Deferred was canceled",js.prototype.name="CanceledError",Fs.prototype.c=function(){throw delete Gs[this.a],this.b};var Gs={};function qs(t){var e={},n=e.document||document,r=_t(t).toString(),i=le(document,"SCRIPT"),o={Vb:i,Ma:void 0},s=new Ls(o),a=null,f=null!=e.timeout?e.timeout:5e3;return 0<f&&(a=window.setTimeout((function(){zs(i,!0);var t=new Js(Hs,"Timeout reached for loading script "+r);Rs(s),Cs(s,!1,t)}),f),o.Ma=a),i.onload=i.onreadystatechange=function(){i.readyState&&"loaded"!=i.readyState&&"complete"!=i.readyState||(zs(i,e.wd||!1,a),Rs(s),Cs(s,!0,null))},i.onerror=function(){zs(i,!0,a);var t=new Js(Ks,"Error while loading script "+r);Rs(s),Cs(s,!1,t)},yt(o=e.attributes||{},{type:"text/javascript",charset:"UTF-8"}),ae(i,o),function(t,e){mt(t,"HTMLScriptElement"),t.src=_t(e),null===h&&(h=(e=(e=u.document).querySelector&&e.querySelector("script[nonce]"))&&(e=e.nonce||e.getAttribute("nonce"))&&c.test(e)?e:""),(e=h)&&t.setAttribute("nonce",e)}(i,t),function(t){var e;return(e=(t||document).getElementsByTagName("HEAD"))&&0!=e.length?e[0]:t.documentElement}(n).appendChild(i),s}function Bs(){if(this&&this.Vb){var t=this.Vb;t&&"SCRIPT"==t.tagName&&zs(t,!0,this.Ma)}}function zs(t,e,n){null!=n&&u.clearTimeout(n),t.onload=f,t.onerror=f,t.onreadystatechange=f,e&&window.setTimeout((function(){t&&t.parentNode&&t.parentNode.removeChild(t)}),0)}var Ks=0,Hs=1;function Js(t,e){var n="Jsloader error (code #"+t+")";e&&(n+=": "+e),C.call(this,n),this.code=t}function Ws(t){this.f=t}function Xs(t,e,n){if(this.c=t,t=e||{},this.l=t.secureTokenEndpoint||"https://securetoken.googleapis.com/v1/token",this.v=t.secureTokenTimeout||Qs,this.g=dt(t.secureTokenHeaders||$s),this.h=t.firebaseEndpoint||"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",this.i=t.identityPlatformEndpoint||"https://identitytoolkit.googleapis.com/v2/",this.m=t.firebaseTimeout||ta,this.a=dt(t.firebaseHeaders||ea),n&&(this.a["X-Client-Version"]=n,this.g["X-Client-Version"]=n),n="Node"==Ir(),!(n=u.XMLHttpRequest||n&&r.Z.INTERNAL.node&&r.Z.INTERNAL.node.XMLHttpRequest)&&!wr())throw new A("internal-error","The XMLHttpRequest compatibility library was not found.");this.f=void 0,wr()?this.f=new ps(self):Er()?this.f=new Ws(n):this.f=new Qo,this.b=null}_(Js,C),_(Ws,Wo),Ws.prototype.a=function(){return new this.f},Ws.prototype.b=function(){return{}};var Ys,Zs="idToken",Qs=new Gr(3e4,6e4),$s={"Content-Type":"application/x-www-form-urlencoded"},ta=new Gr(3e4,6e4),ea={"Content-Type":"application/json"};function na(t,e){e?t.a["X-Firebase-Locale"]=e:delete t.a["X-Firebase-Locale"]}function ra(t,e){e&&(t.l=ia("https://securetoken.googleapis.com/v1/token",e),t.h=ia("https://www.googleapis.com/identitytoolkit/v3/relyingparty/",e),t.i=ia("https://identitytoolkit.googleapis.com/v2/",e))}function ia(t,e){return t=Un(t),e=Un(e.url),t.c=t.a+t.c,Cn(t,e.f),t.a=e.a,Rn(t,e.g),t.toString()}function oa(t,e){e?(t.a["X-Client-Version"]=e,t.g["X-Client-Version"]=e):(delete t.a["X-Client-Version"],delete t.g["X-Client-Version"])}function sa(t,e,n,r,i,o,s){(function(){var t=kr();return!((t=Ar(t)!=_r?null:(t=t.match(/\sChrome\/(\d+)/i))&&2==t.length?parseInt(t[1],10):null)&&30>t||Jt&&ne&&!(9<ne))})()||wr()?t=I(t.u,t):(Ys||(Ys=new be((function(t,e){!function(t,e){((window.gapi||{}).client||{}).request?t():(u[ua]=function(){((window.gapi||{}).client||{}).request?t():e(Error("CORS_UNSUPPORTED"))},function(t,e){xs(t,null,e,void 0)}(qs(At(aa,{onload:ua})),(function(){e(Error("CORS_UNSUPPORTED"))})))}(t,e)}))),t=I(t.o,t)),t(e,n,r,i,o,s)}Xs.prototype.S=function(){return this.b},Xs.prototype.u=function(t,e,n,r,i,o){if(wr()&&(void 0===u.fetch||void 0===u.Headers||void 0===u.Request))throw new A("operation-not-supported-in-this-environment","fetch, Headers and Request native APIs or equivalent Polyfills must be available to support HTTP requests from a Worker environment.");var s=new bs(this.f);if(o){s.g=Math.max(0,o);var a=setTimeout((function(){s.dispatchEvent("timeout")}),o)}In(s,"complete",(function(){a&&clearTimeout(a);var t=null;try{t=JSON.parse(function(t){try{return t.a?t.a.responseText:""}catch(e){return ls(t.b,"Can not get responseText: "+e.message),""}}(this))||null}catch(e){t=null}e&&e(t)})),En(s,"ready",(function(){a&&clearTimeout(a),ze(this)})),En(s,"timeout",(function(){a&&clearTimeout(a),ze(this),e&&e(null)})),function(t,e,n,r,i){if(t.a)throw Error("[goog.net.XhrIo] Object is active with another request="+t.l+"; newUri="+e);n=n?n.toUpperCase():"GET",t.l=e,t.h="",t.P=n,t.G=!1,t.c=!0,t.a=t.O?t.O.a():Bo.a(),t.A=t.O?Xo(t.O):Xo(Bo),t.a.onreadystatechange=I(t.Ub,t);try{ls(t.b,Ps(t,"Opening Xhr")),t.N=!0,t.a.open(n,String(e),!0),t.N=!1}catch(e){return ls(t.b,Ps(t,"Error opening Xhr: "+e.message)),void _s(t,e)}e=r||"";var o=new kn(t.headers);i&&function(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(p(t)||"string"==typeof t)B(t,e,void 0);else for(var n=Sn(t),r=Nn(t),i=r.length,o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}(i,(function(t,e){o.set(e,t)})),i=function(t){t:{for(var e=Ts,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:"string"==typeof t?t.charAt(e):t[e]}(o.Y()),r=u.FormData&&e instanceof u.FormData,!J(Es,n)||i||r||o.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),o.forEach((function(t,e){this.a.setRequestHeader(e,t)}),t),t.m&&(t.a.responseType=t.m),"withCredentials"in t.a&&t.a.withCredentials!==t.R&&(t.a.withCredentials=t.R);try{ks(t),0<t.g&&(t.u=function(t){return Jt&&ie(9)&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(t.a),ls(t.b,Ps(t,"Will abort after "+t.g+"ms if incomplete, xhr2 "+t.u)),t.u?(t.a.timeout=t.g,t.a.ontimeout=I(t.Ma,t)):t.o=_n(t.Ma,t.g,t)),ls(t.b,Ps(t,"Sending request")),t.i=!0,t.a.send(e),t.i=!1}catch(e){ls(t.b,Ps(t,"Send error: "+e.message)),_s(t,e)}}(s,t,n,r,i)};var aa=new gt(It,"https://apis.google.com/js/client.js?onload=%{onload}"),ua="__fcb"+Math.floor(1e6*Math.random()).toString();function ca(t){if("string"!=typeof(t=t.email)||!yr.test(t))throw new A("invalid-email")}function ha(t){"email"in t&&ca(t)}function fa(t){if(!t[Zs]){if(t.mfaPendingCredential)throw new A("multi-factor-auth-required",null,dt(t));throw new A("internal-error")}}function la(t){if(t.phoneNumber||t.temporaryProof){if(!t.phoneNumber||!t.temporaryProof)throw new A("internal-error")}else{if(!t.sessionInfo)throw new A("missing-verification-id");if(!t.code)throw new A("missing-verification-code")}}Xs.prototype.o=function(t,e,n,r,i){var o=this;Ys.then((function(){window.gapi.client.setApiKey(o.c);var s=window.gapi.auth.getToken();window.gapi.auth.setToken(null),window.gapi.client.request({path:t,method:n,body:r,headers:i,authType:"none",callback:function(t){window.gapi.auth.setToken(s),e&&e(t)}})})).s((function(t){e&&e({error:{message:t&&t.message||"CORS_UNSUPPORTED"}})}))},Xs.prototype.yb=function(){return eu(this,Ba,{})},Xs.prototype.Ab=function(t,e){return eu(this,Ga,{idToken:t,email:e})},Xs.prototype.Bb=function(t,e){return eu(this,qa,{idToken:t,password:e})};var pa={displayName:"DISPLAY_NAME",photoUrl:"PHOTO_URL"};function da(t){if(!t.phoneVerificationInfo)throw new A("internal-error");if(!t.phoneVerificationInfo.sessionInfo)throw new A("missing-verification-id");if(!t.phoneVerificationInfo.code)throw new A("missing-verification-code")}function va(t){if(!t.requestUri||!t.sessionId&&!t.postBody&&!t.pendingToken)throw new A("internal-error")}function ya(t,e){return e.oauthIdToken&&e.providerId&&0==e.providerId.indexOf("oidc.")&&!e.pendingToken&&(t.sessionId?e.nonce=t.sessionId:t.postBody&&Qn(t=new Wn(t.postBody),"nonce")&&(e.nonce=t.get("nonce"))),e}function ma(t){var e=null;if(t.needConfirmation?(t.code="account-exists-with-different-credential",e=Jo(t)):"FEDERATED_USER_ID_ALREADY_LINKED"==t.errorMessage?(t.code="credential-already-in-use",e=Jo(t)):"EMAIL_EXISTS"==t.errorMessage?(t.code="email-already-in-use",e=Jo(t)):t.errorMessage&&(e=nu(t.errorMessage)),e)throw e;fa(t)}function ga(t,e){return e.returnIdpCredential=!0,eu(t,Ha,e)}function ba(t,e){return e.returnIdpCredential=!0,eu(t,Wa,e)}function wa(t,e){return e.returnIdpCredential=!0,e.autoCreate=!1,eu(t,Ja,e)}function Ia(t){if(!t.oobCode)throw new A("invalid-action-code")}(t=Xs.prototype).Cb=function(t,e){var n={idToken:t},r=[];return lt(pa,(function(t,i){var o=e[i];null===o?r.push(t):i in e&&(n[i]=o)})),r.length&&(n.deleteAttribute=r),eu(this,Ga,n)},t.ub=function(t,e){return yt(t={requestType:"PASSWORD_RESET",email:t},e),eu(this,Ma,t)},t.vb=function(t,e){return yt(t={requestType:"EMAIL_SIGNIN",email:t},e),eu(this,Ca,t)},t.tb=function(t,e){return yt(t={requestType:"VERIFY_EMAIL",idToken:t},e),eu(this,Ra,t)},t.Db=function(t,e,n){return yt(t={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:t,newEmail:e},n),eu(this,xa,t)},t.eb=function(t){return eu(this,Za,t)},t.mb=function(t,e){return eu(this,ja,{oobCode:t,newPassword:e})},t.Qa=function(t){return eu(this,Ta,{oobCode:t})},t.ib=function(t){return eu(this,Ea,{oobCode:t})};var Ea={endpoint:"setAccountInfo",B:Ia,Z:"email",C:!0},Ta={endpoint:"resetPassword",B:Ia,F:function(t){var e=t.requestType;if(!e||!t.email&&"EMAIL_SIGNIN"!=e&&"VERIFY_AND_CHANGE_EMAIL"!=e)throw new A("internal-error")},C:!0},_a={endpoint:"signupNewUser",B:function(t){if(ca(t),!t.password)throw new A("weak-password")},F:fa,U:!0,C:!0},Aa={endpoint:"createAuthUri",C:!0},Na={endpoint:"deleteAccount",M:["idToken"]},Sa={endpoint:"setAccountInfo",M:["idToken","deleteProvider"],B:function(t){if("array"!=l(t.deleteProvider))throw new A("internal-error")}},ka={endpoint:"emailLinkSignin",M:["email","oobCode"],B:ca,F:fa,U:!0,C:!0},Da={endpoint:"emailLinkSignin",M:["idToken","email","oobCode"],B:ca,F:fa,U:!0},Oa={endpoint:"accounts/mfaEnrollment:finalize",M:["idToken","phoneVerificationInfo"],B:da,F:fa,C:!0,Na:!0},Pa={endpoint:"accounts/mfaSignIn:finalize",M:["mfaPendingCredential","phoneVerificationInfo"],B:da,F:fa,C:!0,Na:!0},La={endpoint:"getAccountInfo"},Ca={endpoint:"getOobConfirmationCode",M:["requestType"],B:function(t){if("EMAIL_SIGNIN"!=t.requestType)throw new A("internal-error");ca(t)},Z:"email",C:!0},Ra={endpoint:"getOobConfirmationCode",M:["idToken","requestType"],B:function(t){if("VERIFY_EMAIL"!=t.requestType)throw new A("internal-error")},Z:"email",C:!0},xa={endpoint:"getOobConfirmationCode",M:["idToken","newEmail","requestType"],B:function(t){if("VERIFY_AND_CHANGE_EMAIL"!=t.requestType)throw new A("internal-error")},Z:"email",C:!0},Ma={endpoint:"getOobConfirmationCode",M:["requestType"],B:function(t){if("PASSWORD_RESET"!=t.requestType)throw new A("internal-error");ca(t)},Z:"email",C:!0},Va={kb:!0,endpoint:"getProjectConfig",Tb:"GET"},Ua={kb:!0,endpoint:"getRecaptchaParam",Tb:"GET",F:function(t){if(!t.recaptchaSiteKey)throw new A("internal-error")}},ja={endpoint:"resetPassword",B:Ia,Z:"email",C:!0},Fa={endpoint:"sendVerificationCode",M:["phoneNumber","recaptchaToken"],Z:"sessionInfo",C:!0},Ga={endpoint:"setAccountInfo",M:["idToken"],B:ha,U:!0},qa={endpoint:"setAccountInfo",M:["idToken"],B:function(t){if(ha(t),!t.password)throw new A("weak-password")},F:fa,U:!0},Ba={endpoint:"signupNewUser",F:fa,U:!0,C:!0},za={endpoint:"accounts/mfaEnrollment:start",M:["idToken","phoneEnrollmentInfo"],B:function(t){if(!t.phoneEnrollmentInfo)throw new A("internal-error");if(!t.phoneEnrollmentInfo.phoneNumber)throw new A("missing-phone-number");if(!t.phoneEnrollmentInfo.recaptchaToken)throw new A("missing-app-credential")},F:function(t){if(!t.phoneSessionInfo||!t.phoneSessionInfo.sessionInfo)throw new A("internal-error")},C:!0,Na:!0},Ka={endpoint:"accounts/mfaSignIn:start",M:["mfaPendingCredential","mfaEnrollmentId","phoneSignInInfo"],B:function(t){if(!t.phoneSignInInfo||!t.phoneSignInInfo.recaptchaToken)throw new A("missing-app-credential")},F:function(t){if(!t.phoneResponseInfo||!t.phoneResponseInfo.sessionInfo)throw new A("internal-error")},C:!0,Na:!0},Ha={endpoint:"verifyAssertion",B:va,Xa:ya,F:ma,U:!0,C:!0},Ja={endpoint:"verifyAssertion",B:va,Xa:ya,F:function(t){if(t.errorMessage&&"USER_NOT_FOUND"==t.errorMessage)throw new A("user-not-found");if(t.errorMessage)throw nu(t.errorMessage);fa(t)},U:!0,C:!0},Wa={endpoint:"verifyAssertion",B:function(t){if(va(t),!t.idToken)throw new A("internal-error")},Xa:ya,F:ma,U:!0},Xa={endpoint:"verifyCustomToken",B:function(t){if(!t.token)throw new A("invalid-custom-token")},F:fa,U:!0,C:!0},Ya={endpoint:"verifyPassword",B:function(t){if(ca(t),!t.password)throw new A("wrong-password")},F:fa,U:!0,C:!0},Za={endpoint:"verifyPhoneNumber",B:la,F:fa,C:!0},Qa={endpoint:"verifyPhoneNumber",B:function(t){if(!t.idToken)throw new A("internal-error");la(t)},F:function(t){if(t.temporaryProof)throw t.code="credential-already-in-use",Jo(t);fa(t)}},$a={Gb:{USER_NOT_FOUND:"user-not-found"},endpoint:"verifyPhoneNumber",B:la,F:fa,C:!0},tu={endpoint:"accounts/mfaEnrollment:withdraw",M:["idToken","mfaEnrollmentId"],F:function(t){if(!!t[Zs]^!!t.refreshToken)throw new A("internal-error")},C:!0,Na:!0};function eu(t,e,n){if(!function(t,e){if(!e||!e.length)return!0;if(!t)return!1;for(var n=0;n<e.length;n++){var r=t[e[n]];if(null==r||""===r)return!1}return!0}(n,e.M))return Se(new A("internal-error"));var r,i=!!e.Na,o=e.Tb||"POST";return Ne(n).then(e.B).then((function(){return e.U&&(n.returnSecureToken=!0),e.C&&t.b&&void 0===n.tenantId&&(n.tenantId=t.b),function(t,e,n,r,i,o,s){var a=Un(e+n);Mn(a,"key",t.c),s&&Mn(a,"cb",T().toString());var u="GET"==r;if(u)for(var c in i)i.hasOwnProperty(c)&&Mn(a,c,i[c]);return new be((function(e,n){sa(t,a.toString(),(function(t){t?t.error?n(ru(t,o||{})):e(t):n(new A("network-request-failed"))}),r,u?void 0:nr(Mr(i)),t.a,t.m.get())}))}(t,i?t.i:t.h,e.endpoint,o,n,e.Gb,e.kb||!1)})).then((function(t){return r=t,e.Xa?e.Xa(n,r):r})).then(e.F).then((function(){if(!e.Z)return r;if(!(e.Z in r))throw new A("internal-error");return r[e.Z]}))}function nu(t){return ru({error:{errors:[{message:t}],code:400,message:t}})}function ru(t,e){var n=(t.error&&t.error.errors&&t.error.errors[0]||{}).reason||"",r={keyInvalid:"invalid-api-key",ipRefererBlocked:"app-not-authorized"};if(n=r[n]?new A(r[n]):null)return n;for(var i in n=t.error&&t.error.message||"",yt(r={INVALID_CUSTOM_TOKEN:"invalid-custom-token",CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_EMAIL:"invalid-email",INVALID_PASSWORD:"wrong-password",USER_DISABLED:"user-disabled",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_OR_INVALID_NONCE:"missing-or-invalid-nonce",INVALID_MESSAGE_PAYLOAD:"invalid-message-payload",INVALID_RECIPIENT_EMAIL:"invalid-recipient-email",INVALID_SENDER:"invalid-sender",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",INVALID_PROVIDER_ID:"invalid-provider-id",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",CORS_UNSUPPORTED:"cors-unsupported",DYNAMIC_LINK_NOT_ACTIVATED:"dynamic-link-not-activated",INVALID_APP_ID:"invalid-app-id",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",WEAK_PASSWORD:"weak-password",OPERATION_NOT_ALLOWED:"operation-not-allowed",USER_CANCELLED:"user-cancelled",CAPTCHA_CHECK_FAILED:"captcha-check-failed",INVALID_APP_CREDENTIAL:"invalid-app-credential",INVALID_CODE:"invalid-verification-code",INVALID_PHONE_NUMBER:"invalid-phone-number",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_APP_CREDENTIAL:"missing-app-credential",MISSING_CODE:"missing-verification-code",MISSING_PHONE_NUMBER:"missing-phone-number",MISSING_SESSION_INFO:"missing-verification-id",QUOTA_EXCEEDED:"quota-exceeded",SESSION_EXPIRED:"code-expired",REJECTED_CREDENTIAL:"rejected-credential",INVALID_CONTINUE_URI:"invalid-continue-uri",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",MISSING_IOS_BUNDLE_ID:"missing-ios-bundle-id",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_DYNAMIC_LINK_DOMAIN:"invalid-dynamic-link-domain",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",INVALID_CERT_HASH:"invalid-cert-hash",UNSUPPORTED_TENANT_OPERATION:"unsupported-tenant-operation",INVALID_TENANT_ID:"invalid-tenant-id",TENANT_ID_MISMATCH:"tenant-id-mismatch",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",EMAIL_CHANGE_NEEDS_VERIFICATION:"email-change-needs-verification",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",UNSUPPORTED_FIRST_FACTOR:"unsupported-first-factor",UNVERIFIED_EMAIL:"unverified-email"},e||{}),e=(e=n.match(/^[^\s]+\s*:\s*([\s\S]*)$/))&&1<e.length?e[1]:void 0,r)if(0===n.indexOf(i))return new A(r[i],e);return!e&&t&&(e=xr(t)),new A("internal-error",e)}function iu(t){this.b=t,this.a=null,this.qb=function(t){return(uu||(uu=new be((function(t,e){function n(){Fr(),Dr("gapi.load")("gapi.iframes",{callback:t,ontimeout:function(){Fr(),e(Error("Network Error"))},timeout:su.get()})}if(Dr("gapi.iframes.Iframe"))t();else if(Dr("gapi.load"))n();else{var r="__iframefcb"+Math.floor(1e6*Math.random()).toString();u[r]=function(){Dr("gapi.load")?n():e(Error("Network Error"))},Ne(qs(r=At(ou,{onload:r}))).s((function(){e(Error("Network Error"))}))}})).s((function(t){throw uu=null,t})))).then((function(){return new be((function(e,n){Dr("gapi.iframes.getContext")().open({where:document.body,url:t.b,messageHandlersFilter:Dr("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"),attributes:{style:{position:"absolute",top:"-100px",width:"1px",height:"1px"}},dontclear:!0},(function(r){function i(){clearTimeout(o),e()}t.a=r,t.a.restyle({setHideOnLeave:!1});var o=setTimeout((function(){n(Error("Network Error"))}),au.get());r.ping(i).then(i,(function(){n(Error("Network Error"))}))}))}))}))}(this)}var ou=new gt(It,"https://apis.google.com/js/api.js?onload=%{onload}"),su=new Gr(3e4,6e4),au=new Gr(5e3,15e3),uu=null;function cu(t,e,n,r){this.l=t,this.h=e,this.i=n,this.g=r,this.f=null,t=this.g?jn((t=Un(this.g.url)).f,t.a,t.g,"/emulator/auth/iframe"):jn("https",this.l,null,"/__/auth/iframe"),this.a=t,Mn(this.a,"apiKey",this.h),Mn(this.a,"appName",this.i),this.b=null,this.c=[]}function hu(t,e,n,r,i,o){this.u=t,this.o=e,this.c=n,this.v=r,this.m=o,this.i=this.g=this.l=null,this.a=i,this.h=this.f=null}function fu(t){try{return r.Z.app(t).auth().Ga()}catch(t){return[]}}function lu(t,e,n,r,i,o){this.o=t,this.g=e,this.b=n,this.f=o,this.c=r||null,this.i=i||null,this.l=this.u=this.A=null,this.h=[],this.v=this.a=null}function pu(t){var e=cr();return function(t){return eu(t,Va,{}).then((function(t){return t.authorizedDomains||[]}))}(t).then((function(t){t:{var n=Un(e),r=n.f;n=n.a;for(var i=0;i<t.length;i++){var o=t[i],s=n,a=r;if(0==o.indexOf("chrome-extension://")?s=Un(o).a==s&&"chrome-extension"==a:"http"!=a&&"https"!=a?s=!1:vr.test(o)?s=s==o:(o=o.split(".").join("\\."),s=new RegExp("^(.+\\."+o+"|"+o+")$","i").test(s)),s){t=!0;break t}}t=!1}if(!t)throw new Ko(cr())}))}function du(t){return t.v||(t.v=mr().then((function(){if(!t.u){var e=t.c,n=t.i,r=fu(t.b),i=new cu(t.o,t.g,t.b,t.f);i.f=e,i.b=n,i.c=Z(r||[]),t.u=i.toString()}t.m=new iu(t.u),function(t){if(!t.m)throw Error("IfcHandler must be initialized!");!function(t,e){t.qb.then((function(){t.a.register("authEvent",e,Dr("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))}))}(t.m,(function(e){var n={};if(e&&e.authEvent){var r=!1;for(e=Go(e.authEvent),n=0;n<t.h.length;n++)r=t.h[n](e)||r;return(n={}).status=r?"ACK":"ERROR",Ne(n)}return n.status="ERROR",Ne(n)}))}(t)}))),t.v}function vu(t){return t.l||(t.A=t.c?Sr(t.c,fu(t.b)):null,t.l=new Xs(t.g,P(t.i),t.A),t.f&&ra(t.l,t.f)),t.l}function yu(t,e,n,r,i,o,s,a,u,c,h,f){return(t=new hu(t,e,n,r,i,f)).l=o,t.g=s,t.i=a,t.b=dt(u||null),t.f=c,t.xb(h).toString()}function mu(t){if(this.a=t||r.Z.INTERNAL.reactNative&&r.Z.INTERNAL.reactNative.AsyncStorage,!this.a)throw new A("internal-error","The React Native compatibility library was not found.");this.type="asyncStorage"}function gu(t){this.b=t,this.a={},this.f=I(this.c,this)}cu.prototype.toString=function(){return this.f?Mn(this.a,"v",this.f):Zn(this.a.b,"v"),this.b?Mn(this.a,"eid",this.b):Zn(this.a.b,"eid"),this.c.length?Mn(this.a,"fw",this.c.join(",")):Zn(this.a.b,"fw"),this.a.toString()},hu.prototype.xb=function(t){return this.h=t,this},hu.prototype.toString=function(){if(this.m){var t=Un(this.m.url);t=jn(t.f,t.a,t.g,"/emulator/auth/handler")}else t=jn("https",this.u,null,"/__/auth/handler");if(Mn(t,"apiKey",this.o),Mn(t,"appName",this.c),Mn(t,"authType",this.v),this.a.isOAuthProvider){var e=this.a;try{var n=r.Z.app(this.c).auth().ka()}catch(t){n=null}for(var i in e.nb=n,Mn(t,"providerId",this.a.providerId),e=Mr((n=this.a).Hb))e[i]=e[i].toString();i=n.Pc,e=dt(e);for(var o=0;o<i.length;o++){var s=i[o];s in e&&delete e[s]}n.ob&&n.nb&&!e[n.ob]&&(e[n.ob]=n.nb),pt(e)||Mn(t,"customParameters",xr(e))}if("function"==typeof this.a.Pb&&(n=this.a.Pb()).length&&Mn(t,"scopes",n.join(",")),this.l?Mn(t,"redirectUrl",this.l):Zn(t.b,"redirectUrl"),this.g?Mn(t,"eventId",this.g):Zn(t.b,"eventId"),this.i?Mn(t,"v",this.i):Zn(t.b,"v"),this.b)for(var a in this.b)this.b.hasOwnProperty(a)&&!Vn(t,a)&&Mn(t,a,this.b[a]);return this.h?Mn(t,"tid",this.h):Zn(t.b,"tid"),this.f?Mn(t,"eid",this.f):Zn(t.b,"eid"),(a=fu(this.c)).length&&Mn(t,"fw",a.join(",")),t.toString()},(t=lu.prototype).Nb=function(t,e,n){var r=new A("popup-closed-by-user"),i=new A("web-storage-unsupported"),o=this,s=!1;return this.la().then((function(){(function(t){var e={type:"webStorageSupport"};return du(t).then((function(){return function(t,e){return t.qb.then((function(){return new be((function(n){t.a.send(e.type,e,n,Dr("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))}))}))}(t.m,e)})).then((function(t){if(t&&t.length&&void 0!==t[0].webStorageSupport)return t[0].webStorageSupport;throw Error()}))})(o).then((function(n){n||(t&&pr(t),e(i),s=!0)}))})).s((function(){})).then((function(){if(!s)return function(t){return new be((function(e){return function n(){An(2e3).then((function(){if(t&&!t.closed)return n();e()}))}()}))}(t)})).then((function(){if(!s)return An(n).then((function(){e(r)}))}))},t.Wb=function(){var t=kr();return!Rr(t)&&!jr(t)},t.Sb=function(){return!1},t.Lb=function(t,e,n,r,i,o,s,a){if(!t)return Se(new A("popup-blocked"));if(s&&!Rr())return this.la().s((function(e){pr(t),i(e)})),r(),Ne();this.a||(this.a=pu(vu(this)));var u=this;return this.a.then((function(){var e=u.la().s((function(e){throw pr(t),i(e),e}));return r(),e})).then((function(){jo(n),s||hr(yu(u.o,u.g,u.b,e,n,null,o,u.c,void 0,u.i,a,u.f),t)})).s((function(t){throw"auth/network-request-failed"==t.code&&(u.a=null),t}))},t.Mb=function(t,e,n,r){this.a||(this.a=pu(vu(this)));var i=this;return this.a.then((function(){jo(e),hr(yu(i.o,i.g,i.b,t,e,cr(),n,i.c,void 0,i.i,r,i.f))})).s((function(t){throw"auth/network-request-failed"==t.code&&(i.a=null),t}))},t.la=function(){var t=this;return du(this).then((function(){return t.m.qb})).s((function(){throw t.a=null,new A("network-request-failed")}))},t.Zb=function(){return!0},t.Ea=function(t){this.h.push(t)},t.Ra=function(t){X(this.h,(function(e){return e==t}))},(t=mu.prototype).get=function(t){return Ne(this.a.getItem(t)).then((function(t){return t&&Vr(t)}))},t.set=function(t,e){return Ne(this.a.setItem(t,xr(e)))},t.T=function(t){return Ne(this.a.removeItem(t))},t.ca=function(){},t.ia=function(){};var bu,wu=[];function Iu(t,e,n){pt(t.a)&&t.b.addEventListener("message",t.f),void 0===t.a[e]&&(t.a[e]=[]),t.a[e].push(n)}function Eu(t){this.a=t}function Tu(t){this.c=t,this.b=!1,this.a=[]}function _u(t,e,n,r){var i,o,s,a,u=n||{},c=null;if(t.b)return Se(Error("connection_unavailable"));var h=r?800:50,f="undefined"!=typeof MessageChannel?new MessageChannel:null;return new be((function(n,r){f?(i=Math.floor(Math.random()*Math.pow(10,20)).toString(),f.port1.start(),s=setTimeout((function(){r(Error("unsupported_event"))}),h),c={messageChannel:f,onMessage:o=function(t){t.data.eventId===i&&("ack"===t.data.status?(clearTimeout(s),a=setTimeout((function(){r(Error("timeout"))}),3e3)):"done"===t.data.status?(clearTimeout(a),void 0!==t.data.response?n(t.data.response):r(Error("unknown_error"))):(clearTimeout(s),clearTimeout(a),r(Error("invalid_response"))))}},t.a.push(c),f.port1.addEventListener("message",o),t.c.postMessage({eventType:e,eventId:i,data:u},[f.port2])):r(Error("connection_unavailable"))})).then((function(e){return Au(t,c),e})).s((function(e){throw Au(t,c),e}))}function Au(t,e){if(e){var n=e.messageChannel,r=e.onMessage;n&&(n.port1.removeEventListener("message",r),n.port1.close()),X(t.a,(function(t){return t==e}))}}function Nu(){if(!Du())throw new A("web-storage-unsupported");this.c={},this.a=[],this.b=0,this.m=u.indexedDB,this.type="indexedDB",this.g=this.l=this.f=this.i=null,this.o=!1,this.h=null;var t=this;wr()&&self?(this.l=function(){var t=wr()?self:null;if(B(wu,(function(n){n.b==t&&(e=n)})),!e){var e=new gu(t);wu.push(e)}return e}(),Iu(this.l,"keyChanged",(function(e,n){return Ru(t).then((function(e){return 0<e.length&&B(t.a,(function(t){t(e)})),{keyProcessed:J(e,n.key)}}))})),Iu(this.l,"ping",(function(){return Ne(["keyChanged"])}))):function(){var t=u.navigator;return t&&t.serviceWorker?Ne().then((function(){return t.serviceWorker.ready})).then((function(t){return t.active||null})).s((function(){return null})):Ne(null)}().then((function(e){(t.h=e)&&(t.g=new Tu(new Eu(e)),_u(t.g,"ping",null,!0).then((function(e){e[0].fulfilled&&J(e[0].value,"keyChanged")&&(t.o=!0)})).s((function(){})))}))}function Su(t){return new be((function(e,n){var r=t.m.open("firebaseLocalStorageDb",1);r.onerror=function(t){try{t.preventDefault()}catch(t){}n(Error(t.target.error))},r.onupgradeneeded=function(t){t=t.target.result;try{t.createObjectStore("firebaseLocalStorage",{keyPath:"fbase_key"})}catch(t){n(t)}},r.onsuccess=function(r){(r=r.target.result).objectStoreNames.contains("firebaseLocalStorage")?e(r):function(t){return new be((function(e,n){var r=t.m.deleteDatabase("firebaseLocalStorageDb");r.onsuccess=function(){e()},r.onerror=function(t){n(Error(t.target.error))}}))}(t).then((function(){return Su(t)})).then((function(t){e(t)})).s((function(t){n(t)}))}}))}function ku(t){return t.v||(t.v=Su(t)),t.v}function Du(){try{return!!u.indexedDB}catch(t){return!1}}function Ou(t){return t.objectStore("firebaseLocalStorage")}function Pu(t,e){return t.transaction(["firebaseLocalStorage"],e?"readwrite":"readonly")}function Lu(t){return new be((function(e,n){t.onsuccess=function(t){t&&t.target?e(t.target.result):e()},t.onerror=function(t){n(t.target.error)}}))}function Cu(t,e){return t.g&&t.h&&function(){var t=u.navigator;return t&&t.serviceWorker&&t.serviceWorker.controller||null}()===t.h?_u(t.g,"keyChanged",{key:e},t.o).then((function(){})).s((function(){})):Ne()}function Ru(t){return ku(t).then((function(t){var e=Ou(Pu(t,!1));return e.getAll?Lu(e.getAll()):new be((function(t,n){var r=[],i=e.openCursor();i.onsuccess=function(e){(e=e.target.result)?(r.push(e.value),e.continue()):t(r)},i.onerror=function(t){n(t.target.error)}}))})).then((function(e){var n={},r=[];if(0==t.b){for(r=0;r<e.length;r++)n[e[r].fbase_key]=e[r].value;r=fr(t.c,n),t.c=n}return r}))}function xu(t){t.i&&t.i.cancel("STOP_EVENT"),t.f&&(clearTimeout(t.f),t.f=null)}function Mu(t){var e=this,n=null;this.a=[],this.type="indexedDB",this.c=t,this.b=Ne().then((function(){if(Du()){var t=Ur(),r="__sak"+t;return bu||(bu=new Nu),(n=bu).set(r,t).then((function(){return n.get(r)})).then((function(e){if(e!==t)throw Error("indexedDB not supported!");return n.T(r)})).then((function(){return n})).s((function(){return e.c}))}return e.c})).then((function(t){return e.type=t.type,t.ca((function(t){B(e.a,(function(e){e(t)}))})),t}))}function Vu(){this.a={},this.type="inMemory"}function Uu(){if(!function(){var t="Node"==Ir();if(!(t=ju()||t&&r.Z.INTERNAL.node&&r.Z.INTERNAL.node.localStorage))return!1;try{return t.setItem("__sak","1"),t.removeItem("__sak"),!0}catch(t){return!1}}()){if("Node"==Ir())throw new A("internal-error","The LocalStorage compatibility library was not found.");throw new A("web-storage-unsupported")}this.a=ju()||r.Z.INTERNAL.node.localStorage,this.type="localStorage"}function ju(){try{var t=u.localStorage,e=Ur();return t&&(t.setItem(e,"1"),t.removeItem(e)),t}catch(t){return null}}function Fu(){this.type="nullStorage"}function Gu(){if(!function(){var t="Node"==Ir();if(!(t=qu()||t&&r.Z.INTERNAL.node&&r.Z.INTERNAL.node.sessionStorage))return!1;try{return t.setItem("__sak","1"),t.removeItem("__sak"),!0}catch(t){return!1}}()){if("Node"==Ir())throw new A("internal-error","The SessionStorage compatibility library was not found.");throw new A("web-storage-unsupported")}this.a=qu()||r.Z.INTERNAL.node.sessionStorage,this.type="sessionStorage"}function qu(){try{var t=u.sessionStorage,e=Ur();return t&&(t.setItem(e,"1"),t.removeItem(e)),t}catch(t){return null}}function Bu(){var t={};t.Browser=Hu,t.Node=Ju,t.ReactNative=Wu,t.Worker=Xu,this.a=t[Ir()]}gu.prototype.c=function(t){var e=t.data.eventType,n=t.data.eventId,r=this.a[e];if(r&&0<r.length){t.ports[0].postMessage({status:"ack",eventId:n,eventType:e,response:null});var i=[];B(r,(function(e){i.push(Ne().then((function(){return e(t.origin,t.data.data)})))})),De(i).then((function(r){var i=[];B(r,(function(t){i.push({fulfilled:t.Ob,value:t.value,reason:t.reason?t.reason.message:void 0})})),B(i,(function(t){for(var e in t)void 0===t[e]&&delete t[e]})),t.ports[0].postMessage({status:"done",eventId:n,eventType:e,response:i})}))}},Eu.prototype.postMessage=function(t,e){this.a.postMessage(t,e)},Tu.prototype.close=function(){for(;0<this.a.length;)Au(this,this.a[0]);this.b=!0},(t=Nu.prototype).set=function(t,e){var n,r=!1,i=this;return ku(this).then((function(e){return Lu((e=Ou(Pu(n=e,!0))).get(t))})).then((function(o){var s=Ou(Pu(n,!0));return o?(o.value=e,Lu(s.put(o))):(i.b++,r=!0,(o={}).fbase_key=t,o.value=e,Lu(s.add(o)))})).then((function(){return i.c[t]=e,Cu(i,t)})).na((function(){r&&i.b--}))},t.get=function(t){return ku(this).then((function(e){return Lu(Ou(Pu(e,!1)).get(t))})).then((function(t){return t&&t.value}))},t.T=function(t){var e=!1,n=this;return ku(this).then((function(r){return e=!0,n.b++,Lu(Ou(Pu(r,!0)).delete(t))})).then((function(){return delete n.c[t],Cu(n,t)})).na((function(){e&&n.b--}))},t.ca=function(t){0==this.a.length&&function(t){xu(t),function e(){t.f=setTimeout((function(){t.i=Ru(t).then((function(e){0<e.length&&B(t.a,(function(t){t(e)}))})).then((function(){e()})).s((function(t){"STOP_EVENT"!=t.message&&e()}))}),800)}()}(this),this.a.push(t)},t.ia=function(t){X(this.a,(function(e){return e==t})),0==this.a.length&&xu(this)},(t=Mu.prototype).get=function(t){return this.b.then((function(e){return e.get(t)}))},t.set=function(t,e){return this.b.then((function(n){return n.set(t,e)}))},t.T=function(t){return this.b.then((function(e){return e.T(t)}))},t.ca=function(t){this.a.push(t)},t.ia=function(t){X(this.a,(function(e){return e==t}))},(t=Vu.prototype).get=function(t){return Ne(this.a[t])},t.set=function(t,e){return this.a[t]=e,Ne()},t.T=function(t){return delete this.a[t],Ne()},t.ca=function(){},t.ia=function(){},(t=Uu.prototype).get=function(t){var e=this;return Ne().then((function(){return Vr(e.a.getItem(t))}))},t.set=function(t,e){var n=this;return Ne().then((function(){var r=xr(e);null===r?n.T(t):n.a.setItem(t,r)}))},t.T=function(t){var e=this;return Ne().then((function(){e.a.removeItem(t)}))},t.ca=function(t){u.window&&un(u.window,"storage",t)},t.ia=function(t){u.window&&fn(u.window,"storage",t)},(t=Fu.prototype).get=function(){return Ne(null)},t.set=function(){return Ne()},t.T=function(){return Ne()},t.ca=function(){},t.ia=function(){},(t=Gu.prototype).get=function(t){var e=this;return Ne().then((function(){return Vr(e.a.getItem(t))}))},t.set=function(t,e){var n=this;return Ne().then((function(){var r=xr(e);null===r?n.T(t):n.a.setItem(t,r)}))},t.T=function(t){var e=this;return Ne().then((function(){e.a.removeItem(t)}))},t.ca=function(){},t.ia=function(){};var zu,Ku,Hu={D:Uu,ab:Gu},Ju={D:Uu,ab:Gu},Wu={D:mu,ab:Fu},Xu={D:Uu,ab:Fu},Yu={qd:"local",NONE:"none",sd:"session"};function Zu(){var t=!(jr(kr())||!br()),e=Rr(),n=Or();this.v=t,this.h=e,this.l=n,this.a={},zu||(zu=new Bu),t=zu;try{this.g=!ur()&&Kr()||!u.indexedDB?new t.a.D:new Mu(wr()?new Vu:new t.a.D)}catch(t){this.g=new Vu,this.h=!0}try{this.i=new t.a.ab}catch(t){this.i=new Vu}this.m=new Vu,this.f=I(this.Xb,this),this.b={}}function Qu(){return Ku||(Ku=new Zu),Ku}function $u(t,e){switch(e){case"session":return t.i;case"none":return t.m;default:return t.g}}function tc(t,e){return"firebase:"+t.name+(e?":"+e:"")}function ec(t,e,n){return n=tc(e,n),"local"==e.D&&(t.b[n]=null),$u(t,e.D).T(n)}function nc(t){t.c&&(clearInterval(t.c),t.c=null)}function rc(t){this.a=t,this.b=Qu()}(t=Zu.prototype).get=function(t,e){return $u(this,t.D).get(tc(t,e))},t.set=function(t,e,n){var r=tc(t,n),i=this,o=$u(this,t.D);return o.set(r,e).then((function(){return o.get(r)})).then((function(e){"local"==t.D&&(i.b[r]=e)}))},t.addListener=function(t,e,n){t=tc(t,e),this.l&&(this.b[t]=u.localStorage.getItem(t)),pt(this.a)&&($u(this,"local").ca(this.f),this.h||(ur()||!Kr())&&u.indexedDB||!this.l||function(t){nc(t),t.c=setInterval((function(){for(var e in t.a){var n=u.localStorage.getItem(e),r=t.b[e];n!=r&&(t.b[e]=n,n=new Ye({type:"storage",key:e,target:window,oldValue:r,newValue:n,a:!0}),t.Xb(n))}}),1e3)}(this)),this.a[t]||(this.a[t]=[]),this.a[t].push(n)},t.removeListener=function(t,e,n){t=tc(t,e),this.a[t]&&(X(this.a[t],(function(t){return t==n})),0==this.a[t].length&&delete this.a[t]),pt(this.a)&&($u(this,"local").ia(this.f),nc(this))},t.Xb=function(t){if(t&&t.g){var e=t.a.key;if(null==e)for(var n in this.a){var r=this.b[n];void 0===r&&(r=null);var i=u.localStorage.getItem(n);i!==r&&(this.b[n]=i,this.lb(n))}else if(0==e.indexOf("firebase:")&&this.a[e]){if(void 0!==t.a.a?$u(this,"local").ia(this.f):nc(this),this.v)if(n=u.localStorage.getItem(e),(r=t.a.newValue)!==n)null!==r?u.localStorage.setItem(e,r):u.localStorage.removeItem(e);else if(this.b[e]===r&&void 0===t.a.a)return;var o=this;n=function(){void 0===t.a.a&&o.b[e]===u.localStorage.getItem(e)||(o.b[e]=u.localStorage.getItem(e),o.lb(e))},Jt&&ne&&10==ne&&u.localStorage.getItem(e)!==t.a.newValue&&t.a.newValue!==t.a.oldValue?setTimeout(n,10):n()}}else B(t,I(this.lb,this))},t.lb=function(t){this.a[t]&&B(this.a[t],(function(t){t()}))};var ic,oc={name:"authEvent",D:"local"};function sc(){this.a=Qu()}function ac(t,e){this.b=uc,this.f=u.Uint8Array?new Uint8Array(this.b):Array(this.b),this.g=this.c=0,this.a=[],this.i=t,this.h=e,this.l=u.Int32Array?new Int32Array(64):Array(64),void 0===ic&&(ic=u.Int32Array?new Int32Array(vc):vc),this.reset()}_(ac,(function(){this.b=-1}));for(var uc=64,cc=uc-1,hc=[],fc=0;fc<cc;fc++)hc[fc]=0;var lc=Y(128,hc);function pc(t){for(var e=t.f,n=t.l,r=0,i=0;i<e.length;)n[r++]=e[i]<<24|e[i+1]<<16|e[i+2]<<8|e[i+3],i=4*r;for(e=16;64>e;e++){i=0|n[e-15],r=0|n[e-2];var o=(0|n[e-16])+((i>>>7|i<<25)^(i>>>18|i<<14)^i>>>3)|0,s=(0|n[e-7])+((r>>>17|r<<15)^(r>>>19|r<<13)^r>>>10)|0;n[e]=o+s|0}r=0|t.a[0],i=0|t.a[1];var a=0|t.a[2],u=0|t.a[3],c=0|t.a[4],h=0|t.a[5],f=0|t.a[6];for(o=0|t.a[7],e=0;64>e;e++){var l=((r>>>2|r<<30)^(r>>>13|r<<19)^(r>>>22|r<<10))+(r&i^r&a^i&a)|0;s=(o=o+((c>>>6|c<<26)^(c>>>11|c<<21)^(c>>>25|c<<7))|0)+((s=(s=c&h^~c&f)+(0|ic[e])|0)+(0|n[e])|0)|0,o=f,f=h,h=c,c=u+s|0,u=a,a=i,i=r,r=s+l|0}t.a[0]=t.a[0]+r|0,t.a[1]=t.a[1]+i|0,t.a[2]=t.a[2]+a|0,t.a[3]=t.a[3]+u|0,t.a[4]=t.a[4]+c|0,t.a[5]=t.a[5]+h|0,t.a[6]=t.a[6]+f|0,t.a[7]=t.a[7]+o|0}function dc(t,e,n){void 0===n&&(n=e.length);var r=0,i=t.c;if("string"==typeof e)for(;r<n;)t.f[i++]=e.charCodeAt(r++),i==t.b&&(pc(t),i=0);else{if(!p(e))throw Error("message must be string or array");for(;r<n;){var o=e[r++];if(!("number"==typeof o&&0<=o&&255>=o&&o==(0|o)))throw Error("message must be a byte array");t.f[i++]=o,i==t.b&&(pc(t),i=0)}}t.c=i,t.g+=n}ac.prototype.reset=function(){this.g=this.c=0,this.a=u.Int32Array?new Int32Array(this.h):Z(this.h)};var vc=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function yc(){ac.call(this,8,mc)}_(yc,ac);var mc=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225];function gc(t,e,n,r,i,o){this.m=t,this.i=e,this.l=n,this.v=r||null,this.u=i||null,this.o=o,this.h=e+":"+n,this.A=new sc,this.g=new rc(this.h),this.f=null,this.b=[],this.a=this.c=null}function bc(t){return new A("invalid-cordova-configuration",t)}function wc(t,e){for(var n=0;n<t.b.length;n++)try{t.b[n](e)}catch(t){}}function Ic(t){return t.f||(t.f=t.la().then((function(){return new be((function(e){t.Ea((function n(r){return e(r),t.Ra(n),!1})),function(t){function e(e){r=!0,i&&i.cancel(),Ec(t).then((function(r){var i=n;if(r&&e&&e.url){var o=null;-1!=(i=io(e.url)).indexOf("/__/auth/callback")&&(o=(o="object"==typeof(o=Vr(Vn(o=Un(i),"firebaseError")||null))?N(o):null)?new Fo(r.c,r.b,null,null,o,null,r.S()):new Fo(r.c,r.b,i,r.f,null,null,r.S())),i=o||n}wc(t,i)}))}var n=new Fo("unknown",null,null,null,new A("no-auth-event")),r=!1,i=An(500).then((function(){return Ec(t).then((function(){r||wc(t,n)}))})),o=u.handleOpenURL;u.handleOpenURL=function(t){if(0==t.toLowerCase().indexOf(Dr("BuildInfo.packageName",u).toLowerCase()+"://")&&e({url:t}),"function"==typeof o)try{o(t)}catch(t){console.error(t)}},zo||(zo=new qo),function(t){var e=zo;e.a.push(t),e.b||(e.b=function(t){for(var n=0;n<e.a.length;n++)e.a[n](t)},"function"==typeof(t=Dr("universalLinks.subscribe",u))&&t(null,e.b))}(e)}(t)}))}))),t.f}function Ec(t){var e=null;return function(t){return t.b.get(oc,t.a).then((function(t){return Go(t)}))}(t.g).then((function(n){return e=n,ec((n=t.g).b,oc,n.a)})).then((function(){return e}))}function Tc(t){this.a=t,this.b=Qu()}(t=gc.prototype).la=function(){return this.Ia?this.Ia:this.Ia=(gr(void 0)?mr().then((function(){return new be((function(t,e){var n=u.document,r=setTimeout((function(){e(Error("Cordova framework is not ready."))}),1e3);n.addEventListener("deviceready",(function(){clearTimeout(r),t()}),!1)}))})):Se(Error("Cordova must run in an Android or iOS file scheme."))).then((function(){if("function"!=typeof Dr("universalLinks.subscribe",u))throw bc("cordova-universal-links-plugin-fix is not installed");if(void 0===Dr("BuildInfo.packageName",u))throw bc("cordova-plugin-buildinfo is not installed");if("function"!=typeof Dr("cordova.plugins.browsertab.openUrl",u))throw bc("cordova-plugin-browsertab is not installed");if("function"!=typeof Dr("cordova.InAppBrowser.open",u))throw bc("cordova-plugin-inappbrowser is not installed")}),(function(){throw new A("cordova-not-ready")}))},t.Nb=function(t,e){return e(new A("operation-not-supported-in-this-environment")),Ne()},t.Lb=function(){return Se(new A("operation-not-supported-in-this-environment"))},t.Zb=function(){return!1},t.Wb=function(){return!0},t.Sb=function(){return!0},t.Mb=function(t,e,n,r){if(this.c)return Se(new A("redirect-operation-pending"));var i=this,o=u.document,s=null,a=null,c=null,h=null;return this.c=Ne().then((function(){return jo(e),Ic(i)})).then((function(){return function(t,e,n,r,i){var o=function(){for(var t=20,e=[];0<t;)e.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),t--;return e.join("")}(),s=new Fo(e,r,null,o,new A("no-auth-event"),null,i),a=Dr("BuildInfo.packageName",u);if("string"!=typeof a)throw new A("invalid-cordova-configuration");var c=Dr("BuildInfo.displayName",u),h={};if(kr().toLowerCase().match(/iphone|ipad|ipod/))h.ibi=a;else{if(!kr().toLowerCase().match(/android/))return Se(new A("operation-not-supported-in-this-environment"));h.apn=a}c&&(h.appDisplayName=c),o=function(t){var e=new yc;dc(e,t),t=[];var n=8*e.g;56>e.c?dc(e,lc,56-e.c):dc(e,lc,e.b-(e.c-56));for(var r=63;56<=r;r--)e.f[r]=255&n,n/=256;for(pc(e),r=n=0;r<e.i;r++)for(var i=24;0<=i;i-=8)t[n++]=e.a[r]>>i&255;return function(t){return K(t,(function(t){return 1<(t=t.toString(16)).length?t:"0"+t})).join("")}(t)}(o),h.sessionId=o;var f=yu(t.m,t.i,t.l,e,n,null,r,t.v,h,t.u,i,t.o);return t.la().then((function(){var e=t.h;return t.A.a.set(oc,s.w(),e)})).then((function(){var e=Dr("cordova.plugins.browsertab.isAvailable",u);if("function"!=typeof e)throw new A("invalid-cordova-configuration");var n=null;e((function(e){if(e){if("function"!=typeof(n=Dr("cordova.plugins.browsertab.openUrl",u)))throw new A("invalid-cordova-configuration");n(f)}else{if("function"!=typeof(n=Dr("cordova.InAppBrowser.open",u)))throw new A("invalid-cordova-configuration");e=kr(),t.a=n(f,e.match(/(iPad|iPhone|iPod).*OS 7_\d/i)||e.match(/(iPad|iPhone|iPod).*OS 8_\d/i)?"_blank":"_system","location=yes")}}))}))}(i,t,e,n,r)})).then((function(){return new be((function(t,e){a=function(){var e=Dr("cordova.plugins.browsertab.close",u);return t(),"function"==typeof e&&e(),i.a&&"function"==typeof i.a.close&&(i.a.close(),i.a=null),!1},i.Ea(a),c=function(){s||(s=An(2e3).then((function(){e(new A("redirect-cancelled-by-user"))})))},h=function(){qr()&&c()},o.addEventListener("resume",c,!1),kr().toLowerCase().match(/android/)||o.addEventListener("visibilitychange",h,!1)})).s((function(t){return Ec(i).then((function(){throw t}))}))})).na((function(){c&&o.removeEventListener("resume",c,!1),h&&o.removeEventListener("visibilitychange",h,!1),s&&s.cancel(),a&&i.Ra(a),i.c=null}))},t.Ea=function(t){this.b.push(t),Ic(this).s((function(e){"auth/invalid-cordova-configuration"===e.code&&(e=new Fo("unknown",null,null,null,new A("no-auth-event")),t(e))}))},t.Ra=function(t){X(this.b,(function(e){return e==t}))};var _c={name:"pendingRedirect",D:"session"};function Ac(t){return ec(t.b,_c,t.a)}function Nc(t,e,n,r){this.i={},this.u=0,this.O=t,this.m=e,this.v=n,this.G=r,this.h=[],this.f=!1,this.l=I(this.o,this),this.b=new Gc,this.A=new Hc,this.g=new Tc(jc(this.m,this.v)),this.c={},this.c.unknown=this.b,this.c.signInViaRedirect=this.b,this.c.linkViaRedirect=this.b,this.c.reauthViaRedirect=this.b,this.c.signInViaPopup=this.A,this.c.linkViaPopup=this.A,this.c.reauthViaPopup=this.A,this.a=Sc(this.O,this.m,this.v,S,this.G)}function Sc(t,e,n,i,o){var s=r.Z.SDK_VERSION||null;return gr()?new gc(t,e,n,s,i,o):new lu(t,e,n,s,i,o)}function kc(t){t.f||(t.f=!0,t.a.Ea(t.l));var e=t.a;return t.a.la().s((function(n){throw t.a==e&&t.reset(),n}))}function Dc(t){t.a.Wb()&&kc(t).s((function(e){var n=new Fo("unknown",null,null,null,new A("operation-not-supported-in-this-environment"));xc(e)&&t.o(n)})),t.a.Sb()||qc(t.b)}function Oc(t,e){J(t.h,e)||t.h.push(e),t.f||function(t){return t.b.get(_c,t.a).then((function(t){return"pending"==t}))}(t.g).then((function(e){e?Ac(t.g).then((function(){kc(t).s((function(e){var n=new Fo("unknown",null,null,null,new A("operation-not-supported-in-this-environment"));xc(e)&&t.o(n)}))})):Dc(t)})).s((function(){Dc(t)}))}function Pc(t,e){X(t.h,(function(t){return t==e}))}Nc.prototype.reset=function(){this.f=!1,this.a.Ra(this.l),this.a=Sc(this.O,this.m,this.v,null,this.G),this.i={}},Nc.prototype.o=function(t){if(!t)throw new A("invalid-auth-event");if(6e5<=T()-this.u&&(this.i={},this.u=0),t&&t.getUid()&&this.i.hasOwnProperty(t.getUid()))return!1;for(var e=!1,n=0;n<this.h.length;n++){var r=this.h[n];if(r.Eb(t.c,t.b)){(e=this.c[t.c])&&(e.h(t,r),t&&(t.f||t.b)&&(this.i[t.getUid()]=!0,this.u=T())),e=!0;break}}return qc(this.b),e};var Lc=new Gr(2e3,1e4),Cc=new Gr(3e4,6e4);function Rc(t,e,n,r,i,o,s){return t.a.Lb(e,n,r,(function(){t.f||(t.f=!0,t.a.Ea(t.l))}),(function(){t.reset()}),i,o,s)}function xc(t){return!(!t||"auth/cordova-not-ready"!=t.code)}function Mc(t,e,n,r,i){var o;return function(t){return t.b.set(_c,"pending",t.a)}(t.g).then((function(){return t.a.Mb(e,n,r,i).s((function(e){if(xc(e))throw new A("operation-not-supported-in-this-environment");return o=e,Ac(t.g).then((function(){throw o}))})).then((function(){return t.a.Zb()?new be((function(){})):Ac(t.g).then((function(){return t.qa()})).then((function(){})).s((function(){}))}))}))}function Vc(t,e,n,r,i){return t.a.Nb(r,(function(t){e.ma(n,null,t,i)}),Lc.get())}Nc.prototype.qa=function(){return this.b.qa()};var Uc={};function jc(t,e,n){return t=t+":"+e,n&&(t=t+":"+n.url),t}function Fc(t,e,n,r){var i=jc(e,n,r);return Uc[i]||(Uc[i]=new Nc(t,e,n,r)),Uc[i]}function Gc(){this.b=null,this.f=[],this.c=[],this.a=null,this.i=this.g=!1}function qc(t){t.g||(t.g=!0,Kc(t,!1,null,null))}function Bc(t){t.g&&!t.i&&Kc(t,!1,null,null)}function zc(t,e){if(t.b=function(){return Ne(e)},t.f.length)for(var n=0;n<t.f.length;n++)t.f[n](e)}function Kc(t,e,n,r){e?r?function(t,e){if(t.b=function(){return Se(e)},t.c.length)for(var n=0;n<t.c.length;n++)t.c[n](e)}(t,r):zc(t,n):zc(t,{user:null}),t.f=[],t.c=[]}function Hc(){}function Jc(){this.hb=!1,Object.defineProperty(this,"appVerificationDisabled",{get:function(){return this.hb},set:function(t){this.hb=t},enumerable:!1})}function Wc(t,e){this.a=e,Yr(this,"verificationId",t)}function Xc(t,e,n,r){return new Mo(t).eb(e,n).then((function(t){return new Wc(t,r)}))}function Yc(t){var e=zi(t);if(!(e&&e.exp&&e.auth_time&&e.iat))throw new A("internal-error","An internal error occurred. The token obtained by Firebase appears to be malformed. Please retry the operation.");Zr(this,{token:t,expirationTime:zr(1e3*e.exp),authTime:zr(1e3*e.auth_time),issuedAtTime:zr(1e3*e.iat),signInProvider:e.firebase&&e.firebase.sign_in_provider?e.firebase.sign_in_provider:null,signInSecondFactor:e.firebase&&e.firebase.sign_in_second_factor?e.firebase.sign_in_second_factor:null,claims:e})}function Zc(t,e,n){var r=e&&e[$c];if(!r)throw new A("argument-error","Internal assert: Invalid MultiFactorResolver");this.a=t,this.f=dt(e),this.g=n,this.c=new oo(null,r),this.b=[];var i=this;B(e[Qc]||[],(function(t){(t=ei(t))&&i.b.push(t)})),Yr(this,"auth",this.a),Yr(this,"session",this.c),Yr(this,"hints",this.b)}Gc.prototype.reset=function(){this.b=null,this.a&&(this.a.cancel(),this.a=null)},Gc.prototype.h=function(t,e){if(t){this.reset(),this.g=!0;var n=t.c,r=t.b,i=t.a&&"auth/web-storage-unsupported"==t.a.code,o=t.a&&"auth/operation-not-supported-in-this-environment"==t.a.code;this.i=!(!i&&!o),"unknown"!=n||i||o?t.a?(Kc(this,!0,null,t.a),Ne()):e.Fa(n,r)?function(t,e,n){n=n.Fa(e.c,e.b);var r=e.g,i=e.f,o=e.i,s=e.S(),a=!!e.c.match(/Redirect$/);n(r,i,s,o).then((function(e){Kc(t,a,e,null)})).s((function(e){Kc(t,a,null,e)}))}(this,t,e):Se(new A("invalid-auth-event")):(Kc(this,!1,null,null),Ne())}else Se(new A("invalid-auth-event"))},Gc.prototype.qa=function(){var t=this;return new be((function(e,n){t.b?t.b().then(e,n):(t.f.push(e),t.c.push(n),function(t){var e=new A("timeout");t.a&&t.a.cancel(),t.a=An(Cc.get()).then((function(){t.b||(t.g=!0,Kc(t,!0,null,e))}))}(t))}))},Hc.prototype.h=function(t,e){if(t){var n=t.c,r=t.b;t.a?(e.ma(t.c,null,t.a,t.b),Ne()):e.Fa(n,r)?function(t,e){var n=t.b,r=t.c;e.Fa(r,n)(t.g,t.f,t.S(),t.i).then((function(t){e.ma(r,t,null,n)})).s((function(t){e.ma(r,null,t,n)}))}(t,e):Se(new A("invalid-auth-event"))}else Se(new A("invalid-auth-event"))},Wc.prototype.confirm=function(t){return t=Vo(this.verificationId,t),this.a(t)};var Qc="mfaInfo",$c="mfaPendingCredential";function th(t,e,n,r){A.call(this,"multi-factor-auth-required",r,e),this.b=new Zc(t,e,n),Yr(this,"resolver",this.b)}function eh(t,e,n){if(t&&v(t.serverResponse)&&"auth/multi-factor-auth-required"===t.code)try{return new th(e,t.serverResponse,n,t.message)}catch(t){}return null}function nh(){}function rh(t){Yr(this,"factorId",t.fa),this.a=t}function ih(t){if(rh.call(this,t),this.a.fa!=Mo.PROVIDER_ID)throw new A("argument-error","firebase.auth.PhoneMultiFactorAssertion requires a valid firebase.auth.PhoneAuthCredential")}function oh(t,e){for(var n in Xe.call(this,t),e)this[n]=e[n]}function sh(t,e){this.a=t,this.b=[],this.c=I(this.xc,this),un(this.a,"userReloaded",this.c);var n=[];e&&e.multiFactor&&e.multiFactor.enrolledFactors&&B(e.multiFactor.enrolledFactors,(function(t){var e=null,r={};if(t){t.uid&&(r[ii]=t.uid),t.displayName&&(r[ni]=t.displayName),t.enrollmentTime&&(r[ri]=new Date(t.enrollmentTime).toISOString()),t.phoneNumber&&(r[oi]=t.phoneNumber);try{e=new si(r)}catch(t){}t=e}else t=null;t&&n.push(t)})),ah(this,n)}function ah(t,e){t.b=e,Yr(t,"enrolledFactors",e)}function uh(t,e,n){if(this.h=t,this.i=e,this.g=n,this.c=3e4,this.f=96e4,this.b=null,this.a=this.c,this.f<this.c)throw Error("Proactive refresh lower bound greater than upper bound!")}function ch(t,e){t.stop(),t.b=An(function(t,e){return e?(t.a=t.c,t.g()):(e=t.a,t.a*=2,t.a>t.f&&(t.a=t.f),e)}(t,e)).then((function(){return function(){var t=u.document,e=null;return qr()||!t?Ne():new be((function(n){e=function(){qr()&&(t.removeEventListener("visibilitychange",e,!1),n())},t.addEventListener("visibilitychange",e,!1)})).s((function(n){throw t.removeEventListener("visibilitychange",e,!1),n}))}()})).then((function(){return t.h()})).then((function(){ch(t,!0)})).s((function(e){t.i(e)&&ch(t,!1)}))}function hh(t){this.c=t,this.b=this.a=null}function fh(t){return t.b&&1e3*t.b.c||0}function lh(t,e){var n=e.refreshToken;t.b=Bi(e[Zs]||""),t.a=n}function ph(t,e){this.a=t||null,this.b=e||null,Zr(this,{lastSignInTime:zr(e||null),creationTime:zr(t||null)})}function dh(t,e,n,r,i,o){Zr(this,{uid:t,displayName:r||null,photoURL:i||null,email:n||null,phoneNumber:o||null,providerId:e})}function vh(t,e,n){this.G=[],this.l=t.apiKey,this.m=t.appName,this.o=t.authDomain||null;var i=r.Z.SDK_VERSION?Sr(r.Z.SDK_VERSION):null;this.a=new Xs(this.l,P(S),i),t.emulatorConfig&&ra(this.a,t.emulatorConfig),this.b=new hh(this.a),Th(this,e[Zs]),lh(this.b,e),Yr(this,"refreshToken",this.b.a),Nh(this,n||{}),wn.call(this),this.P=!1,this.o&&Pr()&&(this.i=Fc(this.o,this.l,this.m)),this.R=[],this.f=null,this.u=function(t){return new uh((function(){return t.I(!0)}),(function(t){return!(!t||"auth/network-request-failed"!=t.code)}),(function(){var e=fh(t.b)-T()-3e5;return 0<e?e:0}))}(this),this.$=I(this.gb,this);var o=this;this.pa=null,this.Ba=function(t){o.wa(t.h)},this.ba=null,this.za=function(t){ra(o.a,t.c)},this.W=null,this.X=[],this.Aa=function(t){gh(o,t.f)},this.aa=null,this.N=new sh(this,n),Yr(this,"multiFactor",this.N)}function yh(t,e){t.ba&&fn(t.ba,"languageCodeChanged",t.Ba),(t.ba=e)&&un(e,"languageCodeChanged",t.Ba)}function mh(t,e){t.W&&fn(t.W,"emulatorConfigChanged",t.za),(t.W=e)&&un(e,"emulatorConfigChanged",t.za)}function gh(t,e){t.X=e,oa(t.a,r.Z.SDK_VERSION?Sr(r.Z.SDK_VERSION,t.X):null)}function bh(t,e){t.aa&&fn(t.aa,"frameworkChanged",t.Aa),(t.aa=e)&&un(e,"frameworkChanged",t.Aa)}function wh(t){try{return r.Z.app(t.m).auth()}catch(e){throw new A("internal-error","No firebase.auth.Auth instance is available for the Firebase App '"+t.m+"'!")}}function Ih(t){t.A||t.u.b||(t.u.start(),fn(t,"tokenChanged",t.$),un(t,"tokenChanged",t.$))}function Eh(t){fn(t,"tokenChanged",t.$),t.u.stop()}function Th(t,e){t.ya=e,Yr(t,"_lat",e)}function _h(t){for(var e=[],n=0;n<t.R.length;n++)e.push(t.R[n](t));return De(e).then((function(){return t}))}function Ah(t){t.i&&!t.P&&(t.P=!0,Oc(t.i,t))}function Nh(t,e){Zr(t,{uid:e.uid,displayName:e.displayName||null,photoURL:e.photoURL||null,email:e.email||null,emailVerified:e.emailVerified||!1,phoneNumber:e.phoneNumber||null,isAnonymous:e.isAnonymous||!1,tenantId:e.tenantId||null,metadata:new ph(e.createdAt,e.lastLoginAt),providerData:[]}),t.a.b=t.tenantId}function Sh(){}function kh(t){return Ne().then((function(){if(t.A)throw new A("app-deleted")}))}function Dh(t){return K(t.providerData,(function(t){return t.providerId}))}function Oh(t,e){e&&(Ph(t,e.providerId),t.providerData.push(e))}function Ph(t,e){X(t.providerData,(function(t){return t.providerId==e}))}function Lh(t,e,n){("uid"!=e||n)&&t.hasOwnProperty(e)&&Yr(t,e,n)}function Ch(t,e){t!=e&&(Zr(t,{uid:e.uid,displayName:e.displayName,photoURL:e.photoURL,email:e.email,emailVerified:e.emailVerified,phoneNumber:e.phoneNumber,isAnonymous:e.isAnonymous,tenantId:e.tenantId,providerData:[]}),e.metadata?Yr(t,"metadata",function(t){return new ph(t.a,t.b)}(e.metadata)):Yr(t,"metadata",new ph),B(e.providerData,(function(e){Oh(t,e)})),function(t,e){t.b=e.b,t.a=e.a}(t.b,e.b),Yr(t,"refreshToken",t.b.a),ah(t.N,e.N.b))}function Rh(t){return t.I().then((function(e){var n=t.isAnonymous;return function(t,e){return eu(t.a,La,{idToken:e}).then(I(t.Jc,t))}(t,e).then((function(){return n||Lh(t,"isAnonymous",!1),e}))}))}function xh(t,e){e[Zs]&&t.ya!=e[Zs]&&(lh(t.b,e),t.dispatchEvent(new oh("tokenChanged")),Th(t,e[Zs]),Lh(t,"refreshToken",t.b.a))}function Mh(t,e){return Rh(t).then((function(){if(J(Dh(t),e))return _h(t).then((function(){throw new A("provider-already-linked")}))}))}function Vh(t,e,n){return Qr({user:t,credential:Uo(e),additionalUserInfo:e=Xi(e),operationType:n})}function Uh(t,e){return xh(t,e),t.reload().then((function(){return t}))}function jh(t,e,n,i,o){if(!Pr())return Se(new A("operation-not-supported-in-this-environment"));if(t.f&&!o)return Se(t.f);var s=Wi(n.providerId),a=Ur(t.uid+":::"),u=null;(!Rr()||br())&&t.o&&n.isOAuthProvider&&(u=yu(t.o,t.l,t.m,e,n,null,a,r.Z.SDK_VERSION||null,null,null,t.tenantId));var c=dr(u,s&&s.ua,s&&s.ta);return i=i().then((function(){if(Gh(t),!o)return t.I().then((function(){}))})).then((function(){return Rc(t.i,c,e,n,a,!!u,t.tenantId)})).then((function(){return new be((function(n,r){t.ma(e,null,new A("cancelled-popup-request"),t.h||null),t.g=n,t.O=r,t.h=a,t.c=Vc(t.i,t,e,c,a)}))})).then((function(t){return c&&pr(c),t?Qr(t):null})).s((function(t){throw c&&pr(c),t})),qh(t,i,o)}function Fh(t,e,n,r,i){if(!Pr())return Se(new A("operation-not-supported-in-this-environment"));if(t.f&&!i)return Se(t.f);var o=null,s=Ur(t.uid+":::");return r=r().then((function(){if(Gh(t),!i)return t.I().then((function(){}))})).then((function(){return t.ga=s,_h(t)})).then((function(e){return t.ha&&(e=(e=t.ha).b.set(Kh,t.w(),e.a)),e})).then((function(){return Mc(t.i,e,n,s,t.tenantId)})).s((function(e){if(o=e,t.ha)return Hh(t.ha);throw o})).then((function(){if(o)throw o})),qh(t,r,i)}function Gh(t){if(!t.i||!t.P){if(t.i&&!t.P)throw new A("internal-error");throw new A("auth-domain-config-required")}}function qh(t,e,n){var r=function(t,e,n){return t.f&&!n?(e.cancel(),Se(t.f)):e.s((function(e){throw!e||"auth/user-disabled"!=e.code&&"auth/user-token-expired"!=e.code||(t.f||t.dispatchEvent(new oh("userInvalidated")),t.f=e),e}))}(t,e,n);return t.G.push(r),r.na((function(){W(t.G,r)})),r.s((function(e){var n=null;throw e&&"auth/multi-factor-auth-required"===e.code&&(n=eh(e.w(),wh(t),I(t.ic,t))),n||e}))}function Bh(t){if(!t.apiKey)return null;var e={apiKey:t.apiKey,authDomain:t.authDomain,appName:t.appName,emulatorConfig:t.emulatorConfig},n={};if(!t.stsTokenManager||!t.stsTokenManager.accessToken)return null;n[Zs]=t.stsTokenManager.accessToken,n.refreshToken=t.stsTokenManager.refreshToken||null;var r=new vh(e,n,t);return t.providerData&&B(t.providerData,(function(t){t&&Oh(r,Qr(t))})),t.redirectEventId&&(r.ga=t.redirectEventId),r}function zh(t){this.a=t,this.b=Qu()}Zc.prototype.Qc=function(t){var e=this;return t.rb(this.a.a,this.c).then((function(t){var n=dt(e.f);return delete n[Qc],delete n[$c],yt(n,t),e.g(n)}))},_(th,A),nh.prototype.rb=function(t,e,n){return e.type==so?function(t,e,n,r){return n.Ha().then((function(n){return n={idToken:n},void 0!==r&&(n.displayName=r),yt(n,{phoneVerificationInfo:xo(t.a)}),eu(e,Oa,n)}))}(this,t,e,n):function(t,e,n){return n.Ha().then((function(n){return yt(n={mfaPendingCredential:n},{phoneVerificationInfo:xo(t.a)}),eu(e,Pa,n)}))}(this,t,e)},_(rh,nh),_(ih,rh),_(oh,Xe),(t=sh.prototype).xc=function(t){ah(this,function(t){var e=[];return B(t.mfaInfo||[],(function(t){(t=ei(t))&&e.push(t)})),e}(t.gd))},t.Qb=function(){return this.a.I().then((function(t){return new oo(t,null)}))},t.ec=function(t,e){var n=this,r=this.a.a;return this.Qb().then((function(n){return t.rb(r,n,e)})).then((function(t){return xh(n.a,t),n.a.reload()}))},t.ad=function(t){var e=this,n="string"==typeof t?t:t.uid,r=this.a.a;return this.a.I().then((function(t){return eu(r,tu,{idToken:t,mfaEnrollmentId:n})})).then((function(t){var r=z(e.b,(function(t){return t.uid!=n}));return ah(e,r),xh(e.a,t),e.a.reload().s((function(t){if("auth/user-token-expired"!=t.code)throw t}))}))},t.w=function(){return{multiFactor:{enrolledFactors:K(this.b,(function(t){return t.w()}))}}},uh.prototype.start=function(){this.a=this.c,ch(this,!0)},uh.prototype.stop=function(){this.b&&(this.b.cancel(),this.b=null)},hh.prototype.w=function(){return{apiKey:this.c.c,refreshToken:this.a,accessToken:this.b&&this.b.toString(),expirationTime:fh(this)}},hh.prototype.getToken=function(t){return t=!!t,this.b&&!this.a?Se(new A("user-token-expired")):t||!this.b||T()>fh(this)-3e4?this.a?function(t,e){return function(t,e){return new be((function(n,r){"refresh_token"==e.grant_type&&e.refresh_token||"authorization_code"==e.grant_type&&e.code?sa(t,t.l+"?key="+encodeURIComponent(t.c),(function(t){t?t.error?r(ru(t)):t.access_token&&t.refresh_token?n(t):r(new A("internal-error")):r(new A("network-request-failed"))}),"POST",Yn(e).toString(),t.g,t.v.get()):r(new A("internal-error"))}))}(t.c,e).then((function(e){return t.b=Bi(e.access_token),t.a=e.refresh_token,{accessToken:t.b.toString(),refreshToken:t.a}})).s((function(e){throw"auth/user-token-expired"==e.code&&(t.a=null),e}))}(this,{grant_type:"refresh_token",refresh_token:this.a}):Ne(null):Ne({accessToken:this.b.toString(),refreshToken:this.a})},ph.prototype.w=function(){return{lastLoginAt:this.b,createdAt:this.a}},_(vh,wn),vh.prototype.wa=function(t){this.pa=t,na(this.a,t)},vh.prototype.ka=function(){return this.pa},vh.prototype.Ga=function(){return Z(this.X)},vh.prototype.gb=function(){this.u.b&&(this.u.stop(),this.u.start())},Yr(vh.prototype,"providerId","firebase"),(t=vh.prototype).reload=function(){var t=this;return qh(this,kh(this).then((function(){return Rh(t).then((function(){return _h(t)})).then(Sh)})))},t.nc=function(t){return this.I(t).then((function(t){return new Yc(t)}))},t.I=function(t){var e=this;return qh(this,kh(this).then((function(){return e.b.getToken(t)})).then((function(t){if(!t)throw new A("internal-error");return t.accessToken!=e.ya&&(Th(e,t.accessToken),e.dispatchEvent(new oh("tokenChanged"))),Lh(e,"refreshToken",t.refreshToken),t.accessToken})))},t.Jc=function(t){if(!(t=t.users)||!t.length)throw new A("internal-error");Nh(this,{uid:(t=t[0]).localId,displayName:t.displayName,photoURL:t.photoUrl,email:t.email,emailVerified:!!t.emailVerified,phoneNumber:t.phoneNumber,lastLoginAt:t.lastLoginAt,createdAt:t.createdAt,tenantId:t.tenantId});for(var e=function(t){return(t=t.providerUserInfo)&&t.length?K(t,(function(t){return new dh(t.rawId,t.providerId,t.email,t.displayName,t.photoUrl,t.phoneNumber)})):[]}(t),n=0;n<e.length;n++)Oh(this,e[n]);Lh(this,"isAnonymous",!(this.email&&t.passwordHash||this.providerData&&this.providerData.length)),this.dispatchEvent(new oh("userReloaded",{gd:t}))},t.Kc=function(t){return Wr("firebase.User.prototype.reauthenticateAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.reauthenticateWithCredential instead."),this.sb(t)},t.sb=function(t){var e=this,n=null;return qh(this,t.c(this.a,this.uid).then((function(t){return xh(e,t),n=Vh(e,t,"reauthenticate"),e.f=null,e.reload()})).then((function(){return n})),!0)},t.Bc=function(t){return Wr("firebase.User.prototype.linkAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.linkWithCredential instead."),this.pb(t)},t.pb=function(t){var e=this,n=null;return qh(this,Mh(this,t.providerId).then((function(){return e.I()})).then((function(n){return t.b(e.a,n)})).then((function(t){return n=Vh(e,t,"link"),Uh(e,t)})).then((function(){return n})))},t.Cc=function(t,e){var n=this;return qh(this,Mh(this,"phone").then((function(){return Xc(wh(n),t,e,I(n.pb,n))})))},t.Lc=function(t,e){var n=this;return qh(this,Ne().then((function(){return Xc(wh(n),t,e,I(n.sb,n))})),!0)},t.Ab=function(t){var e=this;return qh(this,this.I().then((function(n){return e.a.Ab(n,t)})).then((function(t){return xh(e,t),e.reload()})))},t.dd=function(t){var e=this;return qh(this,this.I().then((function(n){return t.b(e.a,n)})).then((function(t){return xh(e,t),e.reload()})))},t.Bb=function(t){var e=this;return qh(this,this.I().then((function(n){return e.a.Bb(n,t)})).then((function(t){return xh(e,t),e.reload()})))},t.Cb=function(t){if(void 0===t.displayName&&void 0===t.photoURL)return kh(this);var e=this;return qh(this,this.I().then((function(n){return e.a.Cb(n,{displayName:t.displayName,photoUrl:t.photoURL})})).then((function(t){return xh(e,t),Lh(e,"displayName",t.displayName||null),Lh(e,"photoURL",t.photoUrl||null),B(e.providerData,(function(t){"password"===t.providerId&&(Yr(t,"displayName",e.displayName),Yr(t,"photoURL",e.photoURL))})),_h(e)})).then(Sh))},t.bd=function(t){var e=this;return qh(this,Rh(this).then((function(n){return J(Dh(e),t)?function(t,e,n){return eu(t,Sa,{idToken:e,deleteProvider:n})}(e.a,n,[t]).then((function(t){var n={};return B(t.providerUserInfo||[],(function(t){n[t.providerId]=!0})),B(Dh(e),(function(t){n[t]||Ph(e,t)})),n[Mo.PROVIDER_ID]||Yr(e,"phoneNumber",null),_h(e)})):_h(e).then((function(){throw new A("no-such-provider")}))})))},t.delete=function(){var t=this;return qh(this,this.I().then((function(e){return eu(t.a,Na,{idToken:e})})).then((function(){t.dispatchEvent(new oh("userDeleted"))}))).then((function(){for(var e=0;e<t.G.length;e++)t.G[e].cancel("app-deleted");yh(t,null),mh(t,null),bh(t,null),t.G=[],t.A=!0,Eh(t),Yr(t,"refreshToken",null),t.i&&Pc(t.i,t)}))},t.Eb=function(t,e){return!!("linkViaPopup"==t&&(this.h||null)==e&&this.g||"reauthViaPopup"==t&&(this.h||null)==e&&this.g||"linkViaRedirect"==t&&(this.ga||null)==e||"reauthViaRedirect"==t&&(this.ga||null)==e)},t.ma=function(t,e,n,r){"linkViaPopup"!=t&&"reauthViaPopup"!=t||r!=(this.h||null)||(n&&this.O?this.O(n):e&&!n&&this.g&&this.g(e),this.c&&(this.c.cancel(),this.c=null),delete this.g,delete this.O)},t.Fa=function(t,e){return"linkViaPopup"==t&&e==(this.h||null)?I(this.Jb,this):"reauthViaPopup"==t&&e==(this.h||null)?I(this.Kb,this):"linkViaRedirect"==t&&(this.ga||null)==e?I(this.Jb,this):"reauthViaRedirect"==t&&(this.ga||null)==e?I(this.Kb,this):null},t.Dc=function(t){var e=this;return jh(this,"linkViaPopup",t,(function(){return Mh(e,t.providerId).then((function(){return _h(e)}))}),!1)},t.Mc=function(t){return jh(this,"reauthViaPopup",t,(function(){return Ne()}),!0)},t.Ec=function(t){var e=this;return Fh(this,"linkViaRedirect",t,(function(){return Mh(e,t.providerId)}),!1)},t.Nc=function(t){return Fh(this,"reauthViaRedirect",t,(function(){return Ne()}),!0)},t.Jb=function(t,e,n,r){var i=this;this.c&&(this.c.cancel(),this.c=null);var o=null;return qh(this,this.I().then((function(n){return ba(i.a,{requestUri:t,postBody:r,sessionId:e,idToken:n})})).then((function(t){return o=Vh(i,t,"link"),Uh(i,t)})).then((function(){return o})))},t.Kb=function(t,e,n,r){var i=this;this.c&&(this.c.cancel(),this.c=null);var o=null;return qh(this,Ne().then((function(){return co(wa(i.a,{requestUri:t,sessionId:e,postBody:r,tenantId:n}),i.uid)})).then((function(t){return o=Vh(i,t,"reauthenticate"),xh(i,t),i.f=null,i.reload()})).then((function(){return o})),!0)},t.tb=function(t){var e=this,n=null;return qh(this,this.I().then((function(e){return n=e,void 0===t||pt(t)?{}:Fi(new Oi(t))})).then((function(t){return e.a.tb(n,t)})).then((function(t){if(e.email!=t)return e.reload()})).then((function(){})))},t.Db=function(t,e){var n=this,r=null;return qh(this,this.I().then((function(t){return r=t,void 0===e||pt(e)?{}:Fi(new Oi(e))})).then((function(e){return n.a.Db(r,t,e)})).then((function(t){if(n.email!=t)return n.reload()})).then((function(){})))},t.ic=function(t){var e=null,n=this;return qh(this,t=co(Ne(t),n.uid).then((function(t){return e=Vh(n,t,"reauthenticate"),xh(n,t),n.f=null,n.reload()})).then((function(){return e})),!0)},t.toJSON=function(){return this.w()},t.w=function(){var t={uid:this.uid,displayName:this.displayName,photoURL:this.photoURL,email:this.email,emailVerified:this.emailVerified,phoneNumber:this.phoneNumber,isAnonymous:this.isAnonymous,tenantId:this.tenantId,providerData:[],apiKey:this.l,appName:this.m,authDomain:this.o,stsTokenManager:this.b.w(),redirectEventId:this.ga||null};return this.metadata&&yt(t,this.metadata.w()),B(this.providerData,(function(e){t.providerData.push(function(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&(n[e]=t[e]);return n}(e))})),yt(t,this.N.w()),t};var Kh={name:"redirectUser",D:"session"};function Hh(t){return ec(t.b,Kh,t.a)}function Jh(t){this.a=t,this.b=Qu(),this.c=null,this.f=function(t){var e=Yh("local"),n=Yh("session"),r=Yh("none");return function(t,e,n){var r=tc(e,n),i=$u(t,e.D);return t.get(e,n).then((function(o){var s=null;try{s=Vr(u.localStorage.getItem(r))}catch(t){}if(s&&!o)return u.localStorage.removeItem(r),t.set(e,s,n);s&&o&&"localStorage"!=i.type&&u.localStorage.removeItem(r)}))}(t.b,e,t.a).then((function(){return t.b.get(n,t.a)})).then((function(i){return i?n:t.b.get(r,t.a).then((function(n){return n?r:t.b.get(e,t.a).then((function(n){return n?e:t.b.get(Xh,t.a).then((function(t){return t?Yh(t):e}))}))}))})).then((function(e){return t.c=e,Wh(t,e.D)})).s((function(){t.c||(t.c=e)}))}(this),this.b.addListener(Yh("local"),this.a,I(this.g,this))}function Wh(t,e){var n,r=[];for(n in Yu)Yu[n]!==e&&r.push(ec(t.b,Yh(Yu[n]),t.a));return r.push(ec(t.b,Xh,t.a)),function(t){return new be((function(e,n){var r=t.length,i=[];if(r)for(var o=function(t,n){r--,i[t]=n,0==r&&e(i)},s=function(t){n(t)},a=0;a<t.length;a++)ke(t[a],E(o,a),s);else e(i)}))}(r)}Jh.prototype.g=function(){var t=this,e=Yh("local");tf(this,(function(){return Ne().then((function(){return t.c&&"local"!=t.c.D?t.b.get(e,t.a):null})).then((function(n){if(n)return Wh(t,"local").then((function(){t.c=e}))}))}))};var Xh={name:"persistence",D:"session"};function Yh(t){return{name:"authUser",D:t}}function Zh(t,e){return tf(t,(function(){return t.b.set(t.c,e.w(),t.a)}))}function Qh(t){return tf(t,(function(){return ec(t.b,t.c,t.a)}))}function $h(t,e,n){return tf(t,(function(){return t.b.get(t.c,t.a).then((function(t){return t&&e&&(t.authDomain=e),t&&n&&(t.emulatorConfig=n),Bh(t||{})}))}))}function tf(t,e){return t.f=t.f.then(e,e),t.f}function ef(t){if(this.m=!1,Yr(this,"settings",new Jc),Yr(this,"app",t),!hf(this).options||!hf(this).options.apiKey)throw new A("invalid-api-key");t=r.Z.SDK_VERSION?Sr(r.Z.SDK_VERSION):null,this.a=new Xs(hf(this).options&&hf(this).options.apiKey,P(S),t),this.R=[],this.u=[],this.P=[],this.ac=r.Z.INTERNAL.createSubscribe(I(this.yc,this)),this.X=void 0,this.bc=r.Z.INTERNAL.createSubscribe(I(this.zc,this)),uf(this,null),this.l=new Jh(hf(this).options.apiKey+":"+hf(this).name),this.G=new zh(hf(this).options.apiKey+":"+hf(this).name),this.$=df(this,function(t){var e=hf(t).options.authDomain,n=function(t){var e=function(t,e){return t.b.get(Kh,t.a).then((function(t){return t&&e&&(t.authDomain=e),Bh(t||{})}))}(t.G,hf(t).options.authDomain).then((function(e){return(t.o=e)&&(e.ha=t.G),Hh(t.G)}));return df(t,e)}(t).then((function(){return $h(t.l,e,t.f)})).then((function(e){return e?(e.ha=t.G,t.o&&(t.o.ga||null)==(e.ga||null)?e:e.reload().then((function(){return Zh(t.l,e).then((function(){return e}))})).s((function(n){return"auth/network-request-failed"==n.code?e:Qh(t.l)}))):null})).then((function(e){uf(t,e||null)}));return df(t,n)}(this)),this.i=df(this,function(t){return t.$.then((function(){return af(t)})).s((function(){})).then((function(){if(!t.m)return t.pa()})).s((function(){})).then((function(){if(!t.m){t.ba=!0;var e=t.l;e.b.addListener(Yh("local"),e.a,t.pa)}}))}(this)),this.ba=!1,this.pa=I(this.Yc,this),this.Ba=I(this.da,this),this.ya=I(this.kc,this),this.za=I(this.vc,this),this.Aa=I(this.wc,this),this.b=null,function(t){var e=hf(t).options.authDomain,n=hf(t).options.apiKey;e&&Pr()&&(t.gb=t.$.then((function(){if(!t.m){if(t.b=Fc(e,n,hf(t).name,t.f),Oc(t.b,t),ff(t)&&Ah(ff(t)),t.o){Ah(t.o);var r=t.o;r.wa(t.ka()),yh(r,t),gh(r=t.o,t.N),bh(r,t),ra((r=t.o).a,t.f),mh(r,t),t.o=null}return t.b}})))}(this),this.INTERNAL={},this.INTERNAL.delete=I(this.delete,this),this.INTERNAL.logFramework=I(this.Fc,this),this.A=0,wn.call(this),function(t){Object.defineProperty(t,"lc",{get:function(){return this.ka()},set:function(t){this.wa(t)},enumerable:!1}),t.aa=null,Object.defineProperty(t,"ti",{get:function(){return this.S()},set:function(t){this.xb(t)},enumerable:!1}),t.W=null}(this),this.N=[],this.f=null}function nf(t){Xe.call(this,"languageCodeChanged"),this.h=t}function rf(t){Xe.call(this,"emulatorConfigChanged"),this.c=t}function of(t){Xe.call(this,"frameworkChanged"),this.f=t}function sf(t){return t.gb||Se(new A("auth-domain-config-required"))}function af(t){if(!Pr())return Se(new A("operation-not-supported-in-this-environment"));var e=sf(t).then((function(){return t.b.qa()})).then((function(t){return t?Qr(t):null}));return df(t,e)}function uf(t,e){ff(t)&&(function(t,e){X(t.R,(function(t){return t==e}))}(ff(t),t.Ba),fn(ff(t),"tokenChanged",t.ya),fn(ff(t),"userDeleted",t.za),fn(ff(t),"userInvalidated",t.Aa),Eh(ff(t))),e&&(e.R.push(t.Ba),un(e,"tokenChanged",t.ya),un(e,"userDeleted",t.za),un(e,"userInvalidated",t.Aa),0<t.A&&Ih(e)),Yr(t,"currentUser",e),e&&(e.wa(t.ka()),yh(e,t),gh(e,t.N),bh(e,t),ra(e.a,t.f),mh(e,t))}function cf(t,e){var n=null,r=null;return df(t,e.then((function(e){return n=Uo(e),r=Xi(e),function(t,e){var n={};return n.apiKey=hf(t).options.apiKey,n.authDomain=hf(t).options.authDomain,n.appName=hf(t).name,t.f&&(n.emulatorConfig=t.f),t.$.then((function(){return function(t,e,n,r){var i=new vh(t,e);return n&&(i.ha=n),r&&gh(i,r),i.reload().then((function(){return i}))}(n,e,t.G,t.Ga())})).then((function(e){return ff(t)&&e.uid==ff(t).uid?(Ch(ff(t),e),t.da(e)):(uf(t,e),Ah(e),t.da(e))})).then((function(){pf(t)}))}(t,e)}),(function(e){var n=null;throw e&&"auth/multi-factor-auth-required"===e.code&&(n=eh(e.w(),t,I(t.jc,t))),n||e})).then((function(){return Qr({user:ff(t),credential:n,additionalUserInfo:r,operationType:"signIn"})})))}function hf(t){return t.app}function ff(t){return t.currentUser}function lf(t){return ff(t)&&ff(t)._lat||null}function pf(t){if(t.ba){for(var e=0;e<t.u.length;e++)t.u[e]&&t.u[e](lf(t));if(t.X!==t.getUid()&&t.P.length)for(t.X=t.getUid(),e=0;e<t.P.length;e++)t.P[e]&&t.P[e](lf(t))}}function df(t,e){return t.R.push(e),e.na((function(){W(t.R,e)})),e}function vf(){}function yf(){this.a={},this.b=1e12}Jh.prototype.wb=function(t){var e=null,n=this;return function(t){var e=new A("invalid-persistence-type"),n=new A("unsupported-persistence-type");t:{for(r in Yu)if(Yu[r]==t){var r=!0;break t}r=!1}if(!r||"string"!=typeof t)throw e;switch(Ir()){case"ReactNative":if("session"===t)throw n;break;case"Node":if("none"!==t)throw n;break;case"Worker":if("session"===t||!Du()&&"none"!==t)throw n;break;default:if(!Or()&&"none"!==t)throw n}}(t),tf(this,(function(){return t!=n.c.D?n.b.get(n.c,n.a).then((function(r){return e=r,Wh(n,t)})).then((function(){if(n.c=Yh(t),e)return n.b.set(n.c,e,n.a)})):Ne()}))},_(ef,wn),_(nf,Xe),_(rf,Xe),_(of,Xe),(t=ef.prototype).wb=function(t){return df(this,t=this.l.wb(t))},t.wa=function(t){this.aa===t||this.m||(this.aa=t,na(this.a,this.aa),this.dispatchEvent(new nf(this.ka())))},t.ka=function(){return this.aa},t.ed=function(){var t=u.navigator;this.wa(t&&(t.languages&&t.languages[0]||t.language||t.userLanguage)||null)},t.fd=function(t){if(!this.f){if(!/^https?:\/\//.test(t))throw new A("argument-error","Emulator URL must start with a valid scheme (http:// or https://).");Br("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),u.document&&mr().then((function(){var t=u.document.createElement("div");t.innerText="Running in emulator mode. Do not use with production credentials.",t.style.position="fixed",t.style.width="100%",t.style.backgroundColor="#ffffff",t.style.border=".1em solid #000000",t.style.color="#ff0000",t.style.bottom="0px",t.style.left="0px",t.style.margin="0px",t.style.zIndex=1e4,t.style.textAlign="center",t.classList.add("firebase-emulator-warning"),u.document.body.appendChild(t)})),this.f={url:t},this.settings.hb=!0,ra(this.a,this.f),this.dispatchEvent(new rf(this.f))}},t.Fc=function(t){this.N.push(t),oa(this.a,r.Z.SDK_VERSION?Sr(r.Z.SDK_VERSION,this.N):null),this.dispatchEvent(new of(this.N))},t.Ga=function(){return Z(this.N)},t.xb=function(t){this.W===t||this.m||(this.W=t,this.a.b=this.W)},t.S=function(){return this.W},t.toJSON=function(){return{apiKey:hf(this).options.apiKey,authDomain:hf(this).options.authDomain,appName:hf(this).name,currentUser:ff(this)&&ff(this).w()}},t.Eb=function(t,e){switch(t){case"unknown":case"signInViaRedirect":return!0;case"signInViaPopup":return this.h==e&&!!this.g;default:return!1}},t.ma=function(t,e,n,r){"signInViaPopup"==t&&this.h==r&&(n&&this.O?this.O(n):e&&!n&&this.g&&this.g(e),this.c&&(this.c.cancel(),this.c=null),delete this.g,delete this.O)},t.Fa=function(t,e){return"signInViaRedirect"==t||"signInViaPopup"==t&&this.h==e&&this.g?I(this.hc,this):null},t.hc=function(t,e,n,r){var i=this,o={requestUri:t,postBody:r,sessionId:e,tenantId:n};return this.c&&(this.c.cancel(),this.c=null),i.$.then((function(){return cf(i,ga(i.a,o))}))},t.Wc=function(t){if(!Pr())return Se(new A("operation-not-supported-in-this-environment"));var e=this,n=Wi(t.providerId),i=Ur(),o=null;(!Rr()||br())&&hf(this).options.authDomain&&t.isOAuthProvider&&(o=yu(hf(this).options.authDomain,hf(this).options.apiKey,hf(this).name,"signInViaPopup",t,null,i,r.Z.SDK_VERSION||null,null,null,this.S(),this.f));var s=dr(o,n&&n.ua,n&&n.ta);return df(this,n=sf(this).then((function(n){return Rc(n,s,"signInViaPopup",t,i,!!o,e.S())})).then((function(){return new be((function(t,n){e.ma("signInViaPopup",null,new A("cancelled-popup-request"),e.h),e.g=t,e.O=n,e.h=i,e.c=Vc(e.b,e,"signInViaPopup",s,i)}))})).then((function(t){return s&&pr(s),t?Qr(t):null})).s((function(t){throw s&&pr(s),t})))},t.Xc=function(t){if(!Pr())return Se(new A("operation-not-supported-in-this-environment"));var e=this;return df(this,sf(this).then((function(){return function(t){return tf(t,(function(){return t.b.set(Xh,t.c.D,t.a)}))}(e.l)})).then((function(){return Mc(e.b,"signInViaRedirect",t,void 0,e.S())})))},t.qa=function(){var t=this;return af(this).then((function(e){return t.b&&Bc(t.b.b),e})).s((function(e){throw t.b&&Bc(t.b.b),e}))},t.cd=function(t){if(!t)return Se(new A("null-user"));if(this.W!=t.tenantId)return Se(new A("tenant-id-mismatch"));var e=this,n={};n.apiKey=hf(this).options.apiKey,n.authDomain=hf(this).options.authDomain,n.appName=hf(this).name;var r=function(t,e,n,r){var i=t.b,o={};return o[Zs]=i.b&&i.b.toString(),o.refreshToken=i.a,e=new vh(e||{apiKey:t.l,authDomain:t.o,appName:t.m},o),n&&(e.ha=n),r&&gh(e,r),Ch(e,t),e}(t,n,e.G,e.Ga());return df(this,this.i.then((function(){if(hf(e).options.apiKey!=t.l)return r.reload()})).then((function(){return ff(e)&&t.uid==ff(e).uid?(Ch(ff(e),t),e.da(t)):(uf(e,r),Ah(r),e.da(r))})).then((function(){pf(e)})))},t.zb=function(){var t=this;return df(this,this.i.then((function(){return t.b&&Bc(t.b.b),ff(t)?(uf(t,null),Qh(t.l).then((function(){pf(t)}))):Ne()})))},t.Yc=function(){var t=this;return $h(this.l,hf(this).options.authDomain).then((function(e){if(!t.m){var n;if(n=ff(t)&&e){n=ff(t).uid;var r=e.uid;n=null!=n&&""!==n&&null!=r&&""!==r&&n==r}if(n)return Ch(ff(t),e),ff(t).I();(ff(t)||e)&&(uf(t,e),e&&(Ah(e),e.ha=t.G),t.b&&Oc(t.b,t),pf(t))}}))},t.da=function(t){return Zh(this.l,t)},t.kc=function(){pf(this),this.da(ff(this))},t.vc=function(){this.zb()},t.wc=function(){this.zb()},t.jc=function(t){var e=this;return this.i.then((function(){return cf(e,Ne(t))}))},t.yc=function(t){var e=this;this.addAuthTokenListener((function(){t.next(ff(e))}))},t.zc=function(t){var e=this;!function(t,e){t.P.push(e),df(t,t.i.then((function(){!t.m&&J(t.P,e)&&t.X!==t.getUid()&&(t.X=t.getUid(),e(lf(t)))})))}(this,(function(){t.next(ff(e))}))},t.Hc=function(t,e,n){var r=this;return this.ba&&Promise.resolve().then((function(){"function"==typeof t?t(ff(r)):"function"==typeof t.next&&t.next(ff(r))})),this.ac(t,e,n)},t.Gc=function(t,e,n){var r=this;return this.ba&&Promise.resolve().then((function(){r.X=r.getUid(),"function"==typeof t?t(ff(r)):"function"==typeof t.next&&t.next(ff(r))})),this.bc(t,e,n)},t.mc=function(t){var e=this;return df(this,this.i.then((function(){return ff(e)?ff(e).I(t).then((function(t){return{accessToken:t}})):null})))},t.Sc=function(t){var e=this;return this.i.then((function(){return cf(e,eu(e.a,Xa,{token:t}))})).then((function(t){var n=t.user;return Lh(n,"isAnonymous",!1),e.da(n),t}))},t.Tc=function(t,e){var n=this;return this.i.then((function(){return cf(n,eu(n.a,Ya,{email:t,password:e}))}))},t.dc=function(t,e){var n=this;return this.i.then((function(){return cf(n,eu(n.a,_a,{email:t,password:e}))}))},t.Za=function(t){var e=this;return this.i.then((function(){return cf(e,t.ja(e.a))}))},t.Rc=function(t){return Wr("firebase.auth.Auth.prototype.signInAndRetrieveDataWithCredential is deprecated. Please use firebase.auth.Auth.prototype.signInWithCredential instead."),this.Za(t)},t.yb=function(){var t=this;return this.i.then((function(){var e=ff(t);if(e&&e.isAnonymous){var n=Qr({providerId:null,isNewUser:!1});return Qr({user:e,credential:null,additionalUserInfo:n,operationType:"signIn"})}return cf(t,t.a.yb()).then((function(e){var n=e.user;return Lh(n,"isAnonymous",!0),t.da(n),e}))}))},t.getUid=function(){return ff(this)&&ff(this).uid||null},t.cc=function(t){this.addAuthTokenListener(t),this.A++,0<this.A&&ff(this)&&Ih(ff(this))},t.Oc=function(t){var e=this;B(this.u,(function(n){n==t&&e.A--})),0>this.A&&(this.A=0),0==this.A&&ff(this)&&Eh(ff(this)),this.removeAuthTokenListener(t)},t.addAuthTokenListener=function(t){var e=this;this.u.push(t),df(this,this.i.then((function(){e.m||J(e.u,t)&&t(lf(e))})))},t.removeAuthTokenListener=function(t){X(this.u,(function(e){return e==t}))},t.delete=function(){this.m=!0;for(var t=0;t<this.R.length;t++)this.R[t].cancel("app-deleted");return this.R=[],this.l&&(t=this.l).b.removeListener(Yh("local"),t.a,this.pa),this.b&&(Pc(this.b,this),Bc(this.b.b)),Promise.resolve()},t.gc=function(t){return df(this,function(t,e){return eu(t,Aa,{identifier:e,continueUri:Lr()?cr():"http://localhost"}).then((function(t){return t.signinMethods||[]}))}(this.a,t))},t.Ac=function(t){return!!Lo(t)},t.vb=function(t,e){var n=this;return df(this,Ne().then((function(){var t=new Oi(e);if(!t.c)throw new A("argument-error",Ci+" must be true when sending sign in link to email");return Fi(t)})).then((function(e){return n.a.vb(t,e)})).then((function(){})))},t.hd=function(t){return this.Qa(t).then((function(t){return t.data.email}))},t.mb=function(t,e){return df(this,this.a.mb(t,e).then((function(){})))},t.Qa=function(t){return df(this,this.a.Qa(t).then((function(t){return new ai(t)})))},t.ib=function(t){return df(this,this.a.ib(t).then((function(){})))},t.ub=function(t,e){var n=this;return df(this,Ne().then((function(){return void 0===e||pt(e)?{}:Fi(new Oi(e))})).then((function(e){return n.a.ub(t,e)})).then((function(){})))},t.Vc=function(t,e){return df(this,Xc(this,t,e,I(this.Za,this)))},t.Uc=function(t,e){var n=this;return df(this,Ne().then((function(){var r=e||cr(),i=Po(t,r);if(!(r=Lo(r)))throw new A("argument-error","Invalid email link!");if(r.tenantId!==n.S())throw new A("tenant-id-mismatch");return n.Za(i)})))},vf.prototype.render=function(){},vf.prototype.reset=function(){},vf.prototype.getResponse=function(){},vf.prototype.execute=function(){};var mf=null;function gf(t,e){return(e=bf(e))&&t.a[e]||null}function bf(t){return(t=void 0===t?1e12:t)?t.toString():null}function wf(t,e){this.g=!1,this.c=e,this.a=this.b=null,this.h="invisible"!==this.c.size,this.f=se(t);var n=this;this.i=function(){n.execute()},this.h?this.execute():un(this.f,"click",this.i)}function If(t){if(t.g)throw Error("reCAPTCHA mock was already deleted!")}function Ef(){}function Tf(){}yf.prototype.render=function(t,e){return this.a[this.b.toString()]=new wf(t,e),this.b++},yf.prototype.reset=function(t){var e=gf(this,t);t=bf(t),e&&t&&(e.delete(),delete this.a[t])},yf.prototype.getResponse=function(t){return(t=gf(this,t))?t.getResponse():null},yf.prototype.execute=function(t){(t=gf(this,t))&&t.execute()},wf.prototype.getResponse=function(){return If(this),this.b},wf.prototype.execute=function(){If(this);var t=this;this.a||(this.a=setTimeout((function(){t.b=function(){for(var t=50,e=[];0<t;)e.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),t--;return e.join("")}();var e=t.c.callback,n=t.c["expired-callback"];if(e)try{e(t.b)}catch(t){}t.a=setTimeout((function(){if(t.a=null,t.b=null,n)try{n()}catch(t){}t.h&&t.execute()}),6e4)}),500))},wf.prototype.delete=function(){If(this),this.g=!0,clearTimeout(this.a),this.a=null,fn(this.f,"click",this.i)},Yr(Ef,"FACTOR_ID","phone"),Tf.prototype.g=function(){return mf||(mf=new yf),Ne(mf)},Tf.prototype.c=function(){};var _f=null;function Af(){this.b=u.grecaptcha?1/0:0,this.f=null,this.a="__rcb"+Math.floor(1e6*Math.random()).toString()}var Nf=new gt(It,"https://www.google.com/recaptcha/api.js?onload=%{onload}&render=explicit&hl=%{hl}"),Sf=new Gr(3e4,6e4);Af.prototype.g=function(t){var e=this;return new be((function(n,r){var i=setTimeout((function(){r(new A("network-request-failed"))}),Sf.get());!u.grecaptcha||t!==e.f&&!e.b?(u[e.a]=function(){if(u.grecaptcha){e.f=t;var o=u.grecaptcha.render;u.grecaptcha.render=function(t,n){return t=o(t,n),e.b++,t},clearTimeout(i),n(u.grecaptcha)}else clearTimeout(i),r(new A("internal-error"));delete u[e.a]},Ne(qs(At(Nf,{onload:e.a,hl:t||""}))).s((function(){clearTimeout(i),r(new A("internal-error","Unable to load external reCAPTCHA dependencies!"))}))):(clearTimeout(i),n(u.grecaptcha))}))},Af.prototype.c=function(){this.b--};var kf=null;function Df(t,e,n,r,i,o,s){if(Yr(this,"type","recaptcha"),this.c=this.f=null,this.A=!1,this.m=e,this.g=null,s?(_f||(_f=new Tf),s=_f):(kf||(kf=new Af),s=kf),this.v=s,this.a=n||{theme:"light",type:"image"},this.h=[],this.a[Lf])throw new A("argument-error","sitekey should not be provided for reCAPTCHA as one is automatically provisioned for the current project.");if(this.i="invisible"===this.a[Cf],!u.document)throw new A("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment with DOM support.");if(!se(e)||!this.i&&se(e).hasChildNodes())throw new A("argument-error","reCAPTCHA container is either not found or already contains inner elements!");this.o=new Xs(t,o||null,i||null),this.u=r||function(){return null};var a=this;this.l=[];var c=this.a[Of];this.a[Of]=function(t){if(Rf(a,t),"function"==typeof c)c(t);else if("string"==typeof c){var e=Dr(c,u);"function"==typeof e&&e(t)}};var h=this.a[Pf];this.a[Pf]=function(){if(Rf(a,null),"function"==typeof h)h();else if("string"==typeof h){var t=Dr(h,u);"function"==typeof t&&t()}}}var Of="callback",Pf="expired-callback",Lf="sitekey",Cf="size";function Rf(t,e){for(var n=0;n<t.l.length;n++)try{t.l[n](e)}catch(t){}}function xf(t,e){return t.h.push(e),e.na((function(){W(t.h,e)})),e}function Mf(t){if(t.A)throw new A("internal-error","RecaptchaVerifier instance has been destroyed.")}function Vf(t,e,n){var i=!1;try{this.b=n||r.Z.app()}catch(t){throw new A("argument-error","No firebase.app.App instance is currently initialized.")}if(!this.b.options||!this.b.options.apiKey)throw new A("invalid-api-key");n=this.b.options.apiKey;var o=this,s=null;try{s=this.b.auth().Ga()}catch(t){}try{i=this.b.auth().settings.appVerificationDisabledForTesting}catch(t){}s=r.Z.SDK_VERSION?Sr(r.Z.SDK_VERSION,s):null,Df.call(this,n,t,e,(function(){try{var t=o.b.auth().ka()}catch(e){t=null}return t}),s,P(S),i)}function Uf(t,e,n,r){t:{n=Array.prototype.slice.call(n);for(var i=0,o=!1,s=0;s<e.length;s++)if(e[s].optional)o=!0;else{if(o)throw new A("internal-error","Argument validator encountered a required argument after an optional argument.");i++}if(o=e.length,n.length<i||o<n.length)r="Expected "+(i==o?1==i?"1 argument":i+" arguments":i+"-"+o+" arguments")+" but got "+n.length+".";else{for(i=0;i<n.length;i++)if(o=e[i].optional&&void 0===n[i],!e[i].K(n[i])&&!o){if(e=e[i],0>i||i>=jf.length)throw new A("internal-error","Argument validator received an unsupported number of arguments.");n=jf[i],r=(r?"":n+" argument ")+(e.name?'"'+e.name+'" ':"")+"must be "+e.J+".";break t}r=null}}if(r)throw new A("argument-error",t+" failed: "+r)}(t=Df.prototype).Ia=function(){var t=this;return this.f?this.f:this.f=xf(this,Ne().then((function(){if(Lr()&&!wr())return mr();throw new A("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment.")})).then((function(){return t.v.g(t.u())})).then((function(e){return t.g=e,eu(t.o,Ua,{})})).then((function(e){t.a[Lf]=e.recaptchaSiteKey})).s((function(e){throw t.f=null,e})))},t.render=function(){Mf(this);var t=this;return xf(this,this.Ia().then((function(){if(null===t.c){var e=t.m;if(!t.i){var n=se(e);e=function(t,e,n){var r=arguments,i=document,o=String(r[0]),s=r[1];if(!oe&&s&&(s.name||s.type)){if(o=["<",o],s.name&&o.push(' name="',qt(s.name),'"'),s.type){o.push(' type="',qt(s.type),'"');var a={};yt(a,s),delete a.type,s=a}o.push(">"),o=o.join("")}return o=le(i,o),s&&("string"==typeof s?o.className=s:Array.isArray(s)?o.className=s.join(" "):ae(o,s)),2<r.length&&fe(i,o,r),o}("DIV"),n.appendChild(e)}t.c=t.g.render(e,t.a)}return t.c})))},t.verify=function(){Mf(this);var t=this;return xf(this,this.render().then((function(e){return new be((function(n){var r=t.g.getResponse(e);if(r)n(r);else{var i=function(e){e&&(function(t,e){X(t.l,(function(t){return t==e}))}(t,i),n(e))};t.l.push(i),t.i&&t.g.execute(t.c)}}))})))},t.reset=function(){Mf(this),null!==this.c&&this.g.reset(this.c)},t.clear=function(){Mf(this),this.A=!0,this.v.c();for(var t=0;t<this.h.length;t++)this.h[t].cancel("RecaptchaVerifier instance has been destroyed.");if(!this.i){t=se(this.m);for(var e;e=t.firstChild;)t.removeChild(e)}},_(Vf,Df);var jf="First Second Third Fourth Fifth Sixth Seventh Eighth Ninth".split(" ");function Ff(t,e){return{name:t||"",J:"a valid string",optional:!!e,K:function(t){return"string"==typeof t}}}function Gf(t,e){return{name:t||"",J:"a boolean",optional:!!e,K:function(t){return"boolean"==typeof t}}}function qf(t,e){return{name:t||"",J:"a valid object",optional:!!e,K:v}}function Bf(t,e){return{name:t||"",J:"a function",optional:!!e,K:function(t){return"function"==typeof t}}}function zf(t,e){return{name:t||"",J:"null",optional:!!e,K:function(t){return null===t}}}function Kf(t){return{name:t?t+"Credential":"credential",J:t?"a valid "+t+" credential":"a valid credential",optional:!1,K:function(e){if(!e)return!1;var n=!t||e.providerId===t;return!(!e.ja||!n)}}}function Hf(t,e){return v(t)&&"string"==typeof t.type&&t.type===e&&"function"==typeof t.Ha}function Jf(t){return v(t)&&"string"==typeof t.uid}function Wf(t,e,n,r){return{name:n||"",J:t.J+" or "+e.J,optional:!!r,K:function(n){return t.K(n)||e.K(n)}}}function Xf(t,e){for(var n in e){var r=e[n].name;t[r]=Qf(r,t[n],e[n].j)}}function Yf(t,e){for(var n in e){var r=e[n].name;r!==n&&Object.defineProperty(t,r,{get:E((function(t){return this[t]}),n),set:E((function(t,e,n,r){Uf(t,[n],[r],!0),this[e]=r}),r,n,e[n].jb),enumerable:!0})}}function Zf(t,e,n,r){t[e]=Qf(e,n,r)}function Qf(t,e,n){function r(){var t=Array.prototype.slice.call(arguments);return Uf(o,n,t),e.apply(this,t)}if(!n)return e;var i,o=function(t){return(t=t.split("."))[t.length-1]}(t);for(i in e)r[i]=e[i];for(i in e.prototype)r.prototype[i]=e.prototype[i];return r}Xf(ef.prototype,{ib:{name:"applyActionCode",j:[Ff("code")]},Qa:{name:"checkActionCode",j:[Ff("code")]},mb:{name:"confirmPasswordReset",j:[Ff("code"),Ff("newPassword")]},dc:{name:"createUserWithEmailAndPassword",j:[Ff("email"),Ff("password")]},gc:{name:"fetchSignInMethodsForEmail",j:[Ff("email")]},qa:{name:"getRedirectResult",j:[]},Ac:{name:"isSignInWithEmailLink",j:[Ff("emailLink")]},Gc:{name:"onAuthStateChanged",j:[Wf(qf(),Bf(),"nextOrObserver"),Bf("opt_error",!0),Bf("opt_completed",!0)]},Hc:{name:"onIdTokenChanged",j:[Wf(qf(),Bf(),"nextOrObserver"),Bf("opt_error",!0),Bf("opt_completed",!0)]},ub:{name:"sendPasswordResetEmail",j:[Ff("email"),Wf(qf("opt_actionCodeSettings",!0),zf(null,!0),"opt_actionCodeSettings",!0)]},vb:{name:"sendSignInLinkToEmail",j:[Ff("email"),qf("actionCodeSettings")]},wb:{name:"setPersistence",j:[Ff("persistence")]},Rc:{name:"signInAndRetrieveDataWithCredential",j:[Kf()]},yb:{name:"signInAnonymously",j:[]},Za:{name:"signInWithCredential",j:[Kf()]},Sc:{name:"signInWithCustomToken",j:[Ff("token")]},Tc:{name:"signInWithEmailAndPassword",j:[Ff("email"),Ff("password")]},Uc:{name:"signInWithEmailLink",j:[Ff("email"),Ff("emailLink",!0)]},Vc:{name:"signInWithPhoneNumber",j:[Ff("phoneNumber"),{name:"applicationVerifier",J:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,K:function(t){return!(!t||"string"!=typeof t.type||"function"!=typeof t.verify)}}]},Wc:{name:"signInWithPopup",j:[{name:"authProvider",J:"a valid Auth provider",optional:!1,K:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Xc:{name:"signInWithRedirect",j:[{name:"authProvider",J:"a valid Auth provider",optional:!1,K:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},cd:{name:"updateCurrentUser",j:[Wf({name:"user",J:"an instance of Firebase User",optional:!1,K:function(t){return!!(t&&t instanceof vh)}},zf(),"user")]},zb:{name:"signOut",j:[]},toJSON:{name:"toJSON",j:[Ff(null,!0)]},ed:{name:"useDeviceLanguage",j:[]},fd:{name:"useEmulator",j:[Ff("url")]},hd:{name:"verifyPasswordResetCode",j:[Ff("code")]}}),Yf(ef.prototype,{lc:{name:"languageCode",jb:Wf(Ff(),zf(),"languageCode")},ti:{name:"tenantId",jb:Wf(Ff(),zf(),"tenantId")}}),ef.Persistence=Yu,ef.Persistence.LOCAL="local",ef.Persistence.SESSION="session",ef.Persistence.NONE="none",Xf(vh.prototype,{delete:{name:"delete",j:[]},nc:{name:"getIdTokenResult",j:[Gf("opt_forceRefresh",!0)]},I:{name:"getIdToken",j:[Gf("opt_forceRefresh",!0)]},Bc:{name:"linkAndRetrieveDataWithCredential",j:[Kf()]},pb:{name:"linkWithCredential",j:[Kf()]},Cc:{name:"linkWithPhoneNumber",j:[Ff("phoneNumber"),{name:"applicationVerifier",J:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,K:function(t){return!(!t||"string"!=typeof t.type||"function"!=typeof t.verify)}}]},Dc:{name:"linkWithPopup",j:[{name:"authProvider",J:"a valid Auth provider",optional:!1,K:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Ec:{name:"linkWithRedirect",j:[{name:"authProvider",J:"a valid Auth provider",optional:!1,K:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Kc:{name:"reauthenticateAndRetrieveDataWithCredential",j:[Kf()]},sb:{name:"reauthenticateWithCredential",j:[Kf()]},Lc:{name:"reauthenticateWithPhoneNumber",j:[Ff("phoneNumber"),{name:"applicationVerifier",J:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,K:function(t){return!(!t||"string"!=typeof t.type||"function"!=typeof t.verify)}}]},Mc:{name:"reauthenticateWithPopup",j:[{name:"authProvider",J:"a valid Auth provider",optional:!1,K:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Nc:{name:"reauthenticateWithRedirect",j:[{name:"authProvider",J:"a valid Auth provider",optional:!1,K:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},reload:{name:"reload",j:[]},tb:{name:"sendEmailVerification",j:[Wf(qf("opt_actionCodeSettings",!0),zf(null,!0),"opt_actionCodeSettings",!0)]},toJSON:{name:"toJSON",j:[Ff(null,!0)]},bd:{name:"unlink",j:[Ff("provider")]},Ab:{name:"updateEmail",j:[Ff("email")]},Bb:{name:"updatePassword",j:[Ff("password")]},dd:{name:"updatePhoneNumber",j:[Kf("phone")]},Cb:{name:"updateProfile",j:[qf("profile")]},Db:{name:"verifyBeforeUpdateEmail",j:[Ff("email"),Wf(qf("opt_actionCodeSettings",!0),zf(null,!0),"opt_actionCodeSettings",!0)]}}),Xf(yf.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),Xf(vf.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),Xf(be.prototype,{na:{name:"finally"},s:{name:"catch"},then:{name:"then"}}),Yf(Jc.prototype,{appVerificationDisabled:{name:"appVerificationDisabledForTesting",jb:Gf("appVerificationDisabledForTesting")}}),Xf(Wc.prototype,{confirm:{name:"confirm",j:[Ff("verificationCode")]}}),Zf(uo,"fromJSON",(function(t){t="string"==typeof t?JSON.parse(t):t;for(var e,n=[yo,Do,Ro,lo],r=0;r<n.length;r++)if(e=n[r](t))return e;return null}),[Wf(Ff(),qf(),"json")]),Zf(Oo,"credential",(function(t,e){return new ko(t,e)}),[Ff("email"),Ff("password")]),Xf(ko.prototype,{w:{name:"toJSON",j:[Ff(null,!0)]}}),Xf(wo.prototype,{Ca:{name:"addScope",j:[Ff("scope")]},Ka:{name:"setCustomParameters",j:[qf("customOAuthParameters")]}}),Zf(wo,"credential",Io,[Wf(Ff(),qf(),"token")]),Zf(Oo,"credentialWithLink",Po,[Ff("email"),Ff("emailLink")]),Xf(Eo.prototype,{Ca:{name:"addScope",j:[Ff("scope")]},Ka:{name:"setCustomParameters",j:[qf("customOAuthParameters")]}}),Zf(Eo,"credential",To,[Wf(Ff(),qf(),"token")]),Xf(_o.prototype,{Ca:{name:"addScope",j:[Ff("scope")]},Ka:{name:"setCustomParameters",j:[qf("customOAuthParameters")]}}),Zf(_o,"credential",Ao,[Wf(Ff(),Wf(qf(),zf()),"idToken"),Wf(Ff(),zf(),"accessToken",!0)]),Xf(No.prototype,{Ka:{name:"setCustomParameters",j:[qf("customOAuthParameters")]}}),Zf(No,"credential",So,[Wf(Ff(),qf(),"token"),Ff("secret",!0)]),Xf(bo.prototype,{Ca:{name:"addScope",j:[Ff("scope")]},credential:{name:"credential",j:[Wf(Ff(),Wf(qf(),zf()),"optionsOrIdToken"),Wf(Ff(),zf(),"accessToken",!0)]},Ka:{name:"setCustomParameters",j:[qf("customOAuthParameters")]}}),Xf(po.prototype,{w:{name:"toJSON",j:[Ff(null,!0)]}}),Xf(ho.prototype,{w:{name:"toJSON",j:[Ff(null,!0)]}}),Zf(Mo,"credential",Vo,[Ff("verificationId"),Ff("verificationCode")]),Xf(Mo.prototype,{eb:{name:"verifyPhoneNumber",j:[Wf(Ff(),{name:"phoneInfoOptions",J:"valid phone info options",optional:!1,K:function(t){return!!t&&(t.session&&t.phoneNumber?Hf(t.session,so)&&"string"==typeof t.phoneNumber:t.session&&t.multiFactorHint?Hf(t.session,ao)&&Jf(t.multiFactorHint):t.session&&t.multiFactorUid?Hf(t.session,ao)&&"string"==typeof t.multiFactorUid:!!t.phoneNumber&&"string"==typeof t.phoneNumber)}},"phoneInfoOptions"),{name:"applicationVerifier",J:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,K:function(t){return!(!t||"string"!=typeof t.type||"function"!=typeof t.verify)}}]}}),Xf(Co.prototype,{w:{name:"toJSON",j:[Ff(null,!0)]}}),Xf(A.prototype,{toJSON:{name:"toJSON",j:[Ff(null,!0)]}}),Xf(Ho.prototype,{toJSON:{name:"toJSON",j:[Ff(null,!0)]}}),Xf(Ko.prototype,{toJSON:{name:"toJSON",j:[Ff(null,!0)]}}),Xf(th.prototype,{toJSON:{name:"toJSON",j:[Ff(null,!0)]}}),Xf(Zc.prototype,{Qc:{name:"resolveSignIn",j:[{name:"multiFactorAssertion",J:"a valid multiFactorAssertion",optional:!1,K:function(t){return!!t&&!!t.rb}}]}}),Xf(sh.prototype,{Qb:{name:"getSession",j:[]},ec:{name:"enroll",j:[{name:"multiFactorAssertion",J:"a valid multiFactorAssertion",optional:!1,K:function(t){return!!t&&!!t.rb}},Ff("displayName",!0)]},ad:{name:"unenroll",j:[Wf({name:"multiFactorInfo",J:"a valid multiFactorInfo",optional:!1,K:Jf},Ff(),"multiFactorInfoIdentifier")]}}),Xf(Vf.prototype,{clear:{name:"clear",j:[]},render:{name:"render",j:[]},verify:{name:"verify",j:[]}}),Zf(Ii,"parseLink",Di,[Ff("link")]),Zf(Ef,"assertion",(function(t){return new ih(t)}),[Kf("phone")]),function(){if(void 0===r.Z||!r.Z.INTERNAL||!r.Z.INTERNAL.registerComponent)throw Error("Cannot find the firebase namespace; be sure to include firebase-app.js before this library.");var t={ActionCodeInfo:{Operation:{EMAIL_SIGNIN:ci,PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:ui,VERIFY_AND_CHANGE_EMAIL:hi,VERIFY_EMAIL:"VERIFY_EMAIL"}},Auth:ef,AuthCredential:uo,Error:A};Zf(t,"EmailAuthProvider",Oo,[]),Zf(t,"FacebookAuthProvider",wo,[]),Zf(t,"GithubAuthProvider",Eo,[]),Zf(t,"GoogleAuthProvider",_o,[]),Zf(t,"TwitterAuthProvider",No,[]),Zf(t,"OAuthProvider",bo,[Ff("providerId")]),Zf(t,"SAMLAuthProvider",go,[Ff("providerId")]),Zf(t,"PhoneAuthProvider",Mo,[{name:"auth",J:"an instance of Firebase Auth",optional:!0,K:function(t){return!!(t&&t instanceof ef)}}]),Zf(t,"RecaptchaVerifier",Vf,[Wf(Ff(),{name:"",J:"an HTML element",optional:!1,K:function(t){return!!(t&&t instanceof Element)}},"recaptchaContainer"),qf("recaptchaParameters",!0),{name:"app",J:"an instance of Firebase App",optional:!0,K:function(t){return!!(t&&t instanceof r.Z.app.App)}}]),Zf(t,"ActionCodeURL",Ii,[]),Zf(t,"PhoneMultiFactorGenerator",Ef,[]),r.Z.INTERNAL.registerComponent({name:"auth",instanceFactory:function(t){return new ef(t=t.getProvider("app").getImmediate())},multipleInstances:!1,serviceProps:t,instantiationMode:"LAZY",type:"PUBLIC"}),r.Z.INTERNAL.registerComponent({name:"auth-internal",instanceFactory:function(t){return{getUid:I((t=t.getProvider("auth").getImmediate()).getUid,t),getToken:I(t.mc,t),addAuthTokenListener:I(t.cc,t),removeAuthTokenListener:I(t.Oc,t)}},multipleInstances:!1,instantiationMode:"LAZY",type:"PRIVATE"}),r.Z.registerVersion("@firebase/auth","0.15.1"),r.Z.INTERNAL.extendNamespace({User:vh})}()}).apply(void 0!==n.g?n.g:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},603:(t,e,n)=>{"use strict";var r=n(655),i=n(99),o=n(594),s=n(589),a=function(t,e){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function u(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}var c,h="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==n.g?n.g:"undefined"!=typeof self?self:{},f=f||{},l=h||self;function p(){}function d(t){var e=typeof t;return"object"!=e?e:t?Array.isArray(t)?"array":e:"null"}function v(t){var e=d(t);return"array"==e||"object"==e&&"number"==typeof t.length}function y(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var m="closure_uid_"+(1e9*Math.random()>>>0),g=0;function b(t,e,n){return t.call.apply(t.bind,arguments)}function w(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function I(t,e,n){return(I=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?b:w).apply(null,arguments)}function E(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}var T=Date.now;function _(t,e){function n(){}n.prototype=e.prototype,t.S=e.prototype,t.prototype=new n,t.prototype.constructor=t}function A(){this.j=this.j,this.i=this.i}A.prototype.j=!1,A.prototype.ja=function(){!this.j&&(this.j=!0,this.G(),0)&&function(t){Object.prototype.hasOwnProperty.call(t,m)&&t[m]||(t[m]=++g)}(this)},A.prototype.G=function(){if(this.i)for(;this.i.length;)this.i.shift()()};var N=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},S=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};function k(t){return Array.prototype.concat.apply([],arguments)}function D(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function O(t){return/^[\s\xa0]*$/.test(t)}var P,L=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function C(t,e){return-1!=t.indexOf(e)}function R(t,e){return t<e?-1:t>e?1:0}t:{var x=l.navigator;if(x){var M=x.userAgent;if(M){P=M;break t}}P=""}function V(t,e,n){for(var r in t)e.call(n,t[r],r,t)}function U(t){var e={};for(var n in t)e[n]=t[n];return e}var j="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function F(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<j.length;o++)n=j[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function G(t){return G[" "](t),t}G[" "]=p;var q,B,z=C(P,"Opera"),K=C(P,"Trident")||C(P,"MSIE"),H=C(P,"Edge"),J=H||K,W=C(P,"Gecko")&&!(C(P.toLowerCase(),"webkit")&&!C(P,"Edge"))&&!(C(P,"Trident")||C(P,"MSIE"))&&!C(P,"Edge"),X=C(P.toLowerCase(),"webkit")&&!C(P,"Edge");function Y(){var t=l.document;return t?t.documentMode:void 0}t:{var Z="",Q=(B=P,W?/rv:([^\);]+)(\)|;)/.exec(B):H?/Edge\/([\d\.]+)/.exec(B):K?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(B):X?/WebKit\/(\S+)/.exec(B):z?/(?:Version)[ \/]?(\S+)/.exec(B):void 0);if(Q&&(Z=Q?Q[1]:""),K){var $=Y();if(null!=$&&$>parseFloat(Z)){q=String($);break t}}q=Z}var tt,et={};function nt(t){return function(t,e){var n=et;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e()}(t,(function(){for(var e=0,n=L(String(q)).split("."),r=L(String(t)).split("."),i=Math.max(n.length,r.length),o=0;0==e&&o<i;o++){var s=n[o]||"",a=r[o]||"";do{if(s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==s[0].length&&0==a[0].length)break;e=R(0==s[1].length?0:parseInt(s[1],10),0==a[1].length?0:parseInt(a[1],10))||R(0==s[2].length,0==a[2].length)||R(s[2],a[2]),s=s[3],a=a[3]}while(0==e)}return 0<=e}))}l.document&&K?tt=Y()||parseInt(q,10)||void 0:tt=void 0;var rt=tt,it=!K||9<=Number(rt),ot=K&&!nt("9"),st=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{l.addEventListener("test",p,e),l.removeEventListener("test",p,e)}catch(t){}return t}();function at(t,e){this.type=t,this.a=this.target=e,this.defaultPrevented=!1}function ut(t,e){if(at.call(this,t?t.type:""),this.relatedTarget=this.a=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.c=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.a=e,e=t.relatedTarget){if(W){t:{try{G(e.nodeName);var i=!0;break t}catch(t){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:ct[t.pointerType]||"",this.c=t,t.defaultPrevented&&this.b()}}at.prototype.b=function(){this.defaultPrevented=!0},_(ut,at);var ct={2:"touch",3:"pen",4:"mouse"};ut.prototype.b=function(){ut.S.b.call(this);var t=this.c;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,ot)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(t){}};var ht="closure_listenable_"+(1e6*Math.random()|0),ft=0;function lt(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.ca=i,this.key=++ft,this.Y=this.Z=!1}function pt(t){t.Y=!0,t.listener=null,t.proxy=null,t.src=null,t.ca=null}function dt(t){this.src=t,this.a={},this.b=0}function vt(t,e){var n=e.type;if(n in t.a){var r,i=t.a[n],o=N(i,e);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(pt(e),0==t.a[n].length&&(delete t.a[n],t.b--))}}function yt(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.Y&&o.listener==e&&o.capture==!!n&&o.ca==r)return i}return-1}dt.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var s=yt(t,e,r,i);return-1<s?(e=t[s],n||(e.Z=!1)):((e=new lt(e,this.src,o,!!r,i)).Z=n,t.push(e)),e};var mt="closure_lm_"+(1e6*Math.random()|0),gt={};function bt(t,e,n,r,i){if(r&&r.once)return It(t,e,n,r,i);if(Array.isArray(e)){for(var o=0;o<e.length;o++)bt(t,e[o],n,r,i);return null}return n=Dt(n),t&&t[ht]?t.va(e,n,y(r)?!!r.capture:!!r,i):wt(t,e,n,!1,r,i)}function wt(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var s=y(i)?!!i.capture:!!i;if(s&&!it)return null;var a=St(t);if(a||(t[mt]=a=new dt(t)),(n=a.add(e,n,r,s,o)).proxy)return n;if(r=function(){var t=Nt,e=it?function(n){return t.call(e.src,e.listener,n)}:function(n){if(!(n=t.call(e.src,e.listener,n)))return n};return e}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)st||(i=s),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(_t(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function It(t,e,n,r,i){if(Array.isArray(e)){for(var o=0;o<e.length;o++)It(t,e[o],n,r,i);return null}return n=Dt(n),t&&t[ht]?t.wa(e,n,y(r)?!!r.capture:!!r,i):wt(t,e,n,!0,r,i)}function Et(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)Et(t,e[o],n,r,i);else r=y(r)?!!r.capture:!!r,n=Dt(n),t&&t[ht]?(t=t.c,(e=String(e).toString())in t.a&&-1<(n=yt(o=t.a[e],n,r,i))&&(pt(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.a[e],t.b--))):t&&(t=St(t))&&(e=t.a[e.toString()],t=-1,e&&(t=yt(e,n,r,i)),(n=-1<t?e[t]:null)&&Tt(n))}function Tt(t){if("number"!=typeof t&&t&&!t.Y){var e=t.src;if(e&&e[ht])vt(e.c,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(_t(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=St(e))?(vt(n,t),0==n.b&&(n.src=null,e[mt]=null)):pt(t)}}}function _t(t){return t in gt?gt[t]:gt[t]="on"+t}function At(t,e){var n=t.listener,r=t.ca||t.src;return t.Z&&Tt(t),n.call(r,e)}function Nt(t,e){if(t.Y)return!0;if(!it){if(!e)t:{e=["window","event"];for(var n=l,r=0;r<e.length;r++)if(null==(n=n[e[r]])){e=null;break t}e=n}return At(t,e=new ut(e,this))}return At(t,new ut(e,this))}function St(t){return(t=t[mt])instanceof dt?t:null}var kt="__closure_events_fn_"+(1e9*Math.random()>>>0);function Dt(t){return"function"==d(t)?t:(t[kt]||(t[kt]=function(e){return t.handleEvent(e)}),t[kt])}function Ot(){A.call(this),this.c=new dt(this),this.J=this,this.C=null}function Pt(t,e,n,r){if(!(e=t.c.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s=e[o];if(s&&!s.Y&&s.capture==n){var a=s.listener,u=s.ca||s.src;s.Z&&vt(t.c,s),i=!1!==a.call(u,r)&&i}}return i&&!r.defaultPrevented}_(Ot,A),Ot.prototype[ht]=!0,(c=Ot.prototype).addEventListener=function(t,e,n,r){bt(this,t,e,n,r)},c.removeEventListener=function(t,e,n,r){Et(this,t,e,n,r)},c.dispatchEvent=function(t){var e,n=this.C;if(n)for(e=[];n;n=n.C)e.push(n);n=this.J;var r=t.type||t;if("string"==typeof t)t=new at(t,n);else if(t instanceof at)t.target=t.target||n;else{var i=t;F(t=new at(r,n),i)}if(i=!0,e)for(var o=e.length-1;0<=o;o--){var s=t.a=e[o];i=Pt(s,r,!0,t)&&i}if(i=Pt(s=t.a=n,r,!0,t)&&i,i=Pt(s,r,!1,t)&&i,e)for(o=0;o<e.length;o++)i=Pt(s=t.a=e[o],r,!1,t)&&i;return i},c.G=function(){if(Ot.S.G.call(this),this.c){var t,e=this.c;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)pt(n[r]);delete e.a[t],e.b--}}this.C=null},c.va=function(t,e,n,r){return this.c.add(String(t),e,!1,n,r)},c.wa=function(t,e,n,r){return this.c.add(String(t),e,!0,n,r)};var Lt=l.JSON.stringify;function Ct(){this.b=this.a=null}var Rt,xt=new(function(){function t(t,e,n){this.f=n,this.c=t,this.g=e,this.b=0,this.a=null}return t.prototype.get=function(){var t;return 0<this.b?(this.b--,t=this.a,this.a=t.next,t.next=null):t=this.c(),t},t}())((function(){return new Vt}),(function(t){t.reset()}),100);function Mt(){var t=Gt,e=null;return t.a&&(e=t.a,t.a=t.a.next,t.a||(t.b=null),e.next=null),e}function Vt(){this.next=this.b=this.a=null}function Ut(t){l.setTimeout((function(){throw t}),0)}function jt(t,e){Rt||function(){var t=l.Promise.resolve(void 0);Rt=function(){t.then(qt)}}(),Ft||(Rt(),Ft=!0),Gt.add(t,e)}Ct.prototype.add=function(t,e){var n=xt.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},Vt.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},Vt.prototype.reset=function(){this.next=this.b=this.a=null};var Ft=!1,Gt=new Ct;function qt(){for(var t;t=Mt();){try{t.a.call(t.b)}catch(t){Ut(t)}var e=xt;e.g(t),e.b<e.f&&(e.b++,t.next=e.a,e.a=t)}Ft=!1}function Bt(t,e){Ot.call(this),this.b=t||1,this.a=e||l,this.f=I(this.Ya,this),this.g=T()}function zt(t){t.aa=!1,t.M&&(t.a.clearTimeout(t.M),t.M=null)}function Kt(t,e,n){if("function"==d(t))n&&(t=I(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=I(t.handleEvent,t)}return 2147483647<Number(e)?-1:l.setTimeout(t,e||0)}function Ht(t){t.a=Kt((function(){t.a=null,t.c&&(t.c=!1,Ht(t))}),t.h);var e=t.b;t.b=null,t.g.apply(null,e)}_(Bt,Ot),(c=Bt.prototype).aa=!1,c.M=null,c.Ya=function(){if(this.aa){var t=T()-this.g;0<t&&t<.8*this.b?this.M=this.a.setTimeout(this.f,this.b-t):(this.M&&(this.a.clearTimeout(this.M),this.M=null),this.dispatchEvent("tick"),this.aa&&(zt(this),this.start()))}},c.start=function(){this.aa=!0,this.M||(this.M=this.a.setTimeout(this.f,this.b),this.g=T())},c.G=function(){Bt.S.G.call(this),zt(this),delete this.a};var Jt=function(t){function e(e,n,r){var i=t.call(this)||this;return i.g=null!=r?e.bind(r):e,i.h=n,i.b=null,i.c=!1,i.a=null,i}return function(t,e){function n(){this.constructor=t}a(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e.prototype.f=function(t){this.b=arguments,this.a?this.c=!0:Ht(this)},e.prototype.G=function(){t.prototype.G.call(this),this.a&&(l.clearTimeout(this.a),this.a=null,this.c=!1,this.b=null)},e}(A);function Wt(t){A.call(this),this.b=t,this.a={}}_(Wt,A);var Xt=[];function Yt(t,e,n,r){Array.isArray(n)||(n&&(Xt[0]=n.toString()),n=Xt);for(var i=0;i<n.length;i++){var o=bt(e,n[i],r||t.handleEvent,!1,t.b||t);if(!o)break;t.a[o.key]=o}}function Zt(t){V(t.a,(function(t,e){this.a.hasOwnProperty(e)&&Tt(t)}),t),t.a={}}function Qt(){this.a=!0}function $t(t,e,n,r){t.info((function(){return"XMLHTTP TEXT ("+e+"): "+function(t,e){if(!t.a)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var s=1;s<i.length;s++)i[s]=""}}}return Lt(n)}catch(t){return e}}(t,n)+(r?" "+r:"")}))}Wt.prototype.G=function(){Wt.S.G.call(this),Zt(this)},Wt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Qt.prototype.info=function(){};var te=null;function ee(){return te=te||new Ot}function ne(t){at.call(this,"serverreachability",t)}function re(t){var e=ee();e.dispatchEvent(new ne(e,t))}function ie(t){at.call(this,"statevent",t)}function oe(t){var e=ee();e.dispatchEvent(new ie(e,t))}function se(t){at.call(this,"timingevent",t)}function ae(t,e){if("function"!=d(t))throw Error("Fn must not be null and must be a function");return l.setTimeout((function(){t()}),e)}_(ne,at),_(ie,at),_(se,at);var ue={NO_ERROR:0,Za:1,gb:2,fb:3,bb:4,eb:5,hb:6,Da:7,TIMEOUT:8,kb:9},ce={ab:"complete",ob:"success",Ea:"error",Da:"abort",mb:"ready",nb:"readystatechange",TIMEOUT:"timeout",ib:"incrementaldata",lb:"progress",cb:"downloadprogress",pb:"uploadprogress"};function he(){}function fe(t){var e;return(e=t.a)||(e=t.a={}),e}function le(){}he.prototype.a=null;var pe,de={OPEN:"a",$a:"b",Ea:"c",jb:"d"};function ve(){at.call(this,"d")}function ye(){at.call(this,"c")}function me(){}function ge(t,e,n,r){this.g=t,this.c=e,this.f=n,this.T=r||1,this.J=new Wt(this),this.P=be,t=J?125:void 0,this.R=new Bt(t),this.B=null,this.b=!1,this.j=this.l=this.i=this.H=this.u=this.U=this.o=null,this.s=[],this.a=null,this.D=0,this.h=this.m=null,this.N=-1,this.A=!1,this.O=0,this.F=null,this.W=this.C=this.V=this.I=!1}_(ve,at),_(ye,at),_(me,he),pe=new me;var be=45e3,we={},Ie={};function Ee(t,e,n){t.H=1,t.i=ze(Ue(e)),t.j=n,t.I=!0,Te(t,null)}function Te(t,e){t.u=T(),Ne(t),t.l=Ue(t.i);var n=t.l,r=t.T;Array.isArray(r)||(r=[String(r)]),rn(n.b,"t",r),t.D=0,t.a=Qn(t.g,t.g.C?e:null),0<t.O&&(t.F=new Jt(I(t.Ca,t,t.a),t.O)),Yt(t.J,t.a,"readystatechange",t.Wa),e=t.B?U(t.B):{},t.j?(t.m||(t.m="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.a.ba(t.l,t.m,t.j,e)):(t.m="GET",t.a.ba(t.l,t.m,null,e)),re(1),function(t,e,n,r,i,o){t.info((function(){if(t.a)if(o)for(var s="",a=o.split("&"),u=0;u<a.length;u++){var c=a[u].split("=");if(1<c.length){var h=c[0];c=c[1];var f=h.split("_");s=2<=f.length&&"type"==f[1]?s+(h+"=")+c+"&":s+(h+"=redacted&")}}else s=null;else s=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+n+"\n"+s}))}(t.c,t.m,t.l,t.f,t.T,t.j)}function _e(t,e,n){for(var r=!0;!t.A&&t.D<n.length;){var i=Ae(t,n);if(i==Ie){4==e&&(t.h=4,oe(14),r=!1),$t(t.c,t.f,null,"[Incomplete Response]");break}if(i==we){t.h=4,oe(15),$t(t.c,t.f,n,"[Invalid Chunk]"),r=!1;break}$t(t.c,t.f,i,null),Pe(t,i)}4==e&&0==n.length&&(t.h=1,oe(16),r=!1),t.b=t.b&&r,r?0<n.length&&!t.W&&(t.W=!0,(e=t.g).a==t&&e.V&&!e.F&&(e.c.info("Great, no buffering proxy detected. Bytes received: "+n.length),zn(e),e.F=!0)):($t(t.c,t.f,n,"[Invalid Chunked Response]"),Oe(t),De(t))}function Ae(t,e){var n=t.D,r=e.indexOf("\n",n);return-1==r?Ie:(n=Number(e.substring(n,r)),isNaN(n)?we:(r+=1)+n>e.length?Ie:(e=e.substr(r,n),t.D=r+n,e))}function Ne(t){t.U=T()+t.P,Se(t,t.P)}function Se(t,e){if(null!=t.o)throw Error("WatchDog timer not null");t.o=ae(I(t.Ua,t),e)}function ke(t){t.o&&(l.clearTimeout(t.o),t.o=null)}function De(t){0==t.g.v||t.A||Jn(t.g,t)}function Oe(t){ke(t);var e=t.F;e&&"function"==typeof e.ja&&e.ja(),t.F=null,zt(t.R),Zt(t.J),t.a&&(e=t.a,t.a=null,e.abort(),e.ja())}function Pe(t,e){try{var n=t.g;if(0!=n.v&&(n.a==t||fn(n.b,t)))if(n.I=t.N,!t.C&&fn(n.b,t)&&3==n.v){try{var r=n.ka.a.parse(e)}catch(t){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){t:if(!n.j){if(n.a){if(!(n.a.u+3e3<t.u))break t;Hn(n),xn(n)}Bn(n),oe(18)}}else n.oa=i[1],0<n.oa-n.P&&37500>i[2]&&n.H&&0==n.o&&!n.m&&(n.m=ae(I(n.Ra,n),6e3));if(1>=hn(n.b)&&n.ea){try{n.ea()}catch(t){}n.ea=void 0}}else Xn(n,11)}else if((t.C||n.a==t)&&Hn(n),!O(e))for(e=r=n.ka.a.parse(e),r=0;r<e.length;r++)if(i=e[r],n.P=i[0],i=i[1],2==n.v)if("c"==i[0]){n.J=i[1],n.ga=i[2];var o=i[3];null!=o&&(n.ha=o,n.c.info("VER="+n.ha));var s=i[4];null!=s&&(n.pa=s,n.c.info("SVER="+n.pa));var a=i[5];if(null!=a&&"number"==typeof a&&0<a){var u=1.5*a;n.D=u,n.c.info("backChannelRequestTimeoutMs_="+u)}u=n;var c=t.a;if(c){var h=c.a?c.a.getResponseHeader("X-Client-Wire-Protocol"):null;if(h){var f=u.b;!f.a&&(C(h,"spdy")||C(h,"quic")||C(h,"h2"))&&(f.f=f.g,f.a=new Set,f.b&&(ln(f,f.b),f.b=null))}if(u.A){var l=c.a?c.a.getResponseHeader("X-HTTP-Session-Id"):null;l&&(u.na=l,Be(u.B,u.A,l))}}n.v=3,n.f&&n.f.ta(),n.V&&(n.N=T()-t.u,n.c.info("Handshake RTT: "+n.N+"ms"));var p=t;if((u=n).la=Zn(u,u.C?u.ga:null,u.fa),p.C){pn(u.b,p);var d=p,v=u.D;v&&d.setTimeout(v),d.o&&(ke(d),Ne(d)),u.a=p}else qn(u);0<n.g.length&&Un(n)}else"stop"!=i[0]&&"close"!=i[0]||Xn(n,7);else 3==n.v&&("stop"==i[0]||"close"==i[0]?"stop"==i[0]?Xn(n,7):Rn(n):"noop"!=i[0]&&n.f&&n.f.sa(i),n.o=0);re(4)}catch(t){}}function Le(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(v(t)||"string"==typeof t)S(t,e,void 0);else{if(t.L&&"function"==typeof t.L)var n=t.L();else if(t.K&&"function"==typeof t.K)n=void 0;else if(v(t)||"string"==typeof t){n=[];for(var r=t.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,t)n[r++]=i;i=(r=function(t){if(t.K&&"function"==typeof t.K)return t.K();if("string"==typeof t)return t.split("");if(v(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t)).length;for(var o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}}function Ce(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof Ce)for(n=t.L(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function Re(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];xe(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)xe(i,r=t.a[e])||(t.a[n++]=r,i[r]=1),e++;t.a.length=n}}function xe(t,e){return Object.prototype.hasOwnProperty.call(t,e)}(c=ge.prototype).setTimeout=function(t){this.P=t},c.Wa=function(t){t=t.target;var e=this.F;e&&3==On(t)?e.f():this.Ca(t)},c.Ca=function(t){try{if(t==this.a)t:{var e=On(this.a),n=this.a.ua(),r=this.a.X();if(!(3>e||3==e&&!J&&!this.a.$())){this.A||4!=e||7==n||re(8==n||0>=r?3:2),ke(this);var i=this.a.X();this.N=i;var o=this.a.$();if(this.b=200==i,function(t,e,n,r,i,o,s){t.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+n+"\n"+o+" "+s}))}(this.c,this.m,this.l,this.f,this.T,e,i),this.b){if(this.V&&!this.C){e:{if(this.a){var s,a=this.a;if((s=a.a?a.a.getResponseHeader("X-HTTP-Initial-Response"):null)&&!O(s)){var u=s;break e}}u=null}if(!u){this.b=!1,this.h=3,oe(12),Oe(this),De(this);break t}$t(this.c,this.f,u,"Initial handshake response via X-HTTP-Initial-Response"),this.C=!0,Pe(this,u)}this.I?(_e(this,e,o),J&&this.b&&3==e&&(Yt(this.J,this.R,"tick",this.Va),this.R.start())):($t(this.c,this.f,o,null),Pe(this,o)),4==e&&Oe(this),this.b&&!this.A&&(4==e?Jn(this.g,this):(this.b=!1,Ne(this)))}else 400==i&&0<o.indexOf("Unknown SID")?(this.h=3,oe(12)):(this.h=0,oe(13)),Oe(this),De(this)}}}catch(t){}},c.Va=function(){if(this.a){var t=On(this.a),e=this.a.$();this.D<e.length&&(ke(this),_e(this,t,e),this.b&&4!=t&&Ne(this))}},c.cancel=function(){this.A=!0,Oe(this)},c.Ua=function(){this.o=null;var t=T();0<=t-this.U?(function(t,e){t.info((function(){return"TIMEOUT: "+e}))}(this.c,this.l),2!=this.H&&(re(3),oe(17)),Oe(this),this.h=2,De(this)):Se(this,this.U-t)},(c=Ce.prototype).K=function(){Re(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},c.L=function(){return Re(this),this.a.concat()},c.get=function(t,e){return xe(this.b,t)?this.b[t]:e},c.set=function(t,e){xe(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},c.forEach=function(t,e){for(var n=this.L(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var Me=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Ve(t,e){if(this.c=this.j=this.f="",this.h=null,this.i=this.g="",this.a=!1,t instanceof Ve){this.a=void 0!==e?e:t.a,je(this,t.f),this.j=t.j,Fe(this,t.c),Ge(this,t.h),this.g=t.g,e=t.b;var n=new $e;n.c=e.c,e.a&&(n.a=new Ce(e.a),n.b=e.b),qe(this,n),this.i=t.i}else t&&(n=String(t).match(Me))?(this.a=!!e,je(this,n[1]||"",!0),this.j=Ke(n[2]||""),Fe(this,n[3]||"",!0),Ge(this,n[4]),this.g=Ke(n[5]||"",!0),qe(this,n[6]||"",!0),this.i=Ke(n[7]||"")):(this.a=!!e,this.b=new $e(null,this.a))}function Ue(t){return new Ve(t)}function je(t,e,n){t.f=n?Ke(e,!0):e,t.f&&(t.f=t.f.replace(/:$/,""))}function Fe(t,e,n){t.c=n?Ke(e,!0):e}function Ge(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.h=e}else t.h=null}function qe(t,e,n){e instanceof $e?(t.b=e,function(t,e){e&&!t.f&&(tn(t),t.c=null,t.a.forEach((function(t,e){var n=e.toLowerCase();e!=n&&(en(this,e),rn(this,n,t))}),t)),t.f=e}(t.b,t.a)):(n||(e=He(e,Ze)),t.b=new $e(e,t.a))}function Be(t,e,n){t.b.set(e,n)}function ze(t){return Be(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^T()).toString(36)),t}function Ke(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function He(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,Je),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function Je(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}Ve.prototype.toString=function(){var t=[],e=this.f;e&&t.push(He(e,We,!0),":");var n=this.c;return(n||"file"==e)&&(t.push("//"),(e=this.j)&&t.push(He(e,We,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.h)&&t.push(":",String(n))),(n=this.g)&&(this.c&&"/"!=n.charAt(0)&&t.push("/"),t.push(He(n,"/"==n.charAt(0)?Ye:Xe,!0))),(n=this.b.toString())&&t.push("?",n),(n=this.i)&&t.push("#",He(n,Qe)),t.join("")};var We=/[#\/\?@]/g,Xe=/[#\?:]/g,Ye=/[#\?]/g,Ze=/[#\?@]/g,Qe=/#/g;function $e(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function tn(t){t.a||(t.a=new Ce,t.b=0,t.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.c,(function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)})))}function en(t,e){tn(t),e=on(t,e),xe(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,xe((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&Re(t)))}function nn(t,e){return tn(t),e=on(t,e),xe(t.a.b,e)}function rn(t,e,n){en(t,e),0<n.length&&(t.c=null,t.a.set(on(t,e),D(n)),t.b+=n.length)}function on(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}function sn(t,e){this.b=t,this.a=e}function an(t){this.g=t||un,t=l.PerformanceNavigationTiming?0<(t=l.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):!!(l.ia&&l.ia.ya&&l.ia.ya()&&l.ia.ya().qb),this.f=t?this.g:1,this.a=null,1<this.f&&(this.a=new Set),this.b=null,this.c=[]}(c=$e.prototype).add=function(t,e){tn(this),this.c=null,t=on(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},c.forEach=function(t,e){tn(this),this.a.forEach((function(n,r){S(n,(function(n){t.call(e,n,r,this)}),this)}),this)},c.L=function(){tn(this);for(var t=this.a.K(),e=this.a.L(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},c.K=function(t){tn(this);var e=[];if("string"==typeof t)nn(this,t)&&(e=k(e,this.a.get(on(this,t))));else{t=this.a.K();for(var n=0;n<t.length;n++)e=k(e,t[n])}return e},c.set=function(t,e){return tn(this),this.c=null,nn(this,t=on(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},c.get=function(t,e){return t&&0<(t=this.K(t)).length?String(t[0]):e},c.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.L(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.K(r);for(var o=0;o<r.length;o++){var s=i;""!==r[o]&&(s+="="+encodeURIComponent(String(r[o]))),t.push(s)}}return this.c=t.join("&")};var un=10;function cn(t){return!!t.b||!!t.a&&t.a.size>=t.f}function hn(t){return t.b?1:t.a?t.a.size:0}function fn(t,e){return t.b?t.b==e:!!t.a&&t.a.has(e)}function ln(t,e){t.a?t.a.add(e):t.b=e}function pn(t,e){t.b&&t.b==e?t.b=null:t.a&&t.a.has(e)&&t.a.delete(e)}function dn(t){var e,n;if(null!=t.b)return t.c.concat(t.b.s);if(null!=t.a&&0!==t.a.size){var r=t.c;try{for(var i=u(t.a.values()),o=i.next();!o.done;o=i.next()){var s=o.value;r=r.concat(s.s)}}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}return D(t.c)}function vn(){}function yn(){this.a=new vn}function mn(t,e,n){var r=n||"";try{Le(t,(function(t,n){var i=t;y(t)&&(i=Lt(t)),e.push(r+n+"="+encodeURIComponent(i))}))}catch(t){throw e.push(r+"type="+encodeURIComponent("_badmap")),t}}function gn(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(t){}}an.prototype.cancel=function(){var t,e;if(this.c=dn(this),this.b)this.b.cancel(),this.b=null;else if(this.a&&0!==this.a.size){try{for(var n=u(this.a.values()),r=n.next();!r.done;r=n.next())r.value.cancel()}catch(e){t={error:e}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}this.a.clear()}},vn.prototype.stringify=function(t){return l.JSON.stringify(t,void 0)},vn.prototype.parse=function(t){return l.JSON.parse(t,void 0)};var bn=l.JSON.parse;function wn(t){Ot.call(this),this.headers=new Ce,this.H=t||null,this.b=!1,this.s=this.a=null,this.B="",this.h=0,this.f="",this.g=this.A=this.l=this.u=!1,this.o=0,this.m=null,this.I=In,this.D=this.F=!1}_(wn,Ot);var In="",En=/^https?$/i,Tn=["POST","PUT"];function _n(t){return"content-type"==t.toLowerCase()}function An(t,e){t.b=!1,t.a&&(t.g=!0,t.a.abort(),t.g=!1),t.f=e,t.h=5,Nn(t),kn(t)}function Nn(t){t.u||(t.u=!0,t.dispatchEvent("complete"),t.dispatchEvent("error"))}function Sn(t){if(t.b&&void 0!==f&&(!t.s[1]||4!=On(t)||2!=t.X()))if(t.l&&4==On(t))Kt(t.za,0,t);else if(t.dispatchEvent("readystatechange"),4==On(t)){t.b=!1;try{var e,n=t.X();t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var o=String(t.B).match(Me)[1]||null;if(!o&&l.self&&l.self.location){var s=l.self.location.protocol;o=s.substr(0,s.length-1)}i=!En.test(o?o.toLowerCase():"")}e=i}if(e)t.dispatchEvent("complete"),t.dispatchEvent("success");else{t.h=6;try{var a=2<On(t)?t.a.statusText:""}catch(t){a=""}t.f=a+" ["+t.X()+"]",Nn(t)}}finally{kn(t)}}}function kn(t,e){if(t.a){Dn(t);var n=t.a,r=t.s[0]?p:null;t.a=null,t.s=null,e||t.dispatchEvent("ready");try{n.onreadystatechange=r}catch(t){}}}function Dn(t){t.a&&t.D&&(t.a.ontimeout=null),t.m&&(l.clearTimeout(t.m),t.m=null)}function On(t){return t.a?t.a.readyState:0}function Pn(t,e,n){t:{for(r in n){var r=!1;break t}r=!0}r||(n=function(t){var e="";return V(t,(function(t,n){e+=n,e+=":",e+=t,e+="\r\n"})),e}(n),"string"==typeof t?null!=n&&encodeURIComponent(String(n)):Be(t,e,n))}function Ln(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function Cn(t){this.pa=0,this.g=[],this.c=new Qt,this.ga=this.la=this.B=this.fa=this.a=this.na=this.A=this.W=this.i=this.O=this.l=null,this.La=this.R=0,this.Ia=Ln("failFast",!1,t),this.H=this.m=this.j=this.h=this.f=null,this.T=!0,this.I=this.oa=this.P=-1,this.U=this.o=this.u=0,this.Fa=Ln("baseRetryDelayMs",5e3,t),this.Ma=Ln("retryDelaySeedMs",1e4,t),this.Ja=Ln("forwardChannelMaxRetries",2,t),this.ma=Ln("forwardChannelRequestTimeoutMs",2e4,t),this.Ka=t&&t.g||void 0,this.D=void 0,this.C=t&&t.supportsCrossDomainXhr||!1,this.J="",this.b=new an(t&&t.concurrentRequestLimit),this.ka=new yn,this.da=t&&t.fastHandshake||!1,this.Ga=t&&t.b||!1,t&&t.f&&(this.c.a=!1),t&&t.forceLongPolling&&(this.T=!1),this.V=!this.da&&this.T&&t&&t.c||!1,this.ea=void 0,this.N=0,this.F=!1,this.s=null}function Rn(t){if(Mn(t),3==t.v){var e=t.R++,n=Ue(t.B);Be(n,"SID",t.J),Be(n,"RID",e),Be(n,"TYPE","terminate"),Fn(t,n),(e=new ge(t,t.c,e,void 0)).H=2,e.i=ze(Ue(n)),n=!1,l.navigator&&l.navigator.sendBeacon&&(n=l.navigator.sendBeacon(e.i.toString(),"")),!n&&l.Image&&((new Image).src=e.i,n=!0),n||(e.a=Qn(e.g,null),e.a.ba(e.i)),e.u=T(),Ne(e)}Yn(t)}function xn(t){t.a&&(zn(t),t.a.cancel(),t.a=null)}function Mn(t){xn(t),t.j&&(l.clearTimeout(t.j),t.j=null),Hn(t),t.b.cancel(),t.h&&("number"==typeof t.h&&l.clearTimeout(t.h),t.h=null)}function Vn(t,e){t.g.push(new sn(t.La++,e)),3==t.v&&Un(t)}function Un(t){cn(t.b)||t.h||(t.h=!0,jt(t.Ba,t),t.u=0)}function jn(t,e){var n;n=e?e.f:t.R++;var r=Ue(t.B);Be(r,"SID",t.J),Be(r,"RID",n),Be(r,"AID",t.P),Fn(t,r),t.i&&t.l&&Pn(r,t.i,t.l),n=new ge(t,t.c,n,t.u+1),null===t.i&&(n.B=t.l),e&&(t.g=e.s.concat(t.g)),e=Gn(t,n,1e3),n.setTimeout(Math.round(.5*t.ma)+Math.round(.5*t.ma*Math.random())),ln(t.b,n),Ee(n,r,e)}function Fn(t,e){t.f&&Le({},(function(t,n){Be(e,n,t)}))}function Gn(t,e,n){n=Math.min(t.g.length,n);var r=t.f?I(t.f.Ha,t.f,t):null;t:for(var i=t.g,o=-1;;){var s=["count="+n];-1==o?0<n?(o=i[0].b,s.push("ofs="+o)):o=0:s.push("ofs="+o);for(var a=!0,u=0;u<n;u++){var c=i[u].b,h=i[u].a;if(0>(c-=o))o=Math.max(0,i[u].b-100),a=!1;else try{mn(h,s,"req"+c+"_")}catch(t){r&&r(h)}}if(a){r=s.join("&");break t}}return t=t.g.splice(0,n),e.s=t,r}function qn(t){t.a||t.j||(t.U=1,jt(t.Aa,t),t.o=0)}function Bn(t){return!(t.a||t.j||3<=t.o||(t.U++,t.j=ae(I(t.Aa,t),Wn(t,t.o)),t.o++,0))}function zn(t){null!=t.s&&(l.clearTimeout(t.s),t.s=null)}function Kn(t){t.a=new ge(t,t.c,"rpc",t.U),null===t.i&&(t.a.B=t.l),t.a.O=0;var e=Ue(t.la);Be(e,"RID","rpc"),Be(e,"SID",t.J),Be(e,"CI",t.H?"0":"1"),Be(e,"AID",t.P),Fn(t,e),Be(e,"TYPE","xmlhttp"),t.i&&t.l&&Pn(e,t.i,t.l),t.D&&t.a.setTimeout(t.D);var n=t.a;t=t.ga,n.H=1,n.i=ze(Ue(e)),n.j=null,n.I=!0,Te(n,t)}function Hn(t){null!=t.m&&(l.clearTimeout(t.m),t.m=null)}function Jn(t,e){var n=null;if(t.a==e){Hn(t),zn(t),t.a=null;var r=2}else{if(!fn(t.b,e))return;n=e.s,pn(t.b,e),r=1}if(t.I=e.N,0!=t.v)if(e.b)if(1==r){n=e.j?e.j.length:0,e=T()-e.u;var i=t.u;(r=ee()).dispatchEvent(new se(r,n,e,i)),Un(t)}else qn(t);else if(3==(i=e.h)||0==i&&0<t.I||!(1==r&&function(t,e){return!(hn(t.b)>=t.b.f-(t.h?1:0)||(t.h?(t.g=e.s.concat(t.g),0):1==t.v||2==t.v||t.u>=(t.Ia?0:t.Ja)||(t.h=ae(I(t.Ba,t,e),Wn(t,t.u)),t.u++,0)))}(t,e)||2==r&&Bn(t)))switch(n&&0<n.length&&(e=t.b,e.c=e.c.concat(n)),i){case 1:Xn(t,5);break;case 4:Xn(t,10);break;case 3:Xn(t,6);break;default:Xn(t,2)}}function Wn(t,e){var n=t.Fa+Math.floor(Math.random()*t.Ma);return t.f||(n*=2),n*e}function Xn(t,e){if(t.c.info("Error code "+e),2==e){var n=null;t.f&&(n=null);var r=I(t.Xa,t);n||(n=new Ve("//www.google.com/images/cleardot.gif"),l.location&&"http"==l.location.protocol||je(n,"https"),ze(n)),function(t,e){var n=new Qt;if(l.Image){var r=new Image;r.onload=E(gn,n,r,"TestLoadImage: loaded",!0,e),r.onerror=E(gn,n,r,"TestLoadImage: error",!1,e),r.onabort=E(gn,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=E(gn,n,r,"TestLoadImage: timeout",!1,e),l.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=t}else e(!1)}(n.toString(),r)}else oe(2);t.v=0,t.f&&t.f.ra(e),Yn(t),Mn(t)}function Yn(t){t.v=0,t.I=-1,t.f&&(0==dn(t.b).length&&0==t.g.length||(t.b.c.length=0,D(t.g),t.g.length=0),t.f.qa())}function Zn(t,e,n){var r=function(t){return t instanceof Ve?Ue(t):new Ve(t,void 0)}(n);if(""!=r.c)e&&Fe(r,e+"."+r.c),Ge(r,r.h);else{var i=l.location;r=function(t,e,n,r){var i=new Ve(null,void 0);return t&&je(i,t),e&&Fe(i,e),n&&Ge(i,n),r&&(i.g=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,n)}return t.W&&V(t.W,(function(t,e){Be(r,e,t)})),e=t.A,n=t.na,e&&n&&Be(r,e,n),Be(r,"VER",t.ha),Fn(t,r),r}function Qn(t,e){if(e&&!t.C)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new wn(t.Ka)).F=t.C,e}function $n(){}function tr(){if(K&&!(10<=Number(rt)))throw Error("Environmental error: no available transport.")}function er(t,e){Ot.call(this),this.a=new Cn(e),this.l=t,this.b=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.a.l=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.a&&(t?t["X-WebChannel-Client-Profile"]=e.a:t={"X-WebChannel-Client-Profile":e.a}),this.a.O=t,(t=e&&e.httpHeadersOverwriteParam)&&!O(t)&&(this.a.i=t),this.h=e&&e.supportsCrossDomainXhr||!1,this.g=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!O(e)&&(this.a.A=e,null!==(t=this.b)&&e in t&&e in(t=this.b)&&delete t[e]),this.f=new ir(this)}function nr(t){ve.call(this);var e=t.__sm__;if(e){t:{for(var n in e){t=n;break t}t=void 0}(this.c=t)?(t=this.c,this.data=null!==e&&t in e?e[t]:void 0):this.data=e}else this.data=t}function rr(){ye.call(this),this.status=1}function ir(t){this.a=t}(c=wn.prototype).ba=function(t,e,n,r){if(this.a)throw Error("[goog.net.XhrIo] Object is active with another request="+this.B+"; newUri="+t);e=e?e.toUpperCase():"GET",this.B=t,this.f="",this.h=0,this.u=!1,this.b=!0,this.a=new XMLHttpRequest,this.s=this.H?fe(this.H):fe(pe),this.a.onreadystatechange=I(this.za,this);try{this.A=!0,this.a.open(e,String(t),!0),this.A=!1}catch(t){return void An(this,t)}t=n||"";var i=new Ce(this.headers);r&&Le(r,(function(t,e){i.set(e,t)})),r=function(t){t:{for(var e=_n,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:"string"==typeof t?t.charAt(e):t[e]}(i.L()),n=l.FormData&&t instanceof l.FormData,!(0<=N(Tn,e))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach((function(t,e){this.a.setRequestHeader(e,t)}),this),this.I&&(this.a.responseType=this.I),"withCredentials"in this.a&&this.a.withCredentials!==this.F&&(this.a.withCredentials=this.F);try{Dn(this),0<this.o&&((this.D=function(t){return K&&nt(9)&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(this.a))?(this.a.timeout=this.o,this.a.ontimeout=I(this.xa,this)):this.m=Kt(this.xa,this.o,this)),this.l=!0,this.a.send(t),this.l=!1}catch(t){An(this,t)}},c.xa=function(){void 0!==f&&this.a&&(this.f="Timed out after "+this.o+"ms, aborting",this.h=8,this.dispatchEvent("timeout"),this.abort(8))},c.abort=function(t){this.a&&this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1,this.h=t||7,this.dispatchEvent("complete"),this.dispatchEvent("abort"),kn(this))},c.G=function(){this.a&&(this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1),kn(this,!0)),wn.S.G.call(this)},c.za=function(){this.j||(this.A||this.l||this.g?Sn(this):this.Ta())},c.Ta=function(){Sn(this)},c.X=function(){try{return 2<On(this)?this.a.status:-1}catch(t){return-1}},c.$=function(){try{return this.a?this.a.responseText:""}catch(t){return""}},c.Na=function(t){if(this.a){var e=this.a.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),bn(e)}},c.ua=function(){return this.h},c.Qa=function(){return"string"==typeof this.f?this.f:String(this.f)},(c=Cn.prototype).ha=8,c.v=1,c.Ba=function(t){if(this.h)if(this.h=null,1==this.v){if(!t){this.R=Math.floor(1e5*Math.random()),t=this.R++;var e,n=new ge(this,this.c,t,void 0),r=this.l;if(this.O&&(r?F(r=U(r),this.O):r=this.O),null===this.i&&(n.B=r),this.da)t:{for(var i=e=0;i<this.g.length;i++){var o=this.g[i];if(void 0===(o="__data__"in o.a&&"string"==typeof(o=o.a.__data__)?o.length:void 0))break;if(4096<(e+=o)){e=i;break t}if(4096===e||i===this.g.length-1){e=i+1;break t}}e=1e3}else e=1e3;e=Gn(this,n,e),Be(i=Ue(this.B),"RID",t),Be(i,"CVER",22),this.A&&Be(i,"X-HTTP-Session-Id",this.A),Fn(this,i),this.i&&r&&Pn(i,this.i,r),ln(this.b,n),this.Ga&&Be(i,"TYPE","init"),this.da?(Be(i,"$req",e),Be(i,"SID","null"),n.V=!0,Ee(n,i,null)):Ee(n,i,e),this.v=2}}else 3==this.v&&(t?jn(this,t):0==this.g.length||cn(this.b)||jn(this))},c.Aa=function(){if(this.j=null,Kn(this),this.V&&!(this.F||null==this.a||0>=this.N)){var t=2*this.N;this.c.info("BP detection timer enabled: "+t),this.s=ae(I(this.Sa,this),t)}},c.Sa=function(){this.s&&(this.s=null,this.c.info("BP detection timeout reached."),this.c.info("Buffering proxy detected and switch to long-polling!"),this.H=!1,this.F=!0,xn(this),Kn(this))},c.Ra=function(){null!=this.m&&(this.m=null,xn(this),Bn(this),oe(19))},c.Xa=function(t){t?(this.c.info("Successfully pinged google.com"),oe(2)):(this.c.info("Failed to ping google.com"),oe(1))},(c=$n.prototype).ta=function(){},c.sa=function(){},c.ra=function(){},c.qa=function(){},c.Ha=function(){},tr.prototype.a=function(t,e){return new er(t,e)},_(er,Ot),(c=er.prototype).addEventListener=function(t,e,n,r){er.S.addEventListener.call(this,t,e,n,r)},c.removeEventListener=function(t,e,n,r){er.S.removeEventListener.call(this,t,e,n,r)},c.Oa=function(){this.a.f=this.f,this.h&&(this.a.C=!0);var t=this.a,e=this.l,n=this.b||void 0;oe(0),t.fa=e,t.W=n||{},t.H=t.T,t.B=Zn(t,null,t.fa),Un(t)},c.close=function(){Rn(this.a)},c.Pa=function(t){if("string"==typeof t){var e={};e.__data__=t,Vn(this.a,e)}else this.g?((e={}).__data__=Lt(t),Vn(this.a,e)):Vn(this.a,t)},c.G=function(){this.a.f=null,delete this.f,Rn(this.a),delete this.a,er.S.G.call(this)},_(nr,ve),_(rr,ye),_(ir,$n),ir.prototype.ta=function(){this.a.dispatchEvent("a")},ir.prototype.sa=function(t){this.a.dispatchEvent(new nr(t))},ir.prototype.ra=function(t){this.a.dispatchEvent(new rr(t))},ir.prototype.qa=function(){this.a.dispatchEvent("b")},tr.prototype.createWebChannel=tr.prototype.a,er.prototype.send=er.prototype.Pa,er.prototype.open=er.prototype.Oa,er.prototype.close=er.prototype.close,ue.NO_ERROR=0,ue.TIMEOUT=8,ue.HTTP_ERROR=6,ce.COMPLETE="complete",le.EventType=de,de.OPEN="a",de.CLOSE="b",de.ERROR="c",de.MESSAGE="d",Ot.prototype.listen=Ot.prototype.va,wn.prototype.listenOnce=wn.prototype.wa,wn.prototype.getLastError=wn.prototype.Qa,wn.prototype.getLastErrorCode=wn.prototype.ua,wn.prototype.getStatus=wn.prototype.X,wn.prototype.getResponseJson=wn.prototype.Na,wn.prototype.getResponseText=wn.prototype.$,wn.prototype.send=wn.prototype.ba;var or=ue,sr=ce,ar=le,ur=wn,cr=n(909),hr={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},fr=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).code=e,r.message=n,r.name="FirebaseError",r.toString=function(){return r.name+": [code="+r.code+"]: "+r.message},r}return(0,r.ZT)(e,t),e}(Error),lr=new o.Yd("@firebase/firestore");function pr(){return lr.logLevel}function dr(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(lr.logLevel<=o.in.DEBUG){var i=e.map(mr);lr.debug.apply(lr,(0,r.pr)(["Firestore (8.0.0): "+t],i))}}function vr(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(lr.logLevel<=o.in.ERROR){var i=e.map(mr);lr.error.apply(lr,(0,r.pr)(["Firestore (8.0.0): "+t],i))}}function yr(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(lr.logLevel<=o.in.WARN){var i=e.map(mr);lr.warn.apply(lr,(0,r.pr)(["Firestore (8.0.0): "+t],i))}}function mr(t){if("string"==typeof t)return t;try{return e=t,JSON.stringify(e)}catch(e){return t}var e}function gr(t){void 0===t&&(t="Unexpected state");var e="FIRESTORE (8.0.0) INTERNAL ASSERTION FAILED: "+t;throw vr(e),new Error(e)}function br(t,e){t||gr()}function wr(t,e){return t}function Ir(t){var e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(var r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}var Er=function(){function t(){}return t.t=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length,n="";n.length<20;)for(var r=Ir(40),i=0;i<r.length;++i)n.length<20&&r[i]<e&&(n+=t.charAt(r[i]%t.length));return n},t}();function Tr(t,e){return t<e?-1:t>e?1:0}function _r(t,e,n){return t.length===e.length&&t.every((function(t,r){return n(t,e[r])}))}function Ar(t){return t+"\0"}var Nr=function(){function t(t){this.i=t}return t.fromBase64String=function(e){return new t(atob(e))},t.fromUint8Array=function(e){return new t(function(t){for(var e="",n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(e))},t.prototype.toBase64=function(){return t=this.i,btoa(t);var t},t.prototype.toUint8Array=function(){return function(t){for(var e=new Uint8Array(t.length),n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.i)},t.prototype.o=function(){return 2*this.i.length},t.prototype.h=function(t){return Tr(this.i,t.i)},t.prototype.isEqual=function(t){return this.i===t.i},t}();Nr.u=new Nr("");var Sr=function(){function t(t){this.l=t}return t.fromBase64String=function(e){try{return new t(Nr.fromBase64String(e))}catch(e){throw new fr(hr.INVALID_ARGUMENT,"Failed to construct Bytes from Base64 string: "+e)}},t.fromUint8Array=function(e){return new t(Nr.fromUint8Array(e))},t.prototype.toBase64=function(){return this.l.toBase64()},t.prototype.toUint8Array=function(){return this.l.toUint8Array()},t.prototype.toString=function(){return"Bytes(base64: "+this.toBase64()+")"},t.prototype.isEqual=function(t){return this.l.isEqual(t.l)},t}();function kr(){if("undefined"==typeof Uint8Array)throw new fr(hr.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function Dr(){if("undefined"==typeof atob)throw new fr(hr.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var Or=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,r.ZT)(e,t),e.fromBase64String=function(t){Dr();try{return new e(Nr.fromBase64String(t))}catch(t){throw new fr(hr.INVALID_ARGUMENT,"Failed to construct Blob from Base64 string: "+t)}},e.fromUint8Array=function(t){return kr(),new e(Nr.fromUint8Array(t))},e.prototype.toBase64=function(){return Dr(),t.prototype.toBase64.call(this)},e.prototype.toUint8Array=function(){return kr(),t.prototype.toUint8Array.call(this)},e.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},e}(Sr),Pr=function(t,e,n,r,i,o){this._=t,this.persistenceKey=e,this.host=n,this.ssl=r,this.forceLongPolling=i,this.T=o},Lr=function(){function t(t,e){this.projectId=t,this.database=e||"(default)"}return Object.defineProperty(t.prototype,"I",{get:function(){return"(default)"===this.database},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database},t.prototype.h=function(t){return Tr(this.projectId,t.projectId)||Tr(this.database,t.database)},t}();function Cr(t){var e=0;for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Rr(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function xr(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var Mr=function(){function t(t,e){this.m=t,this.A=e,this.R={}}return t.prototype.get=function(t){var e=this.m(t),n=this.R[e];if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var o=i[r],s=o[0],a=o[1];if(this.A(s,t))return a}},t.prototype.has=function(t){return void 0!==this.get(t)},t.prototype.set=function(t,e){var n=this.m(t),r=this.R[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(this.A(r[i][0],t))return void(r[i]=[t,e]);r.push([t,e])}else this.R[n]=[[t,e]]},t.prototype.delete=function(t){var e=this.m(t),n=this.R[e];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.A(n[r][0],t))return 1===n.length?delete this.R[e]:n.splice(r,1),!0;return!1},t.prototype.forEach=function(t){Rr(this.R,(function(e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r],s=o[0],a=o[1];t(s,a)}}))},t.prototype.P=function(){return xr(this.R)},t}(),Vr=function(){function t(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new fr(hr.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new fr(hr.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new fr(hr.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new fr(hr.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return t.now=function(){return t.fromMillis(Date.now())},t.fromDate=function(e){return t.fromMillis(e.getTime())},t.fromMillis=function(e){var n=Math.floor(e/1e3);return new t(n,1e6*(e-1e3*n))},t.prototype.toDate=function(){return new Date(this.toMillis())},t.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},t.prototype.g=function(t){return this.seconds===t.seconds?Tr(this.nanoseconds,t.nanoseconds):Tr(this.seconds,t.seconds)},t.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},t.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},t.prototype.toJSON=function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}},t.prototype.valueOf=function(){var t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},t}(),Ur=function(){function t(t){this.timestamp=t}return t.V=function(e){return new t(e)},t.min=function(){return new t(new Vr(0,0))},t.prototype.h=function(t){return this.timestamp.g(t.timestamp)},t.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},t.prototype.p=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},t.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},t.prototype.v=function(){return this.timestamp},t}(),jr=function(){function t(t,e,n){void 0===e?e=0:e>t.length&&gr(),void 0===n?n=t.length-e:n>t.length-e&&gr(),this.segments=t,this.offset=e,this.S=n}return Object.defineProperty(t.prototype,"length",{get:function(){return this.S},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return 0===t.D(this,e)},t.prototype.child=function(e){var n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach((function(t){n.push(t)})):n.push(e),this.C(n)},t.prototype.limit=function(){return this.offset+this.length},t.prototype.N=function(t){return t=void 0===t?1:t,this.C(this.segments,this.offset+t,this.length-t)},t.prototype.F=function(){return this.C(this.segments,this.offset,this.length-1)},t.prototype.k=function(){return this.segments[this.offset]},t.prototype.O=function(){return this.get(this.length-1)},t.prototype.get=function(t){return this.segments[this.offset+t]},t.prototype.P=function(){return 0===this.length},t.prototype.M=function(t){if(t.length<this.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.$=function(t){if(this.length+1!==t.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.forEach=function(t){for(var e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])},t.prototype.L=function(){return this.segments.slice(this.offset,this.limit())},t.D=function(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++){var i=t.get(r),o=e.get(r);if(i<o)return-1;if(i>o)return 1}return t.length<e.length?-1:t.length>e.length?1:0},t}(),Fr=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,r.ZT)(e,t),e.prototype.C=function(t,n,r){return new e(t,n,r)},e.prototype.B=function(){return this.L().join("/")},e.prototype.toString=function(){return this.B()},e.q=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var r=[],i=0,o=t;i<o.length;i++){var s=o[i];if(s.indexOf("//")>=0)throw new fr(hr.INVALID_ARGUMENT,"Invalid segment ("+s+"). Paths must not contain // in them.");r.push.apply(r,s.split("/").filter((function(t){return t.length>0})))}return new e(r)},e.U=function(){return new e([])},e}(jr),Gr=/^[_a-zA-Z][_a-zA-Z0-9]*$/,qr=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,r.ZT)(e,t),e.prototype.C=function(t,n,r){return new e(t,n,r)},e.K=function(t){return Gr.test(t)},e.prototype.B=function(){return this.L().map((function(t){return t=t.replace("\\","\\\\").replace("`","\\`"),e.K(t)||(t="`"+t+"`"),t})).join(".")},e.prototype.toString=function(){return this.B()},e.prototype.W=function(){return 1===this.length&&"__name__"===this.get(0)},e.j=function(){return new e(["__name__"])},e.G=function(t){for(var n=[],r="",i=0,o=function(){if(0===r.length)throw new fr(hr.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");n.push(r),r=""},s=!1;i<t.length;){var a=t[i];if("\\"===a){if(i+1===t.length)throw new fr(hr.INVALID_ARGUMENT,"Path has trailing escape character: "+t);var u=t[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new fr(hr.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=u,i+=2}else"`"===a?(s=!s,i++):"."!==a||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new fr(hr.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new e(n)},e.U=function(){return new e([])},e}(jr),Br=function(){function t(t){this.path=t}return t.H=function(e){return new t(Fr.q(e))},t.J=function(e){return new t(Fr.q(e).N(5))},t.prototype.Y=function(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t},t.prototype.isEqual=function(t){return null!==t&&0===Fr.D(this.path,t.path)},t.prototype.toString=function(){return this.path.toString()},t.D=function(t,e){return Fr.D(t.path,e.path)},t.X=function(t){return t.length%2==0},t.Z=function(e){return new t(new Fr(e.slice()))},t}();function zr(t){return null==t}function Kr(t){return 0===t&&1/t==-1/0}function Hr(t){return"number"==typeof t&&Number.isInteger(t)&&!Kr(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}var Jr=function(t,e,n,r,i,o,s){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=s,this.tt=null};function Wr(t,e,n,r,i,o,s){return void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),new Jr(t,e,n,r,i,o,s)}function Xr(t){var e=wr(t);if(null===e.tt){var n=e.path.B();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((function(t){return function(t){return t.field.B()+t.op.toString()+Fi(t.value)}(t)})).join(","),n+="|ob:",n+=e.orderBy.map((function(t){return(e=t).field.B()+e.dir;var e})).join(","),zr(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=Ks(e.startAt)),e.endAt&&(n+="|ub:",n+=Ks(e.endAt)),e.tt=n}return e.tt}function Yr(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(var n=0;n<t.orderBy.length;n++)if(!Ys(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(var r=0;r<t.filters.length;r++)if(i=t.filters[r],o=e.filters[r],i.op!==o.op||!i.field.isEqual(o.field)||!Mi(i.value,o.value))return!1;var i,o;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Js(t.startAt,e.startAt)&&Js(t.endAt,e.endAt)}function Zr(t){return Br.X(t.path)&&null===t.collectionGroup&&0===t.filters.length}var Qr,$r,ti=function(){function t(t,e,n,r,i,o,s){void 0===i&&(i=Ur.min()),void 0===o&&(o=Ur.min()),void 0===s&&(s=Nr.u),this.target=t,this.targetId=e,this.et=n,this.sequenceNumber=r,this.nt=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s}return t.prototype.st=function(e){return new t(this.target,this.targetId,this.et,e,this.nt,this.lastLimboFreeSnapshotVersion,this.resumeToken)},t.prototype.it=function(e,n){return new t(this.target,this.targetId,this.et,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)},t.prototype.rt=function(e){return new t(this.target,this.targetId,this.et,this.sequenceNumber,this.nt,e,this.resumeToken)},t}(),ei=function(t){this.count=t};function ni(t){switch(t){case hr.OK:return gr();case hr.CANCELLED:case hr.UNKNOWN:case hr.DEADLINE_EXCEEDED:case hr.RESOURCE_EXHAUSTED:case hr.INTERNAL:case hr.UNAVAILABLE:case hr.UNAUTHENTICATED:return!1;case hr.INVALID_ARGUMENT:case hr.NOT_FOUND:case hr.ALREADY_EXISTS:case hr.PERMISSION_DENIED:case hr.FAILED_PRECONDITION:case hr.ABORTED:case hr.OUT_OF_RANGE:case hr.UNIMPLEMENTED:case hr.DATA_LOSS:return!0;default:return gr()}}function ri(t){if(void 0===t)return vr("GRPC error has no .code"),hr.UNKNOWN;switch(t){case Qr.OK:return hr.OK;case Qr.CANCELLED:return hr.CANCELLED;case Qr.UNKNOWN:return hr.UNKNOWN;case Qr.DEADLINE_EXCEEDED:return hr.DEADLINE_EXCEEDED;case Qr.RESOURCE_EXHAUSTED:return hr.RESOURCE_EXHAUSTED;case Qr.INTERNAL:return hr.INTERNAL;case Qr.UNAVAILABLE:return hr.UNAVAILABLE;case Qr.UNAUTHENTICATED:return hr.UNAUTHENTICATED;case Qr.INVALID_ARGUMENT:return hr.INVALID_ARGUMENT;case Qr.NOT_FOUND:return hr.NOT_FOUND;case Qr.ALREADY_EXISTS:return hr.ALREADY_EXISTS;case Qr.PERMISSION_DENIED:return hr.PERMISSION_DENIED;case Qr.FAILED_PRECONDITION:return hr.FAILED_PRECONDITION;case Qr.ABORTED:return hr.ABORTED;case Qr.OUT_OF_RANGE:return hr.OUT_OF_RANGE;case Qr.UNIMPLEMENTED:return hr.UNIMPLEMENTED;case Qr.DATA_LOSS:return hr.DATA_LOSS;default:return gr()}}($r=Qr||(Qr={}))[$r.OK=0]="OK",$r[$r.CANCELLED=1]="CANCELLED",$r[$r.UNKNOWN=2]="UNKNOWN",$r[$r.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",$r[$r.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",$r[$r.NOT_FOUND=5]="NOT_FOUND",$r[$r.ALREADY_EXISTS=6]="ALREADY_EXISTS",$r[$r.PERMISSION_DENIED=7]="PERMISSION_DENIED",$r[$r.UNAUTHENTICATED=16]="UNAUTHENTICATED",$r[$r.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",$r[$r.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",$r[$r.ABORTED=10]="ABORTED",$r[$r.OUT_OF_RANGE=11]="OUT_OF_RANGE",$r[$r.UNIMPLEMENTED=12]="UNIMPLEMENTED",$r[$r.INTERNAL=13]="INTERNAL",$r[$r.UNAVAILABLE=14]="UNAVAILABLE",$r[$r.DATA_LOSS=15]="DATA_LOSS";var ii=function(){function t(t,e){this.D=t,this.root=e||si.EMPTY}return t.prototype.ot=function(e,n){return new t(this.D,this.root.ot(e,n,this.D).copy(null,null,si.at,null,null))},t.prototype.remove=function(e){return new t(this.D,this.root.remove(e,this.D).copy(null,null,si.at,null,null))},t.prototype.get=function(t){for(var e=this.root;!e.P();){var n=this.D(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null},t.prototype.indexOf=function(t){for(var e=0,n=this.root;!n.P();){var r=this.D(t,n.key);if(0===r)return e+n.left.size;r<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1},t.prototype.P=function(){return this.root.P()},Object.defineProperty(t.prototype,"size",{get:function(){return this.root.size},enumerable:!1,configurable:!0}),t.prototype.ht=function(){return this.root.ht()},t.prototype.ct=function(){return this.root.ct()},t.prototype.ut=function(t){return this.root.ut(t)},t.prototype.forEach=function(t){this.ut((function(e,n){return t(e,n),!1}))},t.prototype.toString=function(){var t=[];return this.ut((function(e,n){return t.push(e+":"+n),!1})),"{"+t.join(", ")+"}"},t.prototype.lt=function(t){return this.root.lt(t)},t.prototype._t=function(){return new oi(this.root,null,this.D,!1)},t.prototype.ft=function(t){return new oi(this.root,t,this.D,!1)},t.prototype.dt=function(){return new oi(this.root,null,this.D,!0)},t.prototype.wt=function(t){return new oi(this.root,t,this.D,!0)},t}(),oi=function(){function t(t,e,n,r){this.Et=r,this.Tt=[];for(var i=1;!t.P();)if(i=e?n(t.key,e):1,r&&(i*=-1),i<0)t=this.Et?t.left:t.right;else{if(0===i){this.Tt.push(t);break}this.Tt.push(t),t=this.Et?t.right:t.left}}return t.prototype.It=function(){var t=this.Tt.pop(),e={key:t.key,value:t.value};if(this.Et)for(t=t.left;!t.P();)this.Tt.push(t),t=t.right;else for(t=t.right;!t.P();)this.Tt.push(t),t=t.left;return e},t.prototype.At=function(){return this.Tt.length>0},t.prototype.Rt=function(){if(0===this.Tt.length)return null;var t=this.Tt[this.Tt.length-1];return{key:t.key,value:t.value}},t}(),si=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:t.EMPTY,this.right=null!=o?o:t.EMPTY,this.size=this.left.size+1+this.right.size}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.P=function(){return!1},t.prototype.ut=function(t){return this.left.ut(t)||t(this.key,this.value)||this.right.ut(t)},t.prototype.lt=function(t){return this.right.lt(t)||t(this.key,this.value)||this.left.lt(t)},t.prototype.min=function(){return this.left.P()?this:this.left.min()},t.prototype.ht=function(){return this.min().key},t.prototype.ct=function(){return this.right.P()?this.key:this.right.ct()},t.prototype.ot=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.ot(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.ot(t,e,n))).Pt()},t.prototype.gt=function(){if(this.left.P())return t.EMPTY;var e=this;return e.left.Vt()||e.left.left.Vt()||(e=e.yt()),(e=e.copy(null,null,null,e.left.gt(),null)).Pt()},t.prototype.remove=function(e,n){var r,i=this;if(n(e,i.key)<0)i.left.P()||i.left.Vt()||i.left.left.Vt()||(i=i.yt()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.Vt()&&(i=i.bt()),i.right.P()||i.right.Vt()||i.right.left.Vt()||(i=i.vt()),0===n(e,i.key)){if(i.right.P())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.gt())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.Pt()},t.prototype.Vt=function(){return this.color},t.prototype.Pt=function(){var t=this;return t.right.Vt()&&!t.left.Vt()&&(t=t.St()),t.left.Vt()&&t.left.left.Vt()&&(t=t.bt()),t.left.Vt()&&t.right.Vt()&&(t=t.Dt()),t},t.prototype.yt=function(){var t=this.Dt();return t.right.left.Vt()&&(t=(t=(t=t.copy(null,null,null,null,t.right.bt())).St()).Dt()),t},t.prototype.vt=function(){var t=this.Dt();return t.left.left.Vt()&&(t=(t=t.bt()).Dt()),t},t.prototype.St=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.bt=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.Dt=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.Ct=function(){var t=this.Nt();return Math.pow(2,t)<=this.size+1},t.prototype.Nt=function(){if(this.Vt()&&this.left.Vt())throw gr();if(this.right.Vt())throw gr();var t=this.left.Nt();if(t!==this.right.Nt())throw gr();return t+(this.Vt()?0:1)},t}();si.EMPTY=null,si.RED=!0,si.at=!1,si.EMPTY=new(function(){function t(){this.size=0}return Object.defineProperty(t.prototype,"key",{get:function(){throw gr()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){throw gr()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){throw gr()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"left",{get:function(){throw gr()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){throw gr()},enumerable:!1,configurable:!0}),t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.ot=function(t,e,n){return new si(t,e)},t.prototype.remove=function(t,e){return this},t.prototype.P=function(){return!0},t.prototype.ut=function(t){return!1},t.prototype.lt=function(t){return!1},t.prototype.ht=function(){return null},t.prototype.ct=function(){return null},t.prototype.Vt=function(){return!1},t.prototype.Ct=function(){return!0},t.prototype.Nt=function(){return 0},t}());var ai=function(){function t(t){this.D=t,this.data=new ii(this.D)}return t.prototype.has=function(t){return null!==this.data.get(t)},t.prototype.first=function(){return this.data.ht()},t.prototype.last=function(){return this.data.ct()},Object.defineProperty(t.prototype,"size",{get:function(){return this.data.size},enumerable:!1,configurable:!0}),t.prototype.indexOf=function(t){return this.data.indexOf(t)},t.prototype.forEach=function(t){this.data.ut((function(e,n){return t(e),!1}))},t.prototype.xt=function(t,e){for(var n=this.data.ft(t[0]);n.At();){var r=n.It();if(this.D(r.key,t[1])>=0)return;e(r.key)}},t.prototype.Ft=function(t,e){var n;for(n=void 0!==e?this.data.ft(e):this.data._t();n.At();)if(!t(n.It().key))return},t.prototype.kt=function(t){var e=this.data.ft(t);return e.At()?e.It().key:null},t.prototype._t=function(){return new ui(this.data._t())},t.prototype.ft=function(t){return new ui(this.data.ft(t))},t.prototype.add=function(t){return this.copy(this.data.remove(t).ot(t,!0))},t.prototype.delete=function(t){return this.has(t)?this.copy(this.data.remove(t)):this},t.prototype.P=function(){return this.data.P()},t.prototype.Ot=function(t){var e=this;return e.size<t.size&&(e=t,t=this),t.forEach((function(t){e=e.add(t)})),e},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.data._t(),r=e.data._t();n.At();){var i=n.It().key,o=r.It().key;if(0!==this.D(i,o))return!1}return!0},t.prototype.L=function(){var t=[];return this.forEach((function(e){t.push(e)})),t},t.prototype.toString=function(){var t=[];return this.forEach((function(e){return t.push(e)})),"SortedSet("+t.toString()+")"},t.prototype.copy=function(e){var n=new t(this.D);return n.data=e,n},t}(),ui=function(){function t(t){this.Mt=t}return t.prototype.It=function(){return this.Mt.It().key},t.prototype.At=function(){return this.Mt.At()},t}(),ci=new ii(Br.D);function hi(){return ci}function fi(){return hi()}var li=new ii(Br.D);function pi(){return li}var di=new ii(Br.D),vi=new ai(Br.D);function yi(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=vi,r=0,i=t;r<i.length;r++){var o=i[r];n=n.add(o)}return n}var mi=new ai(Tr);function gi(){return mi}var bi=function(){function t(t){this.D=t?function(e,n){return t(e,n)||Br.D(e.key,n.key)}:function(t,e){return Br.D(t.key,e.key)},this.$t=pi(),this.Lt=new ii(this.D)}return t.Bt=function(e){return new t(e.D)},t.prototype.has=function(t){return null!=this.$t.get(t)},t.prototype.get=function(t){return this.$t.get(t)},t.prototype.first=function(){return this.Lt.ht()},t.prototype.last=function(){return this.Lt.ct()},t.prototype.P=function(){return this.Lt.P()},t.prototype.indexOf=function(t){var e=this.$t.get(t);return e?this.Lt.indexOf(e):-1},Object.defineProperty(t.prototype,"size",{get:function(){return this.Lt.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t){this.Lt.ut((function(e,n){return t(e),!1}))},t.prototype.add=function(t){var e=this.delete(t.key);return e.copy(e.$t.ot(t.key,t),e.Lt.ot(t,null))},t.prototype.delete=function(t){var e=this.get(t);return e?this.copy(this.$t.remove(t),this.Lt.remove(e)):this},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.Lt._t(),r=e.Lt._t();n.At();){var i=n.It().key,o=r.It().key;if(!i.isEqual(o))return!1}return!0},t.prototype.toString=function(){var t=[];return this.forEach((function(e){t.push(e.toString())})),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"},t.prototype.copy=function(e,n){var r=new t;return r.D=this.D,r.$t=e,r.Lt=n,r},t}(),wi=function(){function t(){this.qt=new ii(Br.D)}return t.prototype.track=function(t){var e=t.doc.key,n=this.qt.get(e);n?0!==t.type&&3===n.type?this.qt=this.qt.ot(e,t):3===t.type&&1!==n.type?this.qt=this.qt.ot(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.qt=this.qt.ot(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.qt=this.qt.ot(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.qt=this.qt.remove(e):1===t.type&&2===n.type?this.qt=this.qt.ot(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.qt=this.qt.ot(e,{type:2,doc:t.doc}):gr():this.qt=this.qt.ot(e,t)},t.prototype.Ut=function(){var t=[];return this.qt.ut((function(e,n){t.push(n)})),t},t}(),Ii=function(){function t(t,e,n,r,i,o,s,a){this.query=t,this.docs=e,this.Kt=n,this.docChanges=r,this.Qt=i,this.fromCache=o,this.Wt=s,this.jt=a}return t.Gt=function(e,n,r,i){var o=[];return n.forEach((function(t){o.push({type:0,doc:t})})),new t(e,n,bi.Bt(n),o,r,i,!0,!1)},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return!this.Qt.P()},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.Wt===t.Wt&&this.Qt.isEqual(t.Qt)&&Os(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.Kt.isEqual(t.Kt)))return!1;var e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(e[r].type!==n[r].type||!e[r].doc.isEqual(n[r].doc))return!1;return!0},t}(),Ei=function(){function t(t,e,n,r,i){this.nt=t,this.zt=e,this.Ht=n,this.Jt=r,this.Yt=i}return t.Xt=function(e,n){var r=new Map;return r.set(e,Ti.Zt(e,n)),new t(Ur.min(),r,gi(),hi(),yi())},t}(),Ti=function(){function t(t,e,n,r,i){this.resumeToken=t,this.te=e,this.ee=n,this.ne=r,this.se=i}return t.Zt=function(e,n){return new t(Nr.u,n,yi(),yi(),yi())},t}(),_i=function(t,e,n,r){this.ie=t,this.removedTargetIds=e,this.key=n,this.re=r},Ai=function(t,e){this.targetId=t,this.oe=e},Ni=function(t,e,n,r){void 0===n&&(n=Nr.u),void 0===r&&(r=null),this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r},Si=function(){function t(){this.ae=0,this.he=Oi(),this.ce=Nr.u,this.ue=!1,this.le=!0}return Object.defineProperty(t.prototype,"te",{get:function(){return this.ue},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"resumeToken",{get:function(){return this.ce},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_e",{get:function(){return 0!==this.ae},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fe",{get:function(){return this.le},enumerable:!1,configurable:!0}),t.prototype.de=function(t){t.o()>0&&(this.le=!0,this.ce=t)},t.prototype.we=function(){var t=yi(),e=yi(),n=yi();return this.he.forEach((function(r,i){switch(i){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:n=n.add(r);break;default:gr()}})),new Ti(this.ce,this.ue,t,e,n)},t.prototype.Ee=function(){this.le=!1,this.he=Oi()},t.prototype.Te=function(t,e){this.le=!0,this.he=this.he.ot(t,e)},t.prototype.Ie=function(t){this.le=!0,this.he=this.he.remove(t)},t.prototype.me=function(){this.ae+=1},t.prototype.Ae=function(){this.ae-=1},t.prototype.Re=function(){this.le=!0,this.ue=!0},t}(),ki=function(){function t(t){this.Pe=t,this.ge=new Map,this.Ve=hi(),this.ye=Di(),this.pe=new ai(Tr)}return t.prototype.be=function(t){for(var e=0,n=t.ie;e<n.length;e++){var r=n[e];t.re instanceof ds?this.ve(r,t.re):t.re instanceof vs&&this.Se(r,t.key,t.re)}for(var i=0,o=t.removedTargetIds;i<o.length;i++){var s=o[i];this.Se(s,t.key,t.re)}},t.prototype.De=function(t){var e=this;this.Ce(t,(function(n){var r=e.Ne(n);switch(t.state){case 0:e.xe(n)&&r.de(t.resumeToken);break;case 1:r.Ae(),r._e||r.Ee(),r.de(t.resumeToken);break;case 2:r.Ae(),r._e||e.removeTarget(n);break;case 3:e.xe(n)&&(r.Re(),r.de(t.resumeToken));break;case 4:e.xe(n)&&(e.Fe(n),r.de(t.resumeToken));break;default:gr()}}))},t.prototype.Ce=function(t,e){var n=this;t.targetIds.length>0?t.targetIds.forEach(e):this.ge.forEach((function(t,r){n.xe(r)&&e(r)}))},t.prototype.ke=function(t){var e=t.targetId,n=t.oe.count,r=this.Oe(e);if(r){var i=r.target;if(Zr(i))if(0===n){var o=new Br(i.path);this.Se(e,o,new vs(o,Ur.min()))}else br(1===n);else this.Me(e)!==n&&(this.Fe(e),this.pe=this.pe.add(e))}},t.prototype.$e=function(t){var e=this,n=new Map;this.ge.forEach((function(r,i){var o=e.Oe(i);if(o){if(r.te&&Zr(o.target)){var s=new Br(o.target.path);null!==e.Ve.get(s)||e.Le(i,s)||e.Se(i,s,new vs(s,t))}r.fe&&(n.set(i,r.we()),r.Ee())}}));var r=yi();this.ye.forEach((function(t,n){var i=!0;n.Ft((function(t){var n=e.Oe(t);return!n||2===n.et||(i=!1,!1)})),i&&(r=r.add(t))}));var i=new Ei(t,n,this.pe,this.Ve,r);return this.Ve=hi(),this.ye=Di(),this.pe=new ai(Tr),i},t.prototype.ve=function(t,e){if(this.xe(t)){var n=this.Le(t,e.key)?2:0;this.Ne(t).Te(e.key,n),this.Ve=this.Ve.ot(e.key,e),this.ye=this.ye.ot(e.key,this.Be(e.key).add(t))}},t.prototype.Se=function(t,e,n){if(this.xe(t)){var r=this.Ne(t);this.Le(t,e)?r.Te(e,1):r.Ie(e),this.ye=this.ye.ot(e,this.Be(e).delete(t)),n&&(this.Ve=this.Ve.ot(e,n))}},t.prototype.removeTarget=function(t){this.ge.delete(t)},t.prototype.Me=function(t){var e=this.Ne(t).we();return this.Pe.qe(t).size+e.ee.size-e.se.size},t.prototype.me=function(t){this.Ne(t).me()},t.prototype.Ne=function(t){var e=this.ge.get(t);return e||(e=new Si,this.ge.set(t,e)),e},t.prototype.Be=function(t){var e=this.ye.get(t);return e||(e=new ai(Tr),this.ye=this.ye.ot(t,e)),e},t.prototype.xe=function(t){var e=null!==this.Oe(t);return e||dr("WatchChangeAggregator","Detected inactive target",t),e},t.prototype.Oe=function(t){var e=this.ge.get(t);return e&&e._e?null:this.Pe.Ue(t)},t.prototype.Fe=function(t){var e=this;this.ge.set(t,new Si),this.Pe.qe(t).forEach((function(n){e.Se(t,n,null)}))},t.prototype.Le=function(t,e){return this.Pe.qe(t).has(e)},t}();function Di(){return new ii(Br.D)}function Oi(){return new ii(Br.D)}function Pi(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Li(t){var e=t.mapValue.fields.__previous_value__;return Pi(e)?Li(e):e}function Ci(t){var e=qi(t.mapValue.fields.__local_write_time__.timestampValue);return new Vr(e.seconds,e.nanos)}var Ri=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function xi(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Pi(t)?4:10:gr()}function Mi(t,e){var n=xi(t);if(n!==xi(e))return!1;switch(n){case 0:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Ci(t).isEqual(Ci(e));case 3:return function(t,e){if("string"==typeof t.timestampValue&&"string"==typeof e.timestampValue&&t.timestampValue.length===e.timestampValue.length)return t.timestampValue===e.timestampValue;var n=qi(t.timestampValue),r=qi(e.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(t,e){return zi(t.bytesValue).isEqual(zi(e.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(t,e){return Bi(t.geoPointValue.latitude)===Bi(e.geoPointValue.latitude)&&Bi(t.geoPointValue.longitude)===Bi(e.geoPointValue.longitude)}(t,e);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return Bi(t.integerValue)===Bi(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){var n=Bi(t.doubleValue),r=Bi(e.doubleValue);return n===r?Kr(n)===Kr(r):isNaN(n)&&isNaN(r)}return!1}(t,e);case 9:return _r(t.arrayValue.values||[],e.arrayValue.values||[],Mi);case 10:return function(t,e){var n=t.mapValue.fields||{},r=e.mapValue.fields||{};if(Cr(n)!==Cr(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!Mi(n[i],r[i])))return!1;return!0}(t,e);default:return gr()}}function Vi(t,e){return void 0!==(t.values||[]).find((function(t){return Mi(t,e)}))}function Ui(t,e){var n=xi(t),r=xi(e);if(n!==r)return Tr(n,r);switch(n){case 0:return 0;case 1:return Tr(t.booleanValue,e.booleanValue);case 2:return function(t,e){var n=Bi(t.integerValue||t.doubleValue),r=Bi(e.integerValue||e.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(t,e);case 3:return ji(t.timestampValue,e.timestampValue);case 4:return ji(Ci(t),Ci(e));case 5:return Tr(t.stringValue,e.stringValue);case 6:return function(t,e){var n=zi(t),r=zi(e);return n.h(r)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){for(var n=t.split("/"),r=e.split("/"),i=0;i<n.length&&i<r.length;i++){var o=Tr(n[i],r[i]);if(0!==o)return o}return Tr(n.length,r.length)}(t.referenceValue,e.referenceValue);case 8:return function(t,e){var n=Tr(Bi(t.latitude),Bi(e.latitude));return 0!==n?n:Tr(Bi(t.longitude),Bi(e.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(t,e){for(var n=t.values||[],r=e.values||[],i=0;i<n.length&&i<r.length;++i){var o=Ui(n[i],r[i]);if(o)return o}return Tr(n.length,r.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){var n=t.fields||{},r=Object.keys(n),i=e.fields||{},o=Object.keys(i);r.sort(),o.sort();for(var s=0;s<r.length&&s<o.length;++s){var a=Tr(r[s],o[s]);if(0!==a)return a;var u=Ui(n[r[s]],i[o[s]]);if(0!==u)return u}return Tr(r.length,o.length)}(t.mapValue,e.mapValue);default:throw gr()}}function ji(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return Tr(t,e);var n=qi(t),r=qi(e),i=Tr(n.seconds,r.seconds);return 0!==i?i:Tr(n.nanos,r.nanos)}function Fi(t){return Gi(t)}function Gi(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(t){var e=qi(t);return"time("+e.seconds+","+e.nanos+")"}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?zi(t.bytesValue).toBase64():"referenceValue"in t?(n=t.referenceValue,Br.J(n).toString()):"geoPointValue"in t?"geo("+(e=t.geoPointValue).latitude+","+e.longitude+")":"arrayValue"in t?function(t){for(var e="[",n=!0,r=0,i=t.values||[];r<i.length;r++)n?n=!1:e+=",",e+=Gi(i[r]);return e+"]"}(t.arrayValue):"mapValue"in t?function(t){for(var e="{",n=!0,r=0,i=Object.keys(t.fields||{}).sort();r<i.length;r++){var o=i[r];n?n=!1:e+=",",e+=o+":"+Gi(t.fields[o])}return e+"}"}(t.mapValue):gr();var e,n}function qi(t){if(br(!!t),"string"==typeof t){var e=0,n=Ri.exec(t);if(br(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}var i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Bi(t.seconds),nanos:Bi(t.nanos)}}function Bi(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function zi(t){return"string"==typeof t?Nr.fromBase64String(t):Nr.fromUint8Array(t)}function Ki(t,e){return{referenceValue:"projects/"+t.projectId+"/databases/"+t.database+"/documents/"+e.path.B()}}function Hi(t){return!!t&&"integerValue"in t}function Ji(t){return!!t&&"arrayValue"in t}function Wi(t){return!!t&&"nullValue"in t}function Xi(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Yi(t){return!!t&&"mapValue"in t}var Zi={asc:"ASCENDING",desc:"DESCENDING"},Qi={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},$i=function(t,e){this._=t,this.Ke=e};function to(t){return{integerValue:""+t}}function eo(t,e){if(t.Ke){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Kr(e)?"-0":e}}function no(t,e){return Hr(e)?to(e):eo(t,e)}function ro(t,e){return t.Ke?new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+e.nanoseconds).slice(-9)+"Z":{seconds:""+e.seconds,nanos:e.nanoseconds}}function io(t,e){return t.Ke?e.toBase64():e.toUint8Array()}function oo(t,e){return ro(t,e.v())}function so(t){return br(!!t),Ur.V(function(t){var e=qi(t);return new Vr(e.seconds,e.nanos)}(t))}function ao(t,e){return function(t){return new Fr(["projects",t.projectId,"databases",t.database])}(t).child("documents").child(e).B()}function uo(t){var e=Fr.q(t);return br(Lo(e)),e}function co(t,e){return ao(t._,e.path)}function ho(t,e){var n=uo(e);return br(n.get(1)===t._.projectId),br(!n.get(3)&&!t._.database||n.get(3)===t._.database),new Br(vo(n))}function fo(t,e){return ao(t._,e)}function lo(t){var e=uo(t);return 4===e.length?Fr.U():vo(e)}function po(t){return new Fr(["projects",t._.projectId,"databases",t._.database]).B()}function vo(t){return br(t.length>4&&"documents"===t.get(4)),t.N(5)}function yo(t,e,n){return{name:co(t,e),fields:n.proto.mapValue.fields}}function mo(t,e){var n;if(e instanceof ns)n={update:yo(t,e.key,e.value)};else if(e instanceof us)n={delete:co(t,e.key)};else if(e instanceof rs)n={update:yo(t,e.key,e.data),updateMask:Po(e.Qe)};else if(e instanceof os)n={transform:{document:co(t,e.key),fieldTransforms:e.fieldTransforms.map((function(t){return function(t,e){var n=e.transform;if(n instanceof Vo)return{fieldPath:e.field.B(),setToServerValue:"REQUEST_TIME"};if(n instanceof Uo)return{fieldPath:e.field.B(),appendMissingElements:{values:n.elements}};if(n instanceof Fo)return{fieldPath:e.field.B(),removeAllFromArray:{values:n.elements}};if(n instanceof qo)return{fieldPath:e.field.B(),increment:n.We};throw gr()}(0,t)}))}};else{if(!(e instanceof cs))return gr();n={verify:co(t,e.key)}}return e.Ge.je||(n.currentDocument=function(t,e){return void 0!==e.updateTime?{updateTime:oo(t,e.updateTime)}:void 0!==e.exists?{exists:e.exists}:gr()}(t,e.Ge)),n}function go(t,e){var n=e.currentDocument?function(t){return void 0!==t.updateTime?Wo.updateTime(so(t.updateTime)):void 0!==t.exists?Wo.exists(t.exists):Wo.ze()}(e.currentDocument):Wo.ze();if(e.update){e.update.name;var r=ho(t,e.update.name),i=new hs({mapValue:{fields:e.update.fields}});if(e.updateMask){var o=function(t){var e=t.fieldPaths||[];return new Ko(e.map((function(t){return qr.G(t)})))}(e.updateMask);return new rs(r,i,o,n)}return new ns(r,i,n)}if(e.delete){var s=ho(t,e.delete);return new us(s,n)}if(e.transform){var a=ho(t,e.transform.document),u=e.transform.fieldTransforms.map((function(e){return function(t,e){var n=null;if("setToServerValue"in e)br("REQUEST_TIME"===e.setToServerValue),n=new Vo;else if("appendMissingElements"in e){var r=e.appendMissingElements.values||[];n=new Uo(r)}else if("removeAllFromArray"in e){var i=e.removeAllFromArray.values||[];n=new Fo(i)}else"increment"in e?n=new qo(t,e.increment):gr();var o=qr.G(e.fieldPath);return new Ho(o,n)}(t,e)}));return br(!0===n.exists),new os(a,u)}if(e.verify){var c=ho(t,e.verify);return new cs(c,n)}return gr()}function bo(t,e){return{documents:[fo(t,e.path)]}}function wo(t,e){var n={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(n.parent=fo(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=fo(t,r.F()),n.structuredQuery.from=[{collectionId:r.O()}]);var i=function(t){if(0!==t.length){var e=t.map((function(t){return function(t){if("=="===t.op){if(Xi(t.value))return{unaryFilter:{field:So(t.field),op:"IS_NAN"}};if(Wi(t.value))return{unaryFilter:{field:So(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(Xi(t.value))return{unaryFilter:{field:So(t.field),op:"IS_NOT_NAN"}};if(Wi(t.value))return{unaryFilter:{field:So(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:So(t.field),op:No(t.op),value:t.value}}}(t)}));return 1===e.length?e[0]:{compositeFilter:{op:"AND",filters:e}}}}(e.filters);i&&(n.structuredQuery.where=i);var o=function(t){if(0!==t.length)return t.map((function(t){return function(t){return{field:So(t.field),direction:Ao(t.dir)}}(t)}))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);var s=function(t,e){return t.Ke||zr(e)?e:{value:e}}(t,e.limit);return null!==s&&(n.structuredQuery.limit=s),e.startAt&&(n.structuredQuery.startAt=To(e.startAt)),e.endAt&&(n.structuredQuery.endAt=To(e.endAt)),n}function Io(t){var e=lo(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){br(1===r);var o=n.from[0];o.allDescendants?i=o.collectionId:e=e.child(o.collectionId)}var s=[];n.where&&(s=Eo(n.where));var a=[];n.orderBy&&(a=n.orderBy.map((function(t){return function(t){return new Ws(ko(t.field),function(t){switch(t){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(t.direction))}(t)})));var u=null;n.limit&&(u=function(t){var e;return zr(e="object"==typeof t?t.value:t)?null:e}(n.limit));var c=null;n.startAt&&(c=_o(n.startAt));var h=null;return n.endAt&&(h=_o(n.endAt)),Ns(gs(e,i,a,s,u,"F",c,h))}function Eo(t){return t?void 0!==t.unaryFilter?[Oo(t)]:void 0!==t.fieldFilter?[Do(t)]:void 0!==t.compositeFilter?t.compositeFilter.filters.map((function(t){return Eo(t)})).reduce((function(t,e){return t.concat(e)})):gr():[]}function To(t){return{before:t.before,values:t.position}}function _o(t){var e=!!t.before,n=t.values||[];return new zs(n,e)}function Ao(t){return Zi[t]}function No(t){return Qi[t]}function So(t){return{fieldPath:t.B()}}function ko(t){return qr.G(t.fieldPath)}function Do(t){return xs.create(ko(t.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":default:return gr()}}(t.fieldFilter.op),t.fieldFilter.value)}function Oo(t){switch(t.unaryFilter.op){case"IS_NAN":var e=ko(t.unaryFilter.field);return xs.create(e,"==",{doubleValue:NaN});case"IS_NULL":var n=ko(t.unaryFilter.field);return xs.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=ko(t.unaryFilter.field);return xs.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=ko(t.unaryFilter.field);return xs.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":default:return gr()}}function Po(t){var e=[];return t.fields.forEach((function(t){return e.push(t.B())})),{fieldPaths:e}}function Lo(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}var Co=function(){this.He=void 0};function Ro(t,e,n){return t instanceof Vo?function(t,e){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:t.seconds,nanos:t.nanoseconds}}}};return e&&(n.fields.__previous_value__=e),{mapValue:n}}(n,e):t instanceof Uo?jo(t,e):t instanceof Fo?Go(t,e):function(t,e){var n=Mo(t,e),r=Bo(n)+Bo(t.We);return Hi(n)&&Hi(t.We)?to(r):eo(t.serializer,r)}(t,e)}function xo(t,e,n){return t instanceof Uo?jo(t,e):t instanceof Fo?Go(t,e):n}function Mo(t,e){return t instanceof qo?Hi(n=e)||function(t){return!!t&&"doubleValue"in t}(n)?e:{integerValue:0}:null;var n}var Vo=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,r.ZT)(e,t),e}(Co),Uo=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return(0,r.ZT)(e,t),e}(Co);function jo(t,e){for(var n=zo(e),r=function(t){n.some((function(e){return Mi(e,t)}))||n.push(t)},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var Fo=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return(0,r.ZT)(e,t),e}(Co);function Go(t,e){for(var n=zo(e),r=function(t){n=n.filter((function(e){return!Mi(e,t)}))},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var qo=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).serializer=e,r.We=n,r}return(0,r.ZT)(e,t),e}(Co);function Bo(t){return Bi(t.integerValue||t.doubleValue)}function zo(t){return Ji(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}var Ko=function(){function t(t){this.fields=t,t.sort(qr.D)}return t.prototype.Je=function(t){for(var e=0,n=this.fields;e<n.length;e++)if(n[e].M(t))return!0;return!1},t.prototype.isEqual=function(t){return _r(this.fields,t.fields,(function(t,e){return t.isEqual(e)}))},t}(),Ho=function(t,e){this.field=t,this.transform=e},Jo=function(t,e){this.version=t,this.transformResults=e},Wo=function(){function t(t,e){this.updateTime=t,this.exists=e}return t.ze=function(){return new t},t.exists=function(e){return new t(void 0,e)},t.updateTime=function(e){return new t(e)},Object.defineProperty(t.prototype,"je",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)},t}();function Xo(t,e){return void 0!==t.updateTime?e instanceof ds&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e instanceof ds}var Yo=function(){};function Zo(t,e,n){return t instanceof ns?function(t,e,n){return new ds(t.key,n.version,t.value,{hasCommittedMutations:!0})}(t,0,n):t instanceof rs?function(t,e,n){if(!Xo(t.Ge,e))return new ys(t.key,n.version);var r=is(t,e);return new ds(t.key,n.version,r,{hasCommittedMutations:!0})}(t,e,n):t instanceof os?function(t,e,n){if(br(null!=n.transformResults),!Xo(t.Ge,e))return new ys(t.key,n.version);var r=ss(0,e),i=function(t,e,n){var r=[];br(t.length===n.length);for(var i=0;i<n.length;i++){var o=t[i],s=o.transform,a=null;e instanceof ds&&(a=e.field(o.field)),r.push(xo(s,a,n[i]))}return r}(t.fieldTransforms,e,n.transformResults),o=n.version,s=as(t,r.data(),i);return new ds(t.key,o,s,{hasCommittedMutations:!0})}(t,e,n):function(t,e,n){return new vs(t.key,n.version,{hasCommittedMutations:!0})}(t,0,n)}function Qo(t,e,n,r){return t instanceof ns?function(t,e){if(!Xo(t.Ge,e))return e;var n=es(e);return new ds(t.key,n,t.value,{Ye:!0})}(t,e):t instanceof rs?function(t,e){if(!Xo(t.Ge,e))return e;var n=es(e),r=is(t,e);return new ds(t.key,n,r,{Ye:!0})}(t,e):t instanceof os?function(t,e,n,r){if(!Xo(t.Ge,e))return e;var i=ss(0,e),o=function(t,e,n,r){for(var i=[],o=0,s=t;o<s.length;o++){var a=s[o],u=a.transform,c=null;n instanceof ds&&(c=n.field(a.field)),null===c&&r instanceof ds&&(c=r.field(a.field)),i.push(Ro(u,c,e))}return i}(t.fieldTransforms,n,e,r),s=as(t,i.data(),o);return new ds(t.key,i.version,s,{Ye:!0})}(t,e,r,n):function(t,e){return Xo(t.Ge,e)?new vs(t.key,Ur.min()):e}(t,e)}function $o(t,e){return t instanceof os?function(t,e){for(var n=null,r=0,i=t.fieldTransforms;r<i.length;r++){var o=i[r],s=e instanceof ds?e.field(o.field):void 0,a=Mo(o.transform,s||null);null!=a&&(n=null==n?(new fs).set(o.field,a):n.set(o.field,a))}return n?n.Xe():null}(t,e):null}function ts(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.Ge.isEqual(e.Ge)&&(0===t.type?t.value.isEqual(e.value):1===t.type?t.data.isEqual(e.data)&&t.Qe.isEqual(e.Qe):2!==t.type||_r(t.fieldTransforms,t.fieldTransforms,(function(t,e){return function(t,e){return t.field.isEqual(e.field)&&function(t,e){return t instanceof Uo&&e instanceof Uo||t instanceof Fo&&e instanceof Fo?_r(t.elements,e.elements,Mi):t instanceof qo&&e instanceof qo?Mi(t.We,e.We):t instanceof Vo&&e instanceof Vo}(t.transform,e.transform)}(t,e)})))}function es(t){return t instanceof ds?t.version:Ur.min()}var ns=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).key=e,i.value=n,i.Ge=r,i.type=0,i}return(0,r.ZT)(e,t),e}(Yo),rs=function(t){function e(e,n,r,i){var o=this;return(o=t.call(this)||this).key=e,o.data=n,o.Qe=r,o.Ge=i,o.type=1,o}return(0,r.ZT)(e,t),e}(Yo);function is(t,e){return function(t,e){var n=new fs(e);return t.Qe.fields.forEach((function(e){if(!e.P()){var r=t.data.field(e);null!==r?n.set(e,r):n.delete(e)}})),n.Xe()}(t,e instanceof ds?e.data():hs.empty())}var os=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.fieldTransforms=n,r.type=2,r.Ge=Wo.exists(!0),r}return(0,r.ZT)(e,t),e}(Yo);function ss(t,e){return e}function as(t,e,n){for(var r=new fs(e),i=0;i<t.fieldTransforms.length;i++){var o=t.fieldTransforms[i];r.set(o.field,n[i])}return r.Xe()}var us=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.Ge=n,r.type=3,r}return(0,r.ZT)(e,t),e}(Yo),cs=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.Ge=n,r.type=4,r}return(0,r.ZT)(e,t),e}(Yo),hs=function(){function t(t){this.proto=t}return t.empty=function(){return new t({mapValue:{}})},t.prototype.field=function(t){if(t.P())return this.proto;for(var e=this.proto,n=0;n<t.length-1;++n){if(!e.mapValue.fields)return null;if(!Yi(e=e.mapValue.fields[t.get(n)]))return null}return(e=(e.mapValue.fields||{})[t.O()])||null},t.prototype.isEqual=function(t){return Mi(this.proto,t.proto)},t}(),fs=function(){function t(t){void 0===t&&(t=hs.empty()),this.Ze=t,this.tn=new Map}return t.prototype.set=function(t,e){return this.en(t,e),this},t.prototype.delete=function(t){return this.en(t,null),this},t.prototype.en=function(t,e){for(var n=this.tn,r=0;r<t.length-1;++r){var i=t.get(r),o=n.get(i);o instanceof Map?n=o:o&&10===xi(o)?(o=new Map(Object.entries(o.mapValue.fields||{})),n.set(i,o),n=o):(o=new Map,n.set(i,o),n=o)}n.set(t.O(),e)},t.prototype.Xe=function(){var t=this.nn(qr.U(),this.tn);return null!=t?new hs(t):this.Ze},t.prototype.nn=function(t,e){var n=this,r=!1,i=this.Ze.field(t),o=Yi(i)?Object.assign({},i.mapValue.fields):{};return e.forEach((function(e,i){if(e instanceof Map){var s=n.nn(t.child(i),e);null!=s&&(o[i]=s,r=!0)}else null!==e?(o[i]=e,r=!0):o.hasOwnProperty(i)&&(delete o[i],r=!0)})),r?{mapValue:{fields:o}}:null},t}();function ls(t){var e=[];return Rr(t.fields||{},(function(t,n){var r=new qr([t]);if(Yi(n)){var i=ls(n.mapValue).fields;if(0===i.length)e.push(r);else for(var o=0,s=i;o<s.length;o++){var a=s[o];e.push(r.child(a))}}else e.push(r)})),new Ko(e)}var ps=function(t,e){this.key=t,this.version=e},ds=function(t){function e(e,n,r,i){var o=this;return(o=t.call(this,e,n)||this).sn=r,o.Ye=!!i.Ye,o.hasCommittedMutations=!!i.hasCommittedMutations,o}return(0,r.ZT)(e,t),e.prototype.field=function(t){return this.sn.field(t)},e.prototype.data=function(){return this.sn},e.prototype.rn=function(){return this.sn.proto},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.Ye===t.Ye&&this.hasCommittedMutations===t.hasCommittedMutations&&this.sn.isEqual(t.sn)},e.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+this.sn.toString()+", {hasLocalMutations: "+this.Ye+"}), {hasCommittedMutations: "+this.hasCommittedMutations+"})"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return this.Ye||this.hasCommittedMutations},enumerable:!1,configurable:!0}),e}(ps),vs=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n)||this).hasCommittedMutations=!(!r||!r.hasCommittedMutations),i}return(0,r.ZT)(e,t),e.prototype.toString=function(){return"NoDocument("+this.key+", "+this.version+")"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return this.hasCommittedMutations},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.hasCommittedMutations===this.hasCommittedMutations&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},e}(ps),ys=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,r.ZT)(e,t),e.prototype.toString=function(){return"UnknownDocument("+this.key+", "+this.version+")"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return!0},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},e}(ps),ms=function(t,e,n,r,i,o,s,a){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o="F"),void 0===s&&(s=null),void 0===a&&(a=null),this.path=t,this.collectionGroup=e,this.on=n,this.filters=r,this.limit=i,this.an=o,this.startAt=s,this.endAt=a,this.hn=null,this.cn=null,this.startAt,this.endAt};function gs(t,e,n,r,i,o,s,a){return new ms(t,e,n,r,i,o,s,a)}function bs(t){return new ms(t)}function ws(t){return!zr(t.limit)&&"F"===t.an}function Is(t){return!zr(t.limit)&&"L"===t.an}function Es(t){return t.on.length>0?t.on[0].field:null}function Ts(t){for(var e=0,n=t.filters;e<n.length;e++){var r=n[e];if(r.un())return r.field}return null}function _s(t){return null!==t.collectionGroup}function As(t){var e=wr(t);if(null===e.hn){e.hn=[];var n=Ts(e),r=Es(e);if(null!==n&&null===r)n.W()||e.hn.push(new Ws(n)),e.hn.push(new Ws(qr.j(),"asc"));else{for(var i=!1,o=0,s=e.on;o<s.length;o++){var a=s[o];e.hn.push(a),a.field.W()&&(i=!0)}if(!i){var u=e.on.length>0?e.on[e.on.length-1].dir:"asc";e.hn.push(new Ws(qr.j(),u))}}}return e.hn}function Ns(t){var e=wr(t);if(!e.cn)if("F"===e.an)e.cn=Wr(e.path,e.collectionGroup,As(e),e.filters,e.limit,e.startAt,e.endAt);else{for(var n=[],r=0,i=As(e);r<i.length;r++){var o=i[r],s="desc"===o.dir?"asc":"desc";n.push(new Ws(o.field,s))}var a=e.endAt?new zs(e.endAt.position,!e.endAt.before):null,u=e.startAt?new zs(e.startAt.position,!e.startAt.before):null;e.cn=Wr(e.path,e.collectionGroup,n,e.filters,e.limit,a,u)}return e.cn}function Ss(t,e,n){return new ms(t.path,t.collectionGroup,t.on.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function ks(t,e){return new ms(t.path,t.collectionGroup,t.on.slice(),t.filters.slice(),t.limit,t.an,e,t.endAt)}function Ds(t,e){return new ms(t.path,t.collectionGroup,t.on.slice(),t.filters.slice(),t.limit,t.an,t.startAt,e)}function Os(t,e){return Yr(Ns(t),Ns(e))&&t.an===e.an}function Ps(t){return Xr(Ns(t))+"|lt:"+t.an}function Ls(t){return"Query(target="+function(t){var e=t.path.B();return null!==t.collectionGroup&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=", filters: ["+t.filters.map((function(t){return(e=t).field.B()+" "+e.op+" "+Fi(e.value);var e})).join(", ")+"]"),zr(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=", orderBy: ["+t.orderBy.map((function(t){return(e=t).field.B()+" ("+e.dir+")";var e})).join(", ")+"]"),t.startAt&&(e+=", startAt: "+Ks(t.startAt)),t.endAt&&(e+=", endAt: "+Ks(t.endAt)),"Target("+e+")"}(Ns(t))+"; limitType="+t.an+")"}function Cs(t,e){return function(t,e){var n=e.key.path;return null!==t.collectionGroup?e.key.Y(t.collectionGroup)&&t.path.M(n):Br.X(t.path)?t.path.isEqual(n):t.path.$(n)}(t,e)&&function(t,e){for(var n=0,r=t.on;n<r.length;n++){var i=r[n];if(!i.field.W()&&null===e.field(i.field))return!1}return!0}(t,e)&&function(t,e){for(var n=0,r=t.filters;n<r.length;n++)if(!r[n].matches(e))return!1;return!0}(t,e)&&function(t,e){return!(t.startAt&&!Hs(t.startAt,As(t),e)||t.endAt&&Hs(t.endAt,As(t),e))}(t,e)}function Rs(t){return function(e,n){for(var r=!1,i=0,o=As(t);i<o.length;i++){var s=o[i],a=Xs(s,e,n);if(0!==a)return a;r=r||s.field.W()}return 0}}var xs=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).field=e,i.op=n,i.value=r,i}return(0,r.ZT)(e,t),e.create=function(t,n,r){return t.W()?"in"===n||"not-in"===n?this.ln(t,n,r):new Ms(t,n,r):"array-contains"===n?new Fs(t,r):"in"===n?new Gs(t,r):"not-in"===n?new qs(t,r):"array-contains-any"===n?new Bs(t,r):new e(t,n,r)},e.ln=function(t,e,n){return"in"===e?new Vs(t,n):new Us(t,n)},e.prototype.matches=function(t){var e=t.field(this.field);return"!="===this.op?null!==e&&this._n(Ui(e,this.value)):null!==e&&xi(this.value)===xi(e)&&this._n(Ui(e,this.value))},e.prototype._n=function(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return gr()}},e.prototype.un=function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0},e}((function(){})),Ms=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,r)||this).key=Br.J(r.referenceValue),i}return(0,r.ZT)(e,t),e.prototype.matches=function(t){var e=Br.D(t.key,this.key);return this._n(e)},e}(xs),Vs=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"in",n)||this).keys=js(0,n),r}return(0,r.ZT)(e,t),e.prototype.matches=function(t){return this.keys.some((function(e){return e.isEqual(t.key)}))},e}(xs),Us=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"not-in",n)||this).keys=js(0,n),r}return(0,r.ZT)(e,t),e.prototype.matches=function(t){return!this.keys.some((function(e){return e.isEqual(t.key)}))},e}(xs);function js(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(t){return Br.J(t.referenceValue)}))}var Fs=function(t){function e(e,n){return t.call(this,e,"array-contains",n)||this}return(0,r.ZT)(e,t),e.prototype.matches=function(t){var e=t.field(this.field);return Ji(e)&&Vi(e.arrayValue,this.value)},e}(xs),Gs=function(t){function e(e,n){return t.call(this,e,"in",n)||this}return(0,r.ZT)(e,t),e.prototype.matches=function(t){var e=t.field(this.field);return null!==e&&Vi(this.value.arrayValue,e)},e}(xs),qs=function(t){function e(e,n){return t.call(this,e,"not-in",n)||this}return(0,r.ZT)(e,t),e.prototype.matches=function(t){if(Vi(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var e=t.field(this.field);return null!==e&&!Vi(this.value.arrayValue,e)},e}(xs),Bs=function(t){function e(e,n){return t.call(this,e,"array-contains-any",n)||this}return(0,r.ZT)(e,t),e.prototype.matches=function(t){var e=this,n=t.field(this.field);return!(!Ji(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(t){return Vi(e.value.arrayValue,t)}))},e}(xs),zs=function(t,e){this.position=t,this.before=e};function Ks(t){return(t.before?"b":"a")+":"+t.position.map((function(t){return Fi(t)})).join(",")}function Hs(t,e,n){for(var r=0,i=0;i<t.position.length;i++){var o=e[i],s=t.position[i];if(r=o.field.W()?Br.D(Br.J(s.referenceValue),n.key):Ui(s,n.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return t.before?r<=0:r<0}function Js(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.before!==e.before||t.position.length!==e.position.length)return!1;for(var n=0;n<t.position.length;n++)if(!Mi(t.position[n],e.position[n]))return!1;return!0}var Ws=function(t,e){void 0===e&&(e="asc"),this.field=t,this.dir=e};function Xs(t,e,n){var r=t.field.W()?Br.D(e.key,n.key):function(t,e,n){var r=e.field(t),i=n.field(t);return null!==r&&null!==i?Ui(r,i):gr()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return gr()}}function Ys(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}var Zs=function(){var t=this;this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))},Qs=function(){function t(t,e,n,r,i){void 0===n&&(n=1e3),void 0===r&&(r=1.5),void 0===i&&(i=6e4),this.fn=t,this.dn=e,this.wn=n,this.En=r,this.Tn=i,this.In=0,this.mn=null,this.An=Date.now(),this.reset()}return t.prototype.reset=function(){this.In=0},t.prototype.Rn=function(){this.In=this.Tn},t.prototype.Pn=function(t){var e=this;this.cancel();var n=Math.floor(this.In+this.gn()),r=Math.max(0,Date.now()-this.An),i=Math.max(0,n-r);i>0&&dr("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.In+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.mn=this.fn.Vn(this.dn,i,(function(){return e.An=Date.now(),t()})),this.In*=this.En,this.In<this.wn&&(this.In=this.wn),this.In>this.Tn&&(this.In=this.Tn)},t.prototype.yn=function(){null!==this.mn&&(this.mn.pn(),this.mn=null)},t.prototype.cancel=function(){null!==this.mn&&(this.mn.cancel(),this.mn=null)},t.prototype.gn=function(){return(Math.random()-.5)*this.In},t}(),$s=function(){function t(t){var e=this;this.bn=null,this.vn=null,this.result=void 0,this.error=void 0,this.Sn=!1,this.Dn=!1,t((function(t){e.Sn=!0,e.result=t,e.bn&&e.bn(t)}),(function(t){e.Sn=!0,e.error=t,e.vn&&e.vn(t)}))}return t.prototype.catch=function(t){return this.next(void 0,t)},t.prototype.next=function(e,n){var r=this;return this.Dn&&gr(),this.Dn=!0,this.Sn?this.error?this.Cn(n,this.error):this.Nn(e,this.result):new t((function(t,i){r.bn=function(n){r.Nn(e,n).next(t,i)},r.vn=function(e){r.Cn(n,e).next(t,i)}}))},t.prototype.xn=function(){var t=this;return new Promise((function(e,n){t.next(e,n)}))},t.prototype.Fn=function(e){try{var n=e();return n instanceof t?n:t.resolve(n)}catch(e){return t.reject(e)}},t.prototype.Nn=function(e,n){return e?this.Fn((function(){return e(n)})):t.resolve(n)},t.prototype.Cn=function(e,n){return e?this.Fn((function(){return e(n)})):t.reject(n)},t.resolve=function(e){return new t((function(t,n){t(e)}))},t.reject=function(e){return new t((function(t,n){n(e)}))},t.kn=function(e){return new t((function(t,n){var r=0,i=0,o=!1;e.forEach((function(e){++r,e.next((function(){++i,o&&i===r&&t()}),(function(t){return n(t)}))})),o=!0,i===r&&t()}))},t.On=function(e){for(var n=t.resolve(!1),r=function(e){n=n.next((function(n){return n?t.resolve(n):e()}))},i=0,o=e;i<o.length;i++)r(o[i]);return n},t.forEach=function(t,e){var n=this,r=[];return t.forEach((function(t,i){r.push(e.call(n,t,i))})),this.kn(r)},t}(),ta=function(){function t(e,n,r){this.name=e,this.version=n,this.Mn=r,12.2===t.$n((0,s.z$)())&&vr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return t.delete=function(t){return dr("SimpleDb","Removing database:",t),sa(window.indexedDB.deleteDatabase(t)).xn()},t.Ln=function(){if("undefined"==typeof indexedDB)return!1;if(t.Bn())return!0;var e=(0,s.z$)(),n=t.$n(e),r=0<n&&n<10,i=t.qn(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)},t.Bn=function(){var t;return"undefined"!=typeof process&&"YES"===(null===(t=process.env)||void 0===t?void 0:t.Un)},t.Kn=function(t,e){return t.store(e)},t.$n=function(t){var e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(n)},t.qn=function(t){var e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)},t.prototype.Qn=function(t){return(0,r.mG)(this,void 0,void 0,(function(){var e,n=this;return(0,r.Jh)(this,(function(r){switch(r.label){case 0:return this.db?[3,2]:(dr("SimpleDb","Opening database:",this.name),e=this,[4,new Promise((function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){var n=t.target.result;e(n)},i.onblocked=function(){r(new na(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;"VersionError"===n.name?r(new fr(hr.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):r(new na(t,n))},i.onupgradeneeded=function(t){dr("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',t.oldVersion);var e=t.target.result;n.Mn.createOrUpgrade(e,i.transaction,t.oldVersion,n.version).next((function(){dr("SimpleDb","Database upgrade to version "+n.version+" complete")}))}}))]);case 1:e.db=r.sent(),r.label=2;case 2:return[2,(this.Wn&&(this.db.onversionchange=function(t){return n.Wn(t)}),this.db)]}}))}))},t.prototype.jn=function(t){this.Wn=t,this.db&&(this.db.onversionchange=function(e){return t(e)})},t.prototype.runTransaction=function(t,e,n,i){return(0,r.mG)(this,void 0,void 0,(function(){var o,s,a,u,c;return(0,r.Jh)(this,(function(h){switch(h.label){case 0:o="readonly"===e,s=0,a=function(){var e,a,c,h,f;return(0,r.Jh)(this,(function(r){switch(r.label){case 0:++s,r.label=1;case 1:return r.trys.push([1,4,,5]),[4,u.Qn(t)];case 2:return u.db=r.sent(),e=ia.open(u.db,t,o?"readonly":"readwrite",n),a=i(e).catch((function(t){return e.abort(t),$s.reject(t)})).xn(),c={},a.catch((function(){})),[4,e.Gn];case 3:return[2,(c.value=(r.sent(),a),c)];case 4:return h=r.sent(),f="FirebaseError"!==h.name&&s<3,dr("SimpleDb","Transaction failed with error:",h.message,"Retrying:",f),u.close(),f?[3,5]:[2,{value:Promise.reject(h)}];case 5:return[2]}}))},u=this,h.label=1;case 1:return[5,a()];case 2:if("object"==typeof(c=h.sent()))return[2,c.value];h.label=3;case 3:return[3,1];case 4:return[2]}}))}))},t.prototype.close=function(){this.db&&this.db.close(),this.db=void 0},t}(),ea=function(){function t(t){this.zn=t,this.Hn=!1,this.Jn=null}return Object.defineProperty(t.prototype,"Sn",{get:function(){return this.Hn},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Yn",{get:function(){return this.Jn},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cursor",{set:function(t){this.zn=t},enumerable:!1,configurable:!0}),t.prototype.done=function(){this.Hn=!0},t.prototype.Xn=function(t){this.Jn=t},t.prototype.delete=function(){return sa(this.zn.delete())},t}(),na=function(t){function e(e,n){var r=this;return(r=t.call(this,hr.UNAVAILABLE,"IndexedDB transaction '"+e+"' failed: "+n)||this).name="IndexedDbTransactionError",r}return(0,r.ZT)(e,t),e}(fr);function ra(t){return"IndexedDbTransactionError"===t.name}var ia=function(){function t(t,e){var n=this;this.action=t,this.transaction=e,this.aborted=!1,this.Zn=new Zs,this.transaction.oncomplete=function(){n.Zn.resolve()},this.transaction.onabort=function(){e.error?n.Zn.reject(new na(t,e.error)):n.Zn.resolve()},this.transaction.onerror=function(e){var r=ua(e.target.error);n.Zn.reject(new na(t,r))}}return t.open=function(e,n,r,i){try{return new t(n,e.transaction(i,r))}catch(e){throw new na(n,e)}},Object.defineProperty(t.prototype,"Gn",{get:function(){return this.Zn.promise},enumerable:!1,configurable:!0}),t.prototype.abort=function(t){t&&this.Zn.reject(t),this.aborted||(dr("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},t.prototype.store=function(t){var e=this.transaction.objectStore(t);return new oa(e)},t}(),oa=function(){function t(t){this.store=t}return t.prototype.put=function(t,e){var n;return void 0!==e?(dr("SimpleDb","PUT",this.store.name,t,e),n=this.store.put(e,t)):(dr("SimpleDb","PUT",this.store.name,"<auto-key>",t),n=this.store.put(t)),sa(n)},t.prototype.add=function(t){return dr("SimpleDb","ADD",this.store.name,t,t),sa(this.store.add(t))},t.prototype.get=function(t){var e=this;return sa(this.store.get(t)).next((function(n){return void 0===n&&(n=null),dr("SimpleDb","GET",e.store.name,t,n),n}))},t.prototype.delete=function(t){return dr("SimpleDb","DELETE",this.store.name,t),sa(this.store.delete(t))},t.prototype.count=function(){return dr("SimpleDb","COUNT",this.store.name),sa(this.store.count())},t.prototype.ts=function(t,e){var n=this.cursor(this.options(t,e)),r=[];return this.es(n,(function(t,e){r.push(e)})).next((function(){return r}))},t.prototype.ns=function(t,e){dr("SimpleDb","DELETE ALL",this.store.name);var n=this.options(t,e);n.ss=!1;var r=this.cursor(n);return this.es(r,(function(t,e,n){return n.delete()}))},t.prototype.rs=function(t,e){var n;e?n=t:(n={},e=t);var r=this.cursor(n);return this.es(r,e)},t.prototype.os=function(t){var e=this.cursor({});return new $s((function(n,r){e.onerror=function(t){var e=ua(t.target.error);r(e)},e.onsuccess=function(e){var r=e.target.result;r?t(r.primaryKey,r.value).next((function(t){t?r.continue():n()})):n()}}))},t.prototype.es=function(t,e){var n=[];return new $s((function(r,i){t.onerror=function(t){i(t.target.error)},t.onsuccess=function(t){var i=t.target.result;if(i){var o=new ea(i),s=e(i.primaryKey,i.value,o);if(s instanceof $s){var a=s.catch((function(t){return o.done(),$s.reject(t)}));n.push(a)}o.Sn?r():null===o.Yn?i.continue():i.continue(o.Yn)}else r()}})).next((function(){return $s.kn(n)}))},t.prototype.options=function(t,e){var n=void 0;return void 0!==t&&("string"==typeof t?n=t:e=t),{index:n,range:e}},t.prototype.cursor=function(t){var e="next";if(t.reverse&&(e="prev"),t.index){var n=this.store.index(t.index);return t.ss?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)},t}();function sa(t){return new $s((function(e,n){t.onsuccess=function(t){var n=t.target.result;e(n)},t.onerror=function(t){var e=ua(t.target.error);n(e)}}))}var aa=!1;function ua(t){var e=ta.$n((0,s.z$)());if(e>=12.2&&e<13){var n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){var r=new fr("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return aa||(aa=!0,setTimeout((function(){throw r}),0)),r}}return t}function ca(){return"undefined"!=typeof window?window:null}function ha(){return"undefined"!=typeof document?document:null}var fa=function(){function t(t,e,n,r,i){this.hs=t,this.dn=e,this.cs=n,this.op=r,this.us=i,this.ls=new Zs,this.then=this.ls.promise.then.bind(this.ls.promise),this.ls.promise.catch((function(t){}))}return t._s=function(e,n,r,i,o){var s=new t(e,n,Date.now()+r,i,o);return s.start(r),s},t.prototype.start=function(t){var e=this;this.fs=setTimeout((function(){return e.ds()}),t)},t.prototype.pn=function(){return this.ds()},t.prototype.cancel=function(t){null!==this.fs&&(this.clearTimeout(),this.ls.reject(new fr(hr.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},t.prototype.ds=function(){var t=this;this.hs.ws((function(){return null!==t.fs?(t.clearTimeout(),t.op().then((function(e){return t.ls.resolve(e)}))):Promise.resolve()}))},t.prototype.clearTimeout=function(){null!==this.fs&&(this.us(this),clearTimeout(this.fs),this.fs=null)},t}(),la=function(){function t(){var t=this;this.Es=Promise.resolve(),this.Ts=[],this.Is=!1,this.As=[],this.Rs=null,this.Ps=!1,this.gs=[],this.Vs=new Qs(this,"async_queue_retry"),this.ys=function(){var e=ha();e&&dr("AsyncQueue","Visibility state changed to  ",e.visibilityState),t.Vs.yn()};var e=ha();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.ys)}return Object.defineProperty(t.prototype,"ps",{get:function(){return this.Is},enumerable:!1,configurable:!0}),t.prototype.ws=function(t){this.enqueue(t)},t.prototype.bs=function(t){this.vs(),this.Ss(t)},t.prototype.Ds=function(){if(!this.Is){this.Is=!0;var t=ha();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.ys)}},t.prototype.enqueue=function(t){return this.vs(),this.Is?new Promise((function(t){})):this.Ss(t)},t.prototype.Cs=function(t){var e=this;this.ws((function(){return e.Ts.push(t),e.Ns()}))},t.prototype.Ns=function(){return(0,r.mG)(this,void 0,void 0,(function(){var t,e=this;return(0,r.Jh)(this,(function(n){switch(n.label){case 0:if(0===this.Ts.length)return[3,5];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.Ts[0]()];case 2:return n.sent(),this.Ts.shift(),this.Vs.reset(),[3,4];case 3:if(!ra(t=n.sent()))throw t;return dr("AsyncQueue","Operation failed with retryable error: "+t),[3,4];case 4:this.Ts.length>0&&this.Vs.Pn((function(){return e.Ns()})),n.label=5;case 5:return[2]}}))}))},t.prototype.Ss=function(t){var e=this,n=this.Es.then((function(){return e.Ps=!0,t().catch((function(t){throw e.Rs=t,e.Ps=!1,vr("INTERNAL UNHANDLED ERROR: ",function(t){var e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+"\n"+t.stack),e}(t)),t})).then((function(t){return e.Ps=!1,t}))}));return this.Es=n,n},t.prototype.Vn=function(t,e,n){var r=this;this.vs(),this.gs.indexOf(t)>-1&&(e=0);var i=fa._s(this,t,e,n,(function(t){return r.xs(t)}));return this.As.push(i),i},t.prototype.vs=function(){this.Rs&&gr()},t.prototype.Fs=function(){},t.prototype.ks=function(){return(0,r.mG)(this,void 0,void 0,(function(){var t;return(0,r.Jh)(this,(function(e){switch(e.label){case 0:return[4,t=this.Es];case 1:e.sent(),e.label=2;case 2:if(t!==this.Es)return[3,0];e.label=3;case 3:return[2]}}))}))},t.prototype.Os=function(t){for(var e=0,n=this.As;e<n.length;e++)if(n[e].dn===t)return!0;return!1},t.prototype.Ms=function(t){var e=this;return this.ks().then((function(){e.As.sort((function(t,e){return t.cs-e.cs}));for(var n=0,r=e.As;n<r.length;n++){var i=r[n];if(i.pn(),"all"!==t&&i.dn===t)break}return e.ks()}))},t.prototype.$s=function(t){this.gs.push(t)},t.prototype.xs=function(t){var e=this.As.indexOf(t);this.As.splice(e,1)},t}();function pa(t,e){if(vr("AsyncQueue",e+": "+t),ra(t))return new fr(hr.UNAVAILABLE,e+": "+t);throw t}var da=function(){this.Ls=void 0,this.listeners=[]},va=function(){this.Bs=new Mr((function(t){return Ps(t)}),Os),this.onlineState="Unknown",this.qs=new Set};function ya(t,e){return(0,r.mG)(this,void 0,void 0,(function(){var n,i,o,s,a,u,c;return(0,r.Jh)(this,(function(r){switch(r.label){case 0:if(n=wr(t),i=e.query,o=!1,(s=n.Bs.get(i))||(o=!0,s=new da),!o)return[3,4];r.label=1;case 1:return r.trys.push([1,3,,4]),a=s,[4,n.Us(i)];case 2:return a.Ls=r.sent(),[3,4];case 3:return u=r.sent(),c=pa(u,"Initialization of query '"+Ls(e.query)+"' failed"),[2,void e.onError(c)];case 4:return n.Bs.set(i,s),s.listeners.push(e),e.Ks(n.onlineState),s.Ls&&e.Qs(s.Ls)&&wa(n),[2]}}))}))}function ma(t,e){return(0,r.mG)(this,void 0,void 0,(function(){var n,i,o,s,a;return(0,r.Jh)(this,(function(r){return n=wr(t),i=e.query,o=!1,(s=n.Bs.get(i))&&(a=s.listeners.indexOf(e))>=0&&(s.listeners.splice(a,1),o=0===s.listeners.length),o?[2,(n.Bs.delete(i),n.Ws(i))]:[2]}))}))}function ga(t,e){for(var n=wr(t),r=!1,i=0,o=e;i<o.length;i++){var s=o[i],a=s.query,u=n.Bs.get(a);if(u){for(var c=0,h=u.listeners;c<h.length;c++)h[c].Qs(s)&&(r=!0);u.Ls=s}}r&&wa(n)}function ba(t,e,n){var r=wr(t),i=r.Bs.get(e);if(i)for(var o=0,s=i.listeners;o<s.length;o++)s[o].onError(n);r.Bs.delete(e)}function wa(t){t.qs.forEach((function(t){t.next()}))}var Ia=function(){function t(t,e,n){this.query=t,this.js=e,this.Gs=!1,this.zs=null,this.onlineState="Unknown",this.options=n||{}}return t.prototype.Qs=function(t){if(!this.options.includeMetadataChanges){for(var e=[],n=0,r=t.docChanges;n<r.length;n++){var i=r[n];3!==i.type&&e.push(i)}t=new Ii(t.query,t.docs,t.Kt,e,t.Qt,t.fromCache,t.Wt,!0)}var o=!1;return this.Gs?this.Hs(t)&&(this.js.next(t),o=!0):this.Js(t,this.onlineState)&&(this.Ys(t),o=!0),this.zs=t,o},t.prototype.onError=function(t){this.js.error(t)},t.prototype.Ks=function(t){this.onlineState=t;var e=!1;return this.zs&&!this.Gs&&this.Js(this.zs,t)&&(this.Ys(this.zs),e=!0),e},t.prototype.Js=function(t,e){if(!t.fromCache)return!0;var n="Offline"!==e;return!(this.options.Xs&&n||t.docs.P()&&"Offline"!==e)},t.prototype.Hs=function(t){if(t.docChanges.length>0)return!0;var e=this.zs&&this.zs.hasPendingWrites!==t.hasPendingWrites;return!(!t.Wt&&!e)&&!0===this.options.includeMetadataChanges},t.prototype.Ys=function(t){t=Ii.Gt(t.query,t.docs,t.Qt,t.fromCache),this.Gs=!0,this.js.next(t)},t}(),Ea=function(){function t(t){this.uid=t}return t.prototype.Zs=function(){return null!=this.uid},t.prototype.ti=function(){return this.Zs()?"uid:"+this.uid:"anonymous-user"},t.prototype.isEqual=function(t){return t.uid===this.uid},t}();Ea.UNAUTHENTICATED=new Ea(null),Ea.ei=new Ea("google-credentials-uid"),Ea.ni=new Ea("first-party-uid");var Ta=function(){function t(t,e){var n=this;this.previousValue=t,e&&(e.si=function(t){return n.ii(t)},this.ri=function(t){return e.oi(t)})}return t.prototype.ii=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},t.prototype.next=function(){var t=++this.previousValue;return this.ri&&this.ri(t),t},t}();function _a(t,e){return"firestore_clients_"+t+"_"+e}function Aa(t,e,n){var r="firestore_mutations_"+t+"_"+n;return e.Zs()&&(r+="_"+e.uid),r}function Na(t,e){return"firestore_targets_"+t+"_"+e}Ta.ai=-1;var Sa=function(){function t(t,e,n,r){this.user=t,this.batchId=e,this.state=n,this.error=r}return t.hi=function(e,n,r){var i=JSON.parse(r),o="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error),s=void 0;return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(s=new fr(i.error.code,i.error.message)),o?new t(e,n,i.state,s):(vr("SharedClientState","Failed to parse mutation state for ID '"+n+"': "+r),null)},t.prototype.ci=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),ka=function(){function t(t,e,n){this.targetId=t,this.state=e,this.error=n}return t.hi=function(e,n){var r=JSON.parse(n),i="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error),o=void 0;return i&&r.error&&(i="string"==typeof r.error.message&&"string"==typeof r.error.code)&&(o=new fr(r.error.code,r.error.message)),i?new t(e,r.state,o):(vr("SharedClientState","Failed to parse target state for ID '"+e+"': "+n),null)},t.prototype.ci=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),Da=function(){function t(t,e){this.clientId=t,this.activeTargetIds=e}return t.hi=function(e,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,o=gi(),s=0;i&&s<r.activeTargetIds.length;++s)i=Hr(r.activeTargetIds[s]),o=o.add(r.activeTargetIds[s]);return i?new t(e,o):(vr("SharedClientState","Failed to parse client data for instance '"+e+"': "+n),null)},t}(),Oa=function(){function t(t,e){this.clientId=t,this.onlineState=e}return t.hi=function(e){var n=JSON.parse(e);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new t(n.clientId,n.onlineState):(vr("SharedClientState","Failed to parse online state: "+e),null)},t}(),Pa=function(){function t(){this.activeTargetIds=gi()}return t.prototype.ui=function(t){this.activeTargetIds=this.activeTargetIds.add(t)},t.prototype.li=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},t.prototype.ci=function(){var t={activeTargetIds:this.activeTargetIds.L(),updateTimeMs:Date.now()};return JSON.stringify(t)},t}(),La=function(){function t(t,e,n,r,i){this.window=t,this.fn=e,this.persistenceKey=n,this._i=r,this.fi=null,this.di=null,this.si=null,this.wi=this.Ei.bind(this),this.Ti=new ii(Tr),this.Ii=!1,this.mi=[];var o=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.Ai=_a(this.persistenceKey,this._i),this.Ri=function(t){return"firestore_sequence_number_"+t}(this.persistenceKey),this.Ti=this.Ti.ot(this._i,new Pa),this.Pi=new RegExp("^firestore_clients_"+o+"_([^_]*)$"),this.gi=new RegExp("^firestore_mutations_"+o+"_(\\d+)(?:_(.*))?$"),this.Vi=new RegExp("^firestore_targets_"+o+"_(\\d+)$"),this.yi=function(t){return"firestore_online_state_"+t}(this.persistenceKey),this.window.addEventListener("storage",this.wi)}return t.Ln=function(t){return!(!t||!t.localStorage)},t.prototype.start=function(){return(0,r.mG)(this,void 0,void 0,(function(){var t,e,n,i,o,s,a,u,c,h,f,l=this;return(0,r.Jh)(this,(function(r){switch(r.label){case 0:return[4,this.fi.pi()];case 1:for(t=r.sent(),e=0,n=t;e<n.length;e++)(i=n[e])!==this._i&&(o=this.getItem(_a(this.persistenceKey,i)))&&(s=Da.hi(i,o))&&(this.Ti=this.Ti.ot(s.clientId,s));for(this.bi(),(a=this.storage.getItem(this.yi))&&(u=this.vi(a))&&this.Si(u),c=0,h=this.mi;c<h.length;c++)f=h[c],this.Ei(f);return this.mi=[],this.window.addEventListener("unload",(function(){return l.Di()})),this.Ii=!0,[2]}}))}))},t.prototype.oi=function(t){this.setItem(this.Ri,JSON.stringify(t))},t.prototype.Ci=function(){return this.Ni(this.Ti)},t.prototype.xi=function(t){var e=!1;return this.Ti.forEach((function(n,r){r.activeTargetIds.has(t)&&(e=!0)})),e},t.prototype.Fi=function(t){this.ki(t,"pending")},t.prototype.Oi=function(t,e,n){this.ki(t,e,n),this.Mi(t)},t.prototype.$i=function(t){var e="not-current";if(this.xi(t)){var n=this.storage.getItem(Na(this.persistenceKey,t));if(n){var r=ka.hi(t,n);r&&(e=r.state)}}return this.Li.ui(t),this.bi(),e},t.prototype.Bi=function(t){this.Li.li(t),this.bi()},t.prototype.qi=function(t){return this.Li.activeTargetIds.has(t)},t.prototype.Ui=function(t){this.removeItem(Na(this.persistenceKey,t))},t.prototype.Ki=function(t,e,n){this.Qi(t,e,n)},t.prototype.Wi=function(t,e,n){var r=this;e.forEach((function(t){r.Mi(t)})),this.currentUser=t,n.forEach((function(t){r.Fi(t)}))},t.prototype.ji=function(t){this.Gi(t)},t.prototype.Di=function(){this.Ii&&(this.window.removeEventListener("storage",this.wi),this.removeItem(this.Ai),this.Ii=!1)},t.prototype.getItem=function(t){var e=this.storage.getItem(t);return dr("SharedClientState","READ",t,e),e},t.prototype.setItem=function(t,e){dr("SharedClientState","SET",t,e),this.storage.setItem(t,e)},t.prototype.removeItem=function(t){dr("SharedClientState","REMOVE",t),this.storage.removeItem(t)},t.prototype.Ei=function(t){var e=this,n=t;if(n.storageArea===this.storage){if(dr("SharedClientState","EVENT",n.key,n.newValue),n.key===this.Ai)return void vr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.fn.Cs((function(){return(0,r.mG)(e,void 0,void 0,(function(){var t,e,i,o,s,a;return(0,r.Jh)(this,(function(r){if(this.Ii){if(null!==n.key)if(this.Pi.test(n.key)){if(null==n.newValue)return t=this.zi(n.key),[2,this.Hi(t,null)];if(e=this.Ji(n.key,n.newValue))return[2,this.Hi(e.clientId,e)]}else if(this.gi.test(n.key)){if(null!==n.newValue&&(i=this.Yi(n.key,n.newValue)))return[2,this.Xi(i)]}else if(this.Vi.test(n.key)){if(null!==n.newValue&&(o=this.Zi(n.key,n.newValue)))return[2,this.tr(o)]}else if(n.key===this.yi){if(null!==n.newValue&&(s=this.vi(n.newValue)))return[2,this.Si(s)]}else n.key===this.Ri&&(a=function(t){var e=Ta.ai;if(null!=t)try{var n=JSON.parse(t);br("number"==typeof n),e=n}catch(t){vr("SharedClientState","Failed to read sequence number from WebStorage",t)}return e}(n.newValue))!==Ta.ai&&this.si(a)}else this.mi.push(n);return[2]}))}))}))}},Object.defineProperty(t.prototype,"Li",{get:function(){return this.Ti.get(this._i)},enumerable:!1,configurable:!0}),t.prototype.bi=function(){this.setItem(this.Ai,this.Li.ci())},t.prototype.ki=function(t,e,n){var r=new Sa(this.currentUser,t,e,n),i=Aa(this.persistenceKey,this.currentUser,t);this.setItem(i,r.ci())},t.prototype.Mi=function(t){var e=Aa(this.persistenceKey,this.currentUser,t);this.removeItem(e)},t.prototype.Gi=function(t){var e={clientId:this._i,onlineState:t};this.storage.setItem(this.yi,JSON.stringify(e))},t.prototype.Qi=function(t,e,n){var r=Na(this.persistenceKey,t),i=new ka(t,e,n);this.setItem(r,i.ci())},t.prototype.zi=function(t){var e=this.Pi.exec(t);return e?e[1]:null},t.prototype.Ji=function(t,e){var n=this.zi(t);return Da.hi(n,e)},t.prototype.Yi=function(t,e){var n=this.gi.exec(t),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return Sa.hi(new Ea(i),r,e)},t.prototype.Zi=function(t,e){var n=this.Vi.exec(t),r=Number(n[1]);return ka.hi(r,e)},t.prototype.vi=function(t){return Oa.hi(t)},t.prototype.Xi=function(t){return(0,r.mG)(this,void 0,void 0,(function(){return(0,r.Jh)(this,(function(e){return t.user.uid===this.currentUser.uid?[2,this.fi.er(t.batchId,t.state,t.error)]:(dr("SharedClientState","Ignoring mutation for non-active user "+t.user.uid),[2])}))}))},t.prototype.tr=function(t){return this.fi.nr(t.targetId,t.state,t.error)},t.prototype.Hi=function(t,e){var n=this,r=e?this.Ti.ot(t,e):this.Ti.remove(t),i=this.Ni(this.Ti),o=this.Ni(r),s=[],a=[];return o.forEach((function(t){i.has(t)||s.push(t)})),i.forEach((function(t){o.has(t)||a.push(t)})),this.fi.sr(s,a).then((function(){n.Ti=r}))},t.prototype.Si=function(t){this.Ti.get(t.clientId)&&this.di(t.onlineState)},t.prototype.Ni=function(t){var e=gi();return t.forEach((function(t,n){e=e.Ot(n.activeTargetIds)})),e},t}(),Ca=function(){function t(){this.ir=new Pa,this.rr={},this.di=null,this.si=null}return t.prototype.Fi=function(t){},t.prototype.Oi=function(t,e,n){},t.prototype.$i=function(t){return this.ir.ui(t),this.rr[t]||"not-current"},t.prototype.Ki=function(t,e,n){this.rr[t]=e},t.prototype.Bi=function(t){this.ir.li(t)},t.prototype.qi=function(t){return this.ir.activeTargetIds.has(t)},t.prototype.Ui=function(t){delete this.rr[t]},t.prototype.Ci=function(){return this.ir.activeTargetIds},t.prototype.xi=function(t){return this.ir.activeTargetIds.has(t)},t.prototype.start=function(){return this.ir=new Pa,Promise.resolve()},t.prototype.Wi=function(t,e,n){},t.prototype.ji=function(t){},t.prototype.Di=function(){},t.prototype.oi=function(t){},t}(),Ra=function(){function t(t,e,n,r){this.batchId=t,this.ar=e,this.baseMutations=n,this.mutations=r}return t.prototype.hr=function(t,e,n){for(var r=n.cr,i=0;i<this.mutations.length;i++){var o=this.mutations[i];o.key.isEqual(t)&&(e=Zo(o,e,r[i]))}return e},t.prototype.ur=function(t,e){for(var n=0,r=this.baseMutations;n<r.length;n++){var i=r[n];i.key.isEqual(t)&&(e=Qo(i,e,e,this.ar))}for(var o=e,s=0,a=this.mutations;s<a.length;s++){var u=a[s];u.key.isEqual(t)&&(e=Qo(u,e,o,this.ar))}return e},t.prototype.lr=function(t){var e=this,n=t;return this.mutations.forEach((function(r){var i=e.ur(r.key,t.get(r.key));i&&(n=n.ot(r.key,i))})),n},t.prototype.keys=function(){return this.mutations.reduce((function(t,e){return t.add(e.key)}),yi())},t.prototype.isEqual=function(t){return this.batchId===t.batchId&&_r(this.mutations,t.mutations,(function(t,e){return ts(t,e)}))&&_r(this.baseMutations,t.baseMutations,(function(t,e){return ts(t,e)}))},t}(),xa=function(){function t(t,e,n,r){this.batch=t,this._r=e,this.cr=n,this.dr=r}return t.from=function(e,n,r){br(e.mutations.length===r.length);for(var i=di,o=e.mutations,s=0;s<o.length;s++)i=i.ot(o[s].key,r[s].version);return new t(e,n,r,i)},t}(),Ma=function(){function t(){this.wr=new Mr((function(t){return t.toString()}),(function(t,e){return t.isEqual(e)})),this.Er=!1}return Object.defineProperty(t.prototype,"readTime",{get:function(){return this.Tr},set:function(t){this.Tr=t},enumerable:!1,configurable:!0}),t.prototype.Ir=function(t,e){this.mr(),this.readTime=e,this.wr.set(t.key,t)},t.prototype.Ar=function(t,e){this.mr(),e&&(this.readTime=e),this.wr.set(t,null)},t.prototype.Rr=function(t,e){this.mr();var n=this.wr.get(e);return void 0!==n?$s.resolve(n):this.Pr(t,e)},t.prototype.getEntries=function(t,e){return this.gr(t,e)},t.prototype.apply=function(t){return this.mr(),this.Er=!0,this.Vr(t)},t.prototype.mr=function(){},t}(),Va="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Ua=function(){function t(){this.yr=[]}return t.prototype.pr=function(t){this.yr.push(t)},t.prototype.br=function(){this.yr.forEach((function(t){return t()}))},t}(),ja=function(){function t(t,e,n){this.vr=t,this.Sr=e,this.Dr=n}return t.prototype.Cr=function(t,e){var n=this;return this.Sr.Nr(t,e).next((function(r){return n.Fr(t,e,r)}))},t.prototype.Fr=function(t,e,n){return this.vr.Rr(t,e).next((function(t){for(var r=0,i=n;r<i.length;r++)t=i[r].ur(e,t);return t}))},t.prototype.kr=function(t,e,n){var r=fi();return e.forEach((function(t,e){for(var i=0,o=n;i<o.length;i++)e=o[i].ur(t,e);r=r.ot(t,e)})),r},t.prototype.Or=function(t,e){var n=this;return this.vr.getEntries(t,e).next((function(e){return n.Mr(t,e)}))},t.prototype.Mr=function(t,e){var n=this;return this.Sr.$r(t,e).next((function(r){var i=n.kr(t,e,r),o=hi();return i.forEach((function(t,e){e||(e=new vs(t,Ur.min())),o=o.ot(t,e)})),o}))},t.prototype.Lr=function(t,e,n){return function(t){return Br.X(t.path)&&null===t.collectionGroup&&0===t.filters.length}(e)?this.Br(t,e.path):_s(e)?this.qr(t,e,n):this.Ur(t,e,n)},t.prototype.Br=function(t,e){return this.Cr(t,new Br(e)).next((function(t){var e=pi();return t instanceof ds&&(e=e.ot(t.key,t)),e}))},t.prototype.qr=function(t,e,n){var r=this,i=e.collectionGroup,o=pi();return this.Dr.Kr(t,i).next((function(s){return $s.forEach(s,(function(s){var a=function(t,e){return new ms(e,null,t.on.slice(),t.filters.slice(),t.limit,t.an,t.startAt,t.endAt)}(e,s.child(i));return r.Ur(t,a,n).next((function(t){t.forEach((function(t,e){o=o.ot(t,e)}))}))})).next((function(){return o}))}))},t.prototype.Ur=function(t,e,n){var r,i,o=this;return this.vr.Lr(t,e,n).next((function(n){return r=n,o.Sr.Qr(t,e)})).next((function(e){return i=e,o.Wr(t,i,r).next((function(t){r=t;for(var e=0,n=i;e<n.length;e++)for(var o=n[e],s=0,a=o.mutations;s<a.length;s++){var u=a[s],c=u.key,h=r.get(c),f=Qo(u,h,h,o.ar);r=f instanceof ds?r.ot(c,f):r.remove(c)}}))})).next((function(){return r.forEach((function(t,n){Cs(e,n)||(r=r.remove(t))})),r}))},t.prototype.Wr=function(t,e,n){for(var r=yi(),i=0,o=e;i<o.length;i++)for(var s=0,a=o[i].mutations;s<a.length;s++){var u=a[s];u instanceof rs&&null===n.get(u.key)&&(r=r.add(u.key))}var c=n;return this.vr.getEntries(t,r).next((function(t){return t.forEach((function(t,e){null!==e&&e instanceof ds&&(c=c.ot(t,e))})),c}))},t}(),Fa=function(){function t(t,e,n,r){this.targetId=t,this.fromCache=e,this.jr=n,this.Gr=r}return t.zr=function(e,n){for(var r=yi(),i=yi(),o=0,s=n.docChanges;o<s.length;o++){var a=s[o];switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}}return new t(e,n.fromCache,r,i)},t}();function Ga(t,e){var n=t[0],r=t[1],i=e[0],o=e[1],s=Tr(n,i);return 0===s?Tr(r,o):s}var qa=function(){function t(t){this.Hr=t,this.buffer=new ai(Ga),this.Jr=0}return t.prototype.Yr=function(){return++this.Jr},t.prototype.Xr=function(t){var e=[t,this.Yr()];if(this.buffer.size<this.Hr)this.buffer=this.buffer.add(e);else{var n=this.buffer.last();Ga(e,n)<0&&(this.buffer=this.buffer.delete(n).add(e))}},Object.defineProperty(t.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!1,configurable:!0}),t}(),Ba={Zr:!1,eo:0,no:0,so:0},za=function(){function t(t,e,n){this.io=t,this.ro=e,this.oo=n}return t.ao=function(e){return new t(e,t.ho,t.co)},t}();za.uo=-1,za.lo=1048576,za._o=41943040,za.ho=10,za.co=1e3,za.fo=new za(za._o,za.ho,za.co),za.do=new za(za.uo,0,0);var Ka=function(){function t(t,e){this.wo=t,this.hs=e,this.Eo=!1,this.To=null}return t.prototype.start=function(t){this.wo.params.io!==za.uo&&this.Io(t)},t.prototype.stop=function(){this.To&&(this.To.cancel(),this.To=null)},Object.defineProperty(t.prototype,"Ii",{get:function(){return null!==this.To},enumerable:!1,configurable:!0}),t.prototype.Io=function(t){var e=this,n=this.Eo?3e5:6e4;dr("LruGarbageCollector","Garbage collection scheduled in "+n+"ms"),this.To=this.hs.Vn("lru_garbage_collection",n,(function(){return(0,r.mG)(e,void 0,void 0,(function(){var e;return(0,r.Jh)(this,(function(n){switch(n.label){case 0:this.To=null,this.Eo=!0,n.label=1;case 1:return n.trys.push([1,3,,7]),[4,t.mo(this.wo)];case 2:return n.sent(),[3,7];case 3:return ra(e=n.sent())?(dr("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e),[3,6]):[3,4];case 4:return[4,hc(e)];case 5:n.sent(),n.label=6;case 6:return[3,7];case 7:return[4,this.Io(t)];case 8:return n.sent(),[2]}}))}))}))},t}(),Ha=function(){function t(t,e){this.Ao=t,this.params=e}return t.prototype.Ro=function(t,e){return this.Ao.Po(t).next((function(t){return Math.floor(e/100*t)}))},t.prototype.Vo=function(t,e){var n=this;if(0===e)return $s.resolve(Ta.ai);var r=new qa(e);return this.Ao.Ce(t,(function(t){return r.Xr(t.sequenceNumber)})).next((function(){return n.Ao.yo(t,(function(t){return r.Xr(t)}))})).next((function(){return r.maxValue}))},t.prototype.po=function(t,e,n){return this.Ao.po(t,e,n)},t.prototype.bo=function(t,e){return this.Ao.bo(t,e)},t.prototype.vo=function(t,e){var n=this;return this.params.io===za.uo?(dr("LruGarbageCollector","Garbage collection skipped; disabled"),$s.resolve(Ba)):this.So(t).next((function(r){return r<n.params.io?(dr("LruGarbageCollector","Garbage collection skipped; Cache size "+r+" is lower than threshold "+n.params.io),Ba):n.Do(t,e)}))},t.prototype.So=function(t){return this.Ao.So(t)},t.prototype.Do=function(t,e){var n,r,i,s,a,u,c,h=this,f=Date.now();return this.Ro(t,this.params.ro).next((function(e){return e>h.params.oo?(dr("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+h.params.oo+" from "+e),r=h.params.oo):r=e,s=Date.now(),h.Vo(t,r)})).next((function(r){return n=r,a=Date.now(),h.po(t,n,e)})).next((function(e){return i=e,u=Date.now(),h.bo(t,n)})).next((function(t){return c=Date.now(),pr()<=o.in.DEBUG&&dr("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(s-f)+"ms\n\tDetermined least recently used "+r+" in "+(a-s)+"ms\n\tRemoved "+i+" targets in "+(u-a)+"ms\n\tRemoved "+t+" documents in "+(c-u)+"ms\nTotal Duration: "+(c-f)+"ms"),$s.resolve({Zr:!0,eo:r,no:i,so:t})}))},t}();function Ja(t){for(var e="",n=0;n<t.length;n++)e.length>0&&(e=Xa(e)),e=Wa(t.get(n),e);return Xa(e)}function Wa(t,e){for(var n=e,r=t.length,i=0;i<r;i++){var o=t.charAt(i);switch(o){case"\0":n+="";break;case"":n+="";break;default:n+=o}}return n}function Xa(t){return t+""}function Ya(t){var e=t.length;if(br(e>=2),2===e)return br(""===t.charAt(0)&&""===t.charAt(1)),Fr.U();for(var n=e-2,r=[],i="",o=0;o<e;){var s=t.indexOf("",o);switch((s<0||s>n)&&gr(),t.charAt(s+1)){case"":var a=t.substring(o,s),u=void 0;0===i.length?u=a:(u=i+=a,i=""),r.push(u);break;case"":i+=t.substring(o,s),i+="\0";break;case"":i+=t.substring(o,s+1);break;default:gr()}o=s+2}return new Fr(r)}var Za=function(t){this.Co=t};function Qa(t,e){if(e.document)return function(t,e,n){var r=ho(t,e.name),i=so(e.updateTime),o=new hs({mapValue:{fields:e.fields}});return new ds(r,i,o,{hasCommittedMutations:!!n})}(t.Co,e.document,!!e.hasCommittedMutations);if(e.noDocument){var n=Br.Z(e.noDocument.path),r=ru(e.noDocument.readTime);return new vs(n,r,{hasCommittedMutations:!!e.hasCommittedMutations})}if(e.unknownDocument){var i=Br.Z(e.unknownDocument.path),o=ru(e.unknownDocument.version);return new ys(i,o)}return gr()}function $a(t,e,n){var r=tu(n),i=e.key.path.F().L();if(e instanceof ds){var o=function(t,e){return{name:co(t,e.key),fields:e.rn().mapValue.fields,updateTime:ro(t,e.version.v())}}(t.Co,e),s=e.hasCommittedMutations;return new Du(null,null,o,s,r,i)}if(e instanceof vs){var a=e.key.path.L(),u=nu(e.version),c=e.hasCommittedMutations;return new Du(null,new Su(a,u),null,c,r,i)}if(e instanceof ys){var h=e.key.path.L(),f=nu(e.version);return new Du(new ku(h,f),null,null,!0,r,i)}return gr()}function tu(t){var e=t.v();return[e.seconds,e.nanoseconds]}function eu(t){var e=new Vr(t[0],t[1]);return Ur.V(e)}function nu(t){var e=t.v();return new Eu(e.seconds,e.nanoseconds)}function ru(t){var e=new Vr(t.seconds,t.nanoseconds);return Ur.V(e)}function iu(t,e){var n=(e.baseMutations||[]).map((function(e){return go(t.Co,e)})),r=e.mutations.map((function(e){return go(t.Co,e)})),i=Vr.fromMillis(e.localWriteTimeMs);return new Ra(e.batchId,i,n,r)}function ou(t){var e,n,r=ru(t.readTime),i=void 0!==t.lastLimboFreeSnapshotVersion?ru(t.lastLimboFreeSnapshotVersion):Ur.min();return void 0!==t.query.documents?(br(1===(n=t.query).documents.length),e=Ns(bs(lo(n.documents[0])))):e=Io(t.query),new ti(e,t.targetId,0,t.lastListenSequenceNumber,r,i,Nr.fromBase64String(t.resumeToken))}function su(t,e){var n,r=nu(e.nt),i=nu(e.lastLimboFreeSnapshotVersion);n=Zr(e.target)?bo(t.Co,e.target):wo(t.Co,e.target);var o=e.resumeToken.toBase64();return new Pu(e.targetId,Xr(e.target),r,o,e.sequenceNumber,i,n)}var au=function(){function t(t,e,n,r){this.userId=t,this.serializer=e,this.Dr=n,this.No=r,this.xo={}}return t.Fo=function(e,n,r,i){return br(""!==e.uid),new t(e.Zs()?e.uid:"",n,r,i)},t.prototype.ko=function(t){var e=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return hu(t).rs({index:Au.userMutationsIndex,range:n},(function(t,n,r){e=!1,r.done()})).next((function(){return e}))},t.prototype.Oo=function(t,e,n,r){var i=this,o=fu(t),s=hu(t);return s.add({}).next((function(a){br("number"==typeof a);for(var u=new Ra(a,e,n,r),c=function(t,e,n){var r=n.baseMutations.map((function(e){return mo(t.Co,e)})),i=n.mutations.map((function(e){return mo(t.Co,e)}));return new Au(e,n.batchId,n.ar.toMillis(),r,i)}(i.serializer,i.userId,u),h=[],f=new ai((function(t,e){return Tr(t.B(),e.B())})),l=0,p=r;l<p.length;l++){var d=p[l],v=Nu.key(i.userId,d.key.path,a);f=f.add(d.key.path.F()),h.push(s.put(c)),h.push(o.put(v,Nu.PLACEHOLDER))}return f.forEach((function(e){h.push(i.Dr.Mo(t,e))})),t.pr((function(){i.xo[a]=u.keys()})),$s.kn(h).next((function(){return u}))}))},t.prototype.$o=function(t,e){var n=this;return hu(t).get(e).next((function(t){return t?(br(t.userId===n.userId),iu(n.serializer,t)):null}))},t.prototype.Lo=function(t,e){var n=this;return this.xo[e]?$s.resolve(this.xo[e]):this.$o(t,e).next((function(t){if(t){var r=t.keys();return n.xo[e]=r,r}return null}))},t.prototype.Bo=function(t,e){var n=this,r=e+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return hu(t).rs({index:Au.userMutationsIndex,range:i},(function(t,e,i){e.userId===n.userId&&(br(e.batchId>=r),o=iu(n.serializer,e)),i.done()})).next((function(){return o}))},t.prototype.qo=function(t){var e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return hu(t).rs({index:Au.userMutationsIndex,range:e,reverse:!0},(function(t,e,r){n=e.batchId,r.done()})).next((function(){return n}))},t.prototype.Uo=function(t){var e=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return hu(t).ts(Au.userMutationsIndex,n).next((function(t){return t.map((function(t){return iu(e.serializer,t)}))}))},t.prototype.Nr=function(t,e){var n=this,r=Nu.prefixForPath(this.userId,e.path),i=IDBKeyRange.lowerBound(r),o=[];return fu(t).rs({range:i},(function(r,i,s){var a=r[0],u=r[1],c=r[2],h=Ya(u);if(a===n.userId&&e.path.isEqual(h))return hu(t).get(c).next((function(t){if(!t)throw gr();br(t.userId===n.userId),o.push(iu(n.serializer,t))}));s.done()})).next((function(){return o}))},t.prototype.$r=function(t,e){var n=this,r=new ai(Tr),i=[];return e.forEach((function(e){var o=Nu.prefixForPath(n.userId,e.path),s=IDBKeyRange.lowerBound(o),a=fu(t).rs({range:s},(function(t,i,o){var s=t[0],a=t[1],u=t[2],c=Ya(a);s===n.userId&&e.path.isEqual(c)?r=r.add(u):o.done()}));i.push(a)})),$s.kn(i).next((function(){return n.Ko(t,r)}))},t.prototype.Qr=function(t,e){var n=this,r=e.path,i=r.length+1,o=Nu.prefixForPath(this.userId,r),s=IDBKeyRange.lowerBound(o),a=new ai(Tr);return fu(t).rs({range:s},(function(t,e,o){var s=t[0],u=t[1],c=t[2],h=Ya(u);s===n.userId&&r.M(h)?h.length===i&&(a=a.add(c)):o.done()})).next((function(){return n.Ko(t,a)}))},t.prototype.Ko=function(t,e){var n=this,r=[],i=[];return e.forEach((function(e){i.push(hu(t).get(e).next((function(t){if(null===t)throw gr();br(t.userId===n.userId),r.push(iu(n.serializer,t))})))})),$s.kn(i).next((function(){return r}))},t.prototype.Qo=function(t,e){var n=this;return cu(t.Wo,this.userId,e).next((function(r){return t.pr((function(){n.jo(e.batchId)})),$s.forEach(r,(function(e){return n.No.Go(t,e)}))}))},t.prototype.jo=function(t){delete this.xo[t]},t.prototype.zo=function(t){var e=this;return this.ko(t).next((function(n){if(!n)return $s.resolve();var r=IDBKeyRange.lowerBound(Nu.prefixForUser(e.userId)),i=[];return fu(t).rs({range:r},(function(t,n,r){if(t[0]===e.userId){var o=Ya(t[1]);i.push(o)}else r.done()})).next((function(){br(0===i.length)}))}))},t.prototype.Ho=function(t,e){return uu(t,this.userId,e)},t.prototype.Jo=function(t){var e=this;return lu(t).get(this.userId).next((function(t){return t||new _u(e.userId,-1,"")}))},t}();function uu(t,e,n){var r=Nu.prefixForPath(e,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),s=!1;return fu(t).rs({range:o,ss:!0},(function(t,n,r){var o=t[0],a=t[1];t[2],o===e&&a===i&&(s=!0),r.done()})).next((function(){return s}))}function cu(t,e,n){var r=t.store(Au.store),i=t.store(Nu.store),o=[],s=IDBKeyRange.only(n.batchId),a=0,u=r.rs({range:s},(function(t,e,n){return a++,n.delete()}));o.push(u.next((function(){br(1===a)})));for(var c=[],h=0,f=n.mutations;h<f.length;h++){var l=f[h],p=Nu.key(e,l.key.path,n.batchId);o.push(i.delete(p)),c.push(l.key)}return $s.kn(o).next((function(){return c}))}function hu(t){return Ju.Kn(t,Au.store)}function fu(t){return Ju.Kn(t,Nu.store)}function lu(t){return Ju.Kn(t,_u.store)}var pu=function(){function t(t,e){this.serializer=t,this.Dr=e}return t.prototype.Ir=function(t,e,n){return yu(t).put(mu(e),n)},t.prototype.Ar=function(t,e){var n=yu(t),r=mu(e);return n.delete(r)},t.prototype.updateMetadata=function(t,e){var n=this;return this.getMetadata(t).next((function(r){return r.byteSize+=e,n.Yo(t,r)}))},t.prototype.Rr=function(t,e){var n=this;return yu(t).get(mu(e)).next((function(t){return n.Xo(t)}))},t.prototype.Zo=function(t,e){var n=this;return yu(t).get(mu(e)).next((function(t){var e=n.Xo(t);return e?{ta:e,size:gu(t)}:null}))},t.prototype.getEntries=function(t,e){var n=this,r=fi();return this.ea(t,e,(function(t,e){var i=n.Xo(e);r=r.ot(t,i)})).next((function(){return r}))},t.prototype.na=function(t,e){var n=this,r=fi(),i=new ii(Br.D);return this.ea(t,e,(function(t,e){var o=n.Xo(e);o?(r=r.ot(t,o),i=i.ot(t,gu(e))):(r=r.ot(t,null),i=i.ot(t,0))})).next((function(){return{sa:r,ia:i}}))},t.prototype.ea=function(t,e,n){if(e.P())return $s.resolve();var r=IDBKeyRange.bound(e.first().path.L(),e.last().path.L()),i=e._t(),o=i.It();return yu(t).rs({range:r},(function(t,e,r){for(var s=Br.Z(t);o&&Br.D(o,s)<0;)n(o,null),o=i.It();o&&o.isEqual(s)&&(n(o,e),o=i.At()?i.It():null),o?r.Xn(o.path.L()):r.done()})).next((function(){for(;o;)n(o,null),o=i.At()?i.It():null}))},t.prototype.Lr=function(t,e,n){var r=this,i=pi(),o=e.path.length+1,s={};if(n.isEqual(Ur.min())){var a=e.path.L();s.range=IDBKeyRange.lowerBound(a)}else{var u=e.path.L(),c=tu(n);s.range=IDBKeyRange.lowerBound([u,c],!0),s.index=Du.collectionReadTimeIndex}return yu(t).rs(s,(function(t,n,s){if(t.length===o){var a=Qa(r.serializer,n);e.path.M(a.key.path)?a instanceof ds&&Cs(e,a)&&(i=i.ot(a.key,a)):s.done()}})).next((function(){return i}))},t.prototype.ra=function(t){return new du(this,!!t&&t.oa)},t.prototype.aa=function(t){return this.getMetadata(t).next((function(t){return t.byteSize}))},t.prototype.getMetadata=function(t){return vu(t).get(Ou.key).next((function(t){return br(!!t),t}))},t.prototype.Yo=function(t,e){return vu(t).put(Ou.key,e)},t.prototype.Xo=function(t){if(t){var e=Qa(this.serializer,t);return e instanceof vs&&e.version.isEqual(Ur.min())?null:e}return null},t}(),du=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).ha=e,r.oa=n,r.ca=new Mr((function(t){return t.toString()}),(function(t,e){return t.isEqual(e)})),r}return(0,r.ZT)(e,t),e.prototype.Vr=function(t){var e=this,n=[],r=0,i=new ai((function(t,e){return Tr(t.B(),e.B())}));return this.wr.forEach((function(o,s){var a=e.ca.get(o);if(s){var u=$a(e.ha.serializer,s,e.readTime);i=i.add(o.path.F());var c=gu(u);r+=c-a,n.push(e.ha.Ir(t,o,u))}else if(r-=a,e.oa){var h=$a(e.ha.serializer,new vs(o,Ur.min()),e.readTime);n.push(e.ha.Ir(t,o,h))}else n.push(e.ha.Ar(t,o))})),i.forEach((function(r){n.push(e.ha.Dr.Mo(t,r))})),n.push(this.ha.updateMetadata(t,r)),$s.kn(n)},e.prototype.Pr=function(t,e){var n=this;return this.ha.Zo(t,e).next((function(t){return null===t?(n.ca.set(e,0),null):(n.ca.set(e,t.size),t.ta)}))},e.prototype.gr=function(t,e){var n=this;return this.ha.na(t,e).next((function(t){var e=t.sa;return t.ia.forEach((function(t,e){n.ca.set(t,e)})),e}))},e}(Ma);function vu(t){return Ju.Kn(t,Ou.store)}function yu(t){return Ju.Kn(t,Du.store)}function mu(t){return t.path.L()}function gu(t){var e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw gr();e=t.noDocument}return JSON.stringify(e).length}var bu=function(){function t(){this.ua=new wu}return t.prototype.Mo=function(t,e){return this.ua.add(e),$s.resolve()},t.prototype.Kr=function(t,e){return $s.resolve(this.ua.getEntries(e))},t}(),wu=function(){function t(){this.index={}}return t.prototype.add=function(t){var e=t.O(),n=t.F(),r=this.index[e]||new ai(Fr.D),i=!r.has(n);return this.index[e]=r.add(n),i},t.prototype.has=function(t){var e=t.O(),n=t.F(),r=this.index[e];return r&&r.has(n)},t.prototype.getEntries=function(t){return(this.index[t]||new ai(Fr.D)).L()},t}(),Iu=function(){function t(t){this.serializer=t}return t.prototype.createOrUpgrade=function(t,e,n,r){var i=this;br(n<r&&n>=0&&r<=10);var o=new ia("createOrUpgrade",e);n<1&&r>=1&&(function(t){t.createObjectStore(Tu.store)}(t),function(t){t.createObjectStore(_u.store,{keyPath:_u.keyPath}),t.createObjectStore(Au.store,{keyPath:Au.keyPath,autoIncrement:!0}).createIndex(Au.userMutationsIndex,Au.userMutationsKeyPath,{unique:!0}),t.createObjectStore(Nu.store)}(t),xu(t),function(t){t.createObjectStore(Du.store)}(t));var s=$s.resolve();return n<3&&r>=3&&(0!==n&&(function(t){t.deleteObjectStore(Lu.store),t.deleteObjectStore(Pu.store),t.deleteObjectStore(Cu.store)}(t),xu(t)),s=s.next((function(){return function(t){var e=t.store(Cu.store),n=new Cu(0,0,Ur.min().v(),0);return e.put(Cu.key,n)}(o)}))),n<4&&r>=4&&(0!==n&&(s=s.next((function(){return function(t,e){return e.store(Au.store).ts().next((function(n){t.deleteObjectStore(Au.store),t.createObjectStore(Au.store,{keyPath:Au.keyPath,autoIncrement:!0}).createIndex(Au.userMutationsIndex,Au.userMutationsKeyPath,{unique:!0});var r=e.store(Au.store),i=n.map((function(t){return r.put(t)}));return $s.kn(i)}))}(t,o)}))),s=s.next((function(){!function(t){t.createObjectStore(Mu.store,{keyPath:Mu.keyPath})}(t)}))),n<5&&r>=5&&(s=s.next((function(){return i.removeAcknowledgedMutations(o)}))),n<6&&r>=6&&(s=s.next((function(){return function(t){t.createObjectStore(Ou.store)}(t),i.addDocumentGlobal(o)}))),n<7&&r>=7&&(s=s.next((function(){return i.ensureSequenceNumbers(o)}))),n<8&&r>=8&&(s=s.next((function(){return i.createCollectionParentIndex(t,o)}))),n<9&&r>=9&&(s=s.next((function(){!function(t){t.objectStoreNames.contains("remoteDocumentChanges")&&t.deleteObjectStore("remoteDocumentChanges")}(t),function(t){var e=t.objectStore(Du.store);e.createIndex(Du.readTimeIndex,Du.readTimeIndexPath,{unique:!1}),e.createIndex(Du.collectionReadTimeIndex,Du.collectionReadTimeIndexPath,{unique:!1})}(e)}))),n<10&&r>=10&&(s=s.next((function(){return i.rewriteCanonicalIds(o)}))),s},t.prototype.addDocumentGlobal=function(t){var e=0;return t.store(Du.store).rs((function(t,n){e+=gu(n)})).next((function(){var n=new Ou(e);return t.store(Ou.store).put(Ou.key,n)}))},t.prototype.removeAcknowledgedMutations=function(t){var e=this,n=t.store(_u.store),r=t.store(Au.store);return n.ts().next((function(n){return $s.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.ts(Au.userMutationsIndex,i).next((function(r){return $s.forEach(r,(function(r){br(r.userId===n.userId);var i=iu(e.serializer,r);return cu(t,n.userId,i).next((function(){}))}))}))}))}))},t.prototype.ensureSequenceNumbers=function(t){var e=t.store(Lu.store),n=t.store(Du.store);return t.store(Cu.store).get(Cu.key).next((function(t){var r=[];return n.rs((function(n,i){var o=new Fr(n),s=function(t){return[0,Ja(t)]}(o);r.push(e.get(s).next((function(n){return n?$s.resolve():function(n){return e.put(new Lu(0,Ja(n),t.highestListenSequenceNumber))}(o)})))})).next((function(){return $s.kn(r)}))}))},t.prototype.createCollectionParentIndex=function(t,e){t.createObjectStore(Ru.store,{keyPath:Ru.keyPath});var n=e.store(Ru.store),r=new wu,i=function(t){if(r.add(t)){var e=t.O(),i=t.F();return n.put({collectionId:e,parent:Ja(i)})}};return e.store(Du.store).rs({ss:!0},(function(t,e){var n=new Fr(t);return i(n.F())})).next((function(){return e.store(Nu.store).rs({ss:!0},(function(t,e){t[0];var n=t[1],r=(t[2],Ya(n));return i(r.F())}))}))},t.prototype.rewriteCanonicalIds=function(t){var e=this,n=t.store(Pu.store);return n.rs((function(t,r){var i=ou(r),o=su(e.serializer,i);return n.put(o)}))},t}(),Eu=function(t,e){this.seconds=t,this.nanoseconds=e},Tu=function(t,e,n){this.ownerId=t,this.allowTabSynchronization=e,this.leaseTimestampMs=n};Tu.store="owner",Tu.key="owner";var _u=function(t,e,n){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=n};_u.store="mutationQueues",_u.keyPath="userId";var Au=function(t,e,n,r,i){this.userId=t,this.batchId=e,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i};Au.store="mutations",Au.keyPath="batchId",Au.userMutationsIndex="userMutationsIndex",Au.userMutationsKeyPath=["userId","batchId"];var Nu=function(){function t(){}return t.prefixForUser=function(t){return[t]},t.prefixForPath=function(t,e){return[t,Ja(e)]},t.key=function(t,e,n){return[t,Ja(e),n]},t}();Nu.store="documentMutations",Nu.PLACEHOLDER=new Nu;var Su=function(t,e){this.path=t,this.readTime=e},ku=function(t,e){this.path=t,this.version=e},Du=function(t,e,n,r,i,o){this.unknownDocument=t,this.noDocument=e,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=o};Du.store="remoteDocuments",Du.readTimeIndex="readTimeIndex",Du.readTimeIndexPath="readTime",Du.collectionReadTimeIndex="collectionReadTimeIndex",Du.collectionReadTimeIndexPath=["parentPath","readTime"];var Ou=function(t){this.byteSize=t};Ou.store="remoteDocumentGlobal",Ou.key="remoteDocumentGlobalKey";var Pu=function(t,e,n,r,i,o,s){this.targetId=t,this.canonicalId=e,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=o,this.query=s};Pu.store="targets",Pu.keyPath="targetId",Pu.queryTargetsIndexName="queryTargetsIndex",Pu.queryTargetsKeyPath=["canonicalId","targetId"];var Lu=function(t,e,n){this.targetId=t,this.path=e,this.sequenceNumber=n};Lu.store="targetDocuments",Lu.keyPath=["targetId","path"],Lu.documentTargetsIndex="documentTargetsIndex",Lu.documentTargetsKeyPath=["path","targetId"];var Cu=function(t,e,n,r){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=n,this.targetCount=r};Cu.key="targetGlobalKey",Cu.store="targetGlobal";var Ru=function(t,e){this.collectionId=t,this.parent=e};function xu(t){t.createObjectStore(Lu.store,{keyPath:Lu.keyPath}).createIndex(Lu.documentTargetsIndex,Lu.documentTargetsKeyPath,{unique:!0}),t.createObjectStore(Pu.store,{keyPath:Pu.keyPath}).createIndex(Pu.queryTargetsIndexName,Pu.queryTargetsKeyPath,{unique:!0}),t.createObjectStore(Cu.store)}Ru.store="collectionParents",Ru.keyPath=["collectionId","parent"];var Mu=function(t,e,n,r){this.clientId=t,this.updateTimeMs=e,this.networkEnabled=n,this.inForeground=r};Mu.store="clientMetadata",Mu.keyPath="clientId";var Vu=(0,r.pr)((0,r.pr)((0,r.pr)([_u.store,Au.store,Nu.store,Du.store,Pu.store,Tu.store,Cu.store,Lu.store],[Mu.store]),[Ou.store]),[Ru.store]),Uu=function(){function t(){this.la=new wu}return t.prototype.Mo=function(t,e){var n=this;if(!this.la.has(e)){var r=e.O(),i=e.F();t.pr((function(){n.la.add(e)}));var o={collectionId:r,parent:Ja(i)};return ju(t).put(o)}return $s.resolve()},t.prototype.Kr=function(t,e){var n=[],r=IDBKeyRange.bound([e,""],[Ar(e),""],!1,!0);return ju(t).ts(r).next((function(t){for(var r=0,i=t;r<i.length;r++){var o=i[r];if(o.collectionId!==e)break;n.push(Ya(o.parent))}return n}))},t}();function ju(t){return Ju.Kn(t,Ru.store)}var Fu=function(){function t(t){this._a=t}return t.prototype.next=function(){return this._a+=2,this._a},t.fa=function(){return new t(0)},t.da=function(){return new t(-1)},t}(),Gu=function(){function t(t,e){this.No=t,this.serializer=e}return t.prototype.wa=function(t){var e=this;return this.Ea(t).next((function(n){var r=new Fu(n.highestTargetId);return n.highestTargetId=r.next(),e.Ta(t,n).next((function(){return n.highestTargetId}))}))},t.prototype.Ia=function(t){return this.Ea(t).next((function(t){return Ur.V(new Vr(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))}))},t.prototype.ma=function(t){return this.Ea(t).next((function(t){return t.highestListenSequenceNumber}))},t.prototype.Aa=function(t,e,n){var r=this;return this.Ea(t).next((function(i){return i.highestListenSequenceNumber=e,n&&(i.lastRemoteSnapshotVersion=n.v()),e>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=e),r.Ta(t,i)}))},t.prototype.Ra=function(t,e){var n=this;return this.Pa(t,e).next((function(){return n.Ea(t).next((function(r){return r.targetCount+=1,n.ga(e,r),n.Ta(t,r)}))}))},t.prototype.Va=function(t,e){return this.Pa(t,e)},t.prototype.ya=function(t,e){var n=this;return this.pa(t,e.targetId).next((function(){return qu(t).delete(e.targetId)})).next((function(){return n.Ea(t)})).next((function(e){return br(e.targetCount>0),e.targetCount-=1,n.Ta(t,e)}))},t.prototype.po=function(t,e,n){var r=this,i=0,o=[];return qu(t).rs((function(s,a){var u=ou(a);u.sequenceNumber<=e&&null===n.get(u.targetId)&&(i++,o.push(r.ya(t,u)))})).next((function(){return $s.kn(o)})).next((function(){return i}))},t.prototype.Ce=function(t,e){return qu(t).rs((function(t,n){var r=ou(n);e(r)}))},t.prototype.Ea=function(t){return Bu(t).get(Cu.key).next((function(t){return br(null!==t),t}))},t.prototype.Ta=function(t,e){return Bu(t).put(Cu.key,e)},t.prototype.Pa=function(t,e){return qu(t).put(su(this.serializer,e))},t.prototype.ga=function(t,e){var n=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,n=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,n=!0),n},t.prototype.ba=function(t){return this.Ea(t).next((function(t){return t.targetCount}))},t.prototype.va=function(t,e){var n=Xr(e),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return qu(t).rs({range:r,index:Pu.queryTargetsIndexName},(function(t,n,r){var o=ou(n);Yr(e,o.target)&&(i=o,r.done())})).next((function(){return i}))},t.prototype.Sa=function(t,e,n){var r=this,i=[],o=zu(t);return e.forEach((function(e){var s=Ja(e.path);i.push(o.put(new Lu(n,s))),i.push(r.No.Da(t,n,e))})),$s.kn(i)},t.prototype.Ca=function(t,e,n){var r=this,i=zu(t);return $s.forEach(e,(function(e){var o=Ja(e.path);return $s.kn([i.delete([n,o]),r.No.Na(t,n,e)])}))},t.prototype.pa=function(t,e){var n=zu(t),r=IDBKeyRange.bound([e],[e+1],!1,!0);return n.delete(r)},t.prototype.xa=function(t,e){var n=IDBKeyRange.bound([e],[e+1],!1,!0),r=zu(t),i=yi();return r.rs({range:n,ss:!0},(function(t,e,n){var r=Ya(t[1]),o=new Br(r);i=i.add(o)})).next((function(){return i}))},t.prototype.Ho=function(t,e){var n=Ja(e.path),r=IDBKeyRange.bound([n],[Ar(n)],!1,!0),i=0;return zu(t).rs({index:Lu.documentTargetsIndex,ss:!0,range:r},(function(t,e,n){var r=t[0];t[1],0!==r&&(i++,n.done())})).next((function(){return i>0}))},t.prototype.Ue=function(t,e){return qu(t).get(e).next((function(t){return t?ou(t):null}))},t}();function qu(t){return Ju.Kn(t,Pu.store)}function Bu(t){return Ju.Kn(t,Cu.store)}function zu(t){return Ju.Kn(t,Lu.store)}var Ku="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",Hu=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Wo=e,r.Fa=n,r}return(0,r.ZT)(e,t),e}(Ua),Ju=function(){function t(e,n,r,i,o,s,a,u,c,h){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.fn=o,this.window=s,this.document=a,this.ka=c,this.Oa=h,this.Ma=null,this.$a=!1,this.isPrimary=!1,this.networkEnabled=!0,this.La=null,this.inForeground=!1,this.Ba=null,this.qa=null,this.Ua=Number.NEGATIVE_INFINITY,this.Ka=function(t){return Promise.resolve()},!t.Ln())throw new fr(hr.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.No=new Yu(this,i),this.Qa=n+"main",this.serializer=new Za(u),this.Wa=new ta(this.Qa,10,new Iu(this.serializer)),this.ja=new Gu(this.No,this.serializer),this.Dr=new Uu,this.vr=function(t,e){return new pu(t,e)}(this.serializer,this.Dr),this.window&&this.window.localStorage?this.Ga=this.window.localStorage:(this.Ga=null,!1===h&&vr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return t.Kn=function(t,e){if(t instanceof Hu)return ta.Kn(t.Wo,e);throw gr()},t.prototype.start=function(){var t=this;return this.za().then((function(){if(!t.isPrimary&&!t.allowTabSynchronization)throw new fr(hr.FAILED_PRECONDITION,Ku);return t.Ha(),t.Ja(),t.Ya(),t.runTransaction("getHighestListenSequenceNumber","readonly",(function(e){return t.ja.ma(e)}))})).then((function(e){t.Ma=new Ta(e,t.ka)})).then((function(){t.$a=!0})).catch((function(e){return t.Wa&&t.Wa.close(),Promise.reject(e)}))},t.prototype.Xa=function(t){var e=this;return this.Ka=function(n){return(0,r.mG)(e,void 0,void 0,(function(){return(0,r.Jh)(this,(function(e){return this.Ii?[2,t(n)]:[2]}))}))},t(this.isPrimary)},t.prototype.Za=function(t){var e=this;this.Wa.jn((function(n){return(0,r.mG)(e,void 0,void 0,(function(){return(0,r.Jh)(this,(function(e){switch(e.label){case 0:return null===n.newVersion?[4,t()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))}))},t.prototype.th=function(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.fn.ws((function(){return(0,r.mG)(e,void 0,void 0,(function(){return(0,r.Jh)(this,(function(t){switch(t.label){case 0:return this.Ii?[4,this.za()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))})))},t.prototype.za=function(){var t=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(e){return Xu(e).put(new Mu(t.clientId,Date.now(),t.networkEnabled,t.inForeground)).next((function(){if(t.isPrimary)return t.eh(e).next((function(e){e||(t.isPrimary=!1,t.fn.Cs((function(){return t.Ka(!1)})))}))})).next((function(){return t.nh(e)})).next((function(n){return t.isPrimary&&!n?t.sh(e).next((function(){return!1})):!!n&&t.ih(e).next((function(){return!0}))}))})).catch((function(e){if(ra(e))return dr("IndexedDbPersistence","Failed to extend owner lease: ",e),t.isPrimary;if(!t.allowTabSynchronization)throw e;return dr("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1})).then((function(e){t.isPrimary!==e&&t.fn.Cs((function(){return t.Ka(e)})),t.isPrimary=e}))},t.prototype.eh=function(t){var e=this;return Wu(t).get(Tu.key).next((function(t){return $s.resolve(e.rh(t))}))},t.prototype.oh=function(t){return Xu(t).delete(this.clientId)},t.prototype.ah=function(){return(0,r.mG)(this,void 0,void 0,(function(){var e,n,i,o,s=this;return(0,r.Jh)(this,(function(r){switch(r.label){case 0:return!this.isPrimary||this.hh(this.Ua,18e5)?[3,2]:(this.Ua=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(e){var n=t.Kn(e,Mu.store);return n.ts().next((function(t){var e=s.uh(t,18e5),r=t.filter((function(t){return-1===e.indexOf(t)}));return $s.forEach(r,(function(t){return n.delete(t.clientId)})).next((function(){return r}))}))})).catch((function(){return[]}))]);case 1:if(e=r.sent(),this.Ga)for(n=0,i=e;n<i.length;n++)o=i[n],this.Ga.removeItem(this.lh(o.clientId));r.label=2;case 2:return[2]}}))}))},t.prototype.Ya=function(){var t=this;this.qa=this.fn.Vn("client_metadata_refresh",4e3,(function(){return t.za().then((function(){return t.ah()})).then((function(){return t.Ya()}))}))},t.prototype.rh=function(t){return!!t&&t.ownerId===this.clientId},t.prototype.nh=function(t){var e=this;return this.Oa?$s.resolve(!0):Wu(t).get(Tu.key).next((function(n){if(null!==n&&e.hh(n.leaseTimestampMs,5e3)&&!e._h(n.ownerId)){if(e.rh(n)&&e.networkEnabled)return!0;if(!e.rh(n)){if(!n.allowTabSynchronization)throw new fr(hr.FAILED_PRECONDITION,Ku);return!1}}return!(!e.networkEnabled||!e.inForeground)||Xu(t).ts().next((function(t){return void 0===e.uh(t,5e3).find((function(t){if(e.clientId!==t.clientId){var n=!e.networkEnabled&&t.networkEnabled,r=!e.inForeground&&t.inForeground,i=e.networkEnabled===t.networkEnabled;if(n||r&&i)return!0}return!1}))}))})).next((function(t){return e.isPrimary!==t&&dr("IndexedDbPersistence","Client "+(t?"is":"is not")+" eligible for a primary lease."),t}))},t.prototype.Di=function(){return(0,r.mG)(this,void 0,void 0,(function(){var t=this;return(0,r.Jh)(this,(function(e){switch(e.label){case 0:return this.$a=!1,this.fh(),this.qa&&(this.qa.cancel(),this.qa=null),this.dh(),this.wh(),[4,this.Wa.runTransaction("shutdown","readwrite",[Tu.store,Mu.store],(function(e){var n=new Hu(e,Ta.ai);return t.sh(n).next((function(){return t.oh(n)}))}))];case 1:return e.sent(),this.Wa.close(),this.Eh(),[2]}}))}))},t.prototype.uh=function(t,e){var n=this;return t.filter((function(t){return n.hh(t.updateTimeMs,e)&&!n._h(t.clientId)}))},t.prototype.pi=function(){var t=this;return this.runTransaction("getActiveClients","readonly",(function(e){return Xu(e).ts().next((function(e){return t.uh(e,18e5).map((function(t){return t.clientId}))}))}))},Object.defineProperty(t.prototype,"Ii",{get:function(){return this.$a},enumerable:!1,configurable:!0}),t.prototype.Th=function(t){return au.Fo(t,this.serializer,this.Dr,this.No)},t.prototype.Ih=function(){return this.ja},t.prototype.mh=function(){return this.vr},t.prototype.Ah=function(){return this.Dr},t.prototype.runTransaction=function(t,e,n){var r=this;dr("IndexedDbPersistence","Starting transaction:",t);var i,o="readonly"===e?"readonly":"readwrite";return this.Wa.runTransaction(t,o,Vu,(function(o){return i=new Hu(o,r.Ma?r.Ma.next():Ta.ai),"readwrite-primary"===e?r.eh(i).next((function(t){return!!t||r.nh(i)})).next((function(e){if(!e)throw vr("Failed to obtain primary lease for action '"+t+"'."),r.isPrimary=!1,r.fn.Cs((function(){return r.Ka(!1)})),new fr(hr.FAILED_PRECONDITION,Va);return n(i)})).next((function(t){return r.ih(i).next((function(){return t}))})):r.Rh(i).next((function(){return n(i)}))})).then((function(t){return i.br(),t}))},t.prototype.Rh=function(t){var e=this;return Wu(t).get(Tu.key).next((function(t){if(null!==t&&e.hh(t.leaseTimestampMs,5e3)&&!e._h(t.ownerId)&&!e.rh(t)&&!(e.Oa||e.allowTabSynchronization&&t.allowTabSynchronization))throw new fr(hr.FAILED_PRECONDITION,Ku)}))},t.prototype.ih=function(t){var e=new Tu(this.clientId,this.allowTabSynchronization,Date.now());return Wu(t).put(Tu.key,e)},t.Ln=function(){return ta.Ln()},t.prototype.sh=function(t){var e=this,n=Wu(t);return n.get(Tu.key).next((function(t){return e.rh(t)?(dr("IndexedDbPersistence","Releasing primary lease."),n.delete(Tu.key)):$s.resolve()}))},t.prototype.hh=function(t,e){var n=Date.now();return!(t<n-e||t>n&&(vr("Detected an update time that is in the future: "+t+" > "+n),1))},t.prototype.Ha=function(){var t=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Ba=function(){t.fn.ws((function(){return t.inForeground="visible"===t.document.visibilityState,t.za()}))},this.document.addEventListener("visibilitychange",this.Ba),this.inForeground="visible"===this.document.visibilityState)},t.prototype.dh=function(){this.Ba&&(this.document.removeEventListener("visibilitychange",this.Ba),this.Ba=null)},t.prototype.Ja=function(){var t,e=this;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.La=function(){e.fh(),e.fn.ws((function(){return e.Di()}))},this.window.addEventListener("unload",this.La))},t.prototype.wh=function(){this.La&&(this.window.removeEventListener("unload",this.La),this.La=null)},t.prototype._h=function(t){var e;try{var n=null!==(null===(e=this.Ga)||void 0===e?void 0:e.getItem(this.lh(t)));return dr("IndexedDbPersistence","Client '"+t+"' "+(n?"is":"is not")+" zombied in LocalStorage"),n}catch(t){return vr("IndexedDbPersistence","Failed to get zombied client id.",t),!1}},t.prototype.fh=function(){if(this.Ga)try{this.Ga.setItem(this.lh(this.clientId),String(Date.now()))}catch(t){vr("Failed to set zombie client id.",t)}},t.prototype.Eh=function(){if(this.Ga)try{this.Ga.removeItem(this.lh(this.clientId))}catch(t){}},t.prototype.lh=function(t){return"firestore_zombie_"+this.persistenceKey+"_"+t},t}();function Wu(t){return Ju.Kn(t,Tu.store)}function Xu(t){return Ju.Kn(t,Mu.store)}var Yu=function(){function t(t,e){this.db=t,this.wo=new Ha(this,e)}return t.prototype.Po=function(t){var e=this.Ph(t);return this.db.Ih().ba(t).next((function(t){return e.next((function(e){return t+e}))}))},t.prototype.Ph=function(t){var e=0;return this.yo(t,(function(t){e++})).next((function(){return e}))},t.prototype.Ce=function(t,e){return this.db.Ih().Ce(t,e)},t.prototype.yo=function(t,e){return this.gh(t,(function(t,n){return e(n)}))},t.prototype.Da=function(t,e,n){return Zu(t,n)},t.prototype.Na=function(t,e,n){return Zu(t,n)},t.prototype.po=function(t,e,n){return this.db.Ih().po(t,e,n)},t.prototype.Go=function(t,e){return Zu(t,e)},t.prototype.Vh=function(t,e){return function(t,e){var n=!1;return lu(t).os((function(r){return uu(t,r,e).next((function(t){return t&&(n=!0),$s.resolve(!t)}))})).next((function(){return n}))}(t,e)},t.prototype.bo=function(t,e){var n=this,r=this.db.mh().ra(),i=[],o=0;return this.gh(t,(function(s,a){if(a<=e){var u=n.Vh(t,s).next((function(e){if(!e)return o++,r.Rr(t,s).next((function(){return r.Ar(s),zu(t).delete([0,Ja(s.path)])}))}));i.push(u)}})).next((function(){return $s.kn(i)})).next((function(){return r.apply(t)})).next((function(){return o}))},t.prototype.removeTarget=function(t,e){var n=e.st(t.Fa);return this.db.Ih().Va(t,n)},t.prototype.yh=function(t,e){return Zu(t,e)},t.prototype.gh=function(t,e){var n,r=zu(t),i=Ta.ai;return r.rs({index:Lu.documentTargetsIndex},(function(t,r){var o=t[0],s=(t[1],r.path),a=r.sequenceNumber;0===o?(i!==Ta.ai&&e(new Br(Ya(n)),i),i=a,n=s):i=Ta.ai})).next((function(){i!==Ta.ai&&e(new Br(Ya(n)),i)}))},t.prototype.So=function(t){return this.db.mh().aa(t)},t}();function Zu(t,e){return zu(t).put(function(t,e){return new Lu(0,Ja(t.path),e)}(e,t.Fa))}function Qu(t,e){var n=t.projectId;return t.I||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}var $u=function(){function t(t,e,n){this.persistence=t,this.ph=e,this.bh=new ii(Tr),this.Sh=new Mr((function(t){return Xr(t)}),Yr),this.Dh=Ur.min(),this.Sr=t.Th(n),this.Ch=t.mh(),this.ja=t.Ih(),this.Nh=new ja(this.Ch,this.Sr,this.persistence.Ah()),this.ph.xh(this.Nh)}return t.prototype.mo=function(t){var e=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return t.vo(n,e.bh)}))},t}();function tc(t,e){var n=wr(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(t){var r=e.batch.keys(),i=n.Ch.ra({oa:!0});return function(t,e,n,r){var i=n.batch,o=i.keys(),s=$s.resolve();return o.forEach((function(t){s=s.next((function(){return r.Rr(e,t)})).next((function(e){var o=e,s=n.dr.get(t);br(null!==s),(!o||o.version.h(s)<0)&&(o=i.hr(t,o,n))&&r.Ir(o,n._r)}))})),s.next((function(){return t.Sr.Qo(e,i)}))}(n,t,e,i).next((function(){return i.apply(t)})).next((function(){return n.Sr.zo(t)})).next((function(){return n.Nh.Or(t,r)}))}))}function ec(t){var e=wr(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(function(t){return e.ja.Ia(t)}))}function nc(t,e){var n=wr(t),r=e.nt,i=n.bh;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(t){var o=n.Ch.ra({oa:!0});i=n.bh;var s=[];e.zt.forEach((function(e,o){var a=i.get(o);if(a){s.push(n.ja.Ca(t,e.se,o).next((function(){return n.ja.Sa(t,e.ee,o)})));var u=e.resumeToken;if(u.o()>0){var c=a.it(u,r).st(t.Fa);i=i.ot(o,c),function(t,e,n){return br(e.resumeToken.o()>0),0===t.resumeToken.o()||e.nt.p()-t.nt.p()>=3e8||n.ee.size+n.ne.size+n.se.size>0}(a,c,e)&&s.push(n.ja.Va(t,c))}}}));var a=hi(),u=yi();if(e.Jt.forEach((function(t,e){u=u.add(t)})),s.push(o.getEntries(t,u).next((function(i){e.Jt.forEach((function(u,c){var h=i.get(u);c instanceof vs&&c.version.isEqual(Ur.min())?(o.Ar(u,r),a=a.ot(u,c)):null==h||c.version.h(h.version)>0||0===c.version.h(h.version)&&h.hasPendingWrites?(o.Ir(c,r),a=a.ot(u,c)):dr("LocalStore","Ignoring outdated watch update for ",u,". Current version:",h.version," Watch version:",c.version),e.Yt.has(u)&&s.push(n.persistence.No.yh(t,u))}))}))),!r.isEqual(Ur.min())){var c=n.ja.Ia(t).next((function(e){return n.ja.Aa(t,t.Fa,r)}));s.push(c)}return $s.kn(s).next((function(){return o.apply(t)})).next((function(){return n.Nh.Mr(t,a)}))})).then((function(t){return n.bh=i,t}))}function rc(t,e){var n=wr(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(t){return void 0===e&&(e=-1),n.Sr.Bo(t,e)}))}function ic(t,e){var n=wr(t);return n.persistence.runTransaction("Allocate target","readwrite",(function(t){var r;return n.ja.va(t,e).next((function(i){return i?(r=i,$s.resolve(r)):n.ja.wa(t).next((function(i){return r=new ti(e,i,0,t.Fa),n.ja.Ra(t,r).next((function(){return r}))}))}))})).then((function(t){var r=n.bh.get(t.targetId);return(null===r||t.nt.h(r.nt)>0)&&(n.bh=n.bh.ot(t.targetId,t),n.Sh.set(e,t.targetId)),t}))}function oc(t,e,n){return(0,r.mG)(this,void 0,void 0,(function(){var i,o,s,a;return(0,r.Jh)(this,(function(r){switch(r.label){case 0:i=wr(t),o=i.bh.get(e),s=n?"readwrite":"readwrite-primary",r.label=1;case 1:return r.trys.push([1,4,,5]),n?[3,3]:[4,i.persistence.runTransaction("Release target",s,(function(t){return i.persistence.No.removeTarget(t,o)}))];case 2:r.sent(),r.label=3;case 3:return[3,5];case 4:if(!ra(a=r.sent()))throw a;return dr("LocalStore","Failed to update sequence numbers for target "+e+": "+a),[3,5];case 5:return i.bh=i.bh.remove(e),i.Sh.delete(o.target),[2]}}))}))}function sc(t,e,n){var r=wr(t),i=Ur.min(),o=yi();return r.persistence.runTransaction("Execute query","readonly",(function(t){return function(t,e,n){var r=wr(t),i=r.Sh.get(n);return void 0!==i?$s.resolve(r.bh.get(i)):r.ja.va(e,n)}(r,t,Ns(e)).next((function(e){if(e)return i=e.lastLimboFreeSnapshotVersion,r.ja.xa(t,e.targetId).next((function(t){o=t}))})).next((function(){return r.ph.Lr(t,e,n?i:Ur.min(),n?o:yi())})).next((function(t){return{documents:t,Fh:o}}))}))}function ac(t,e){var n=wr(t),r=wr(n.ja),i=n.bh.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(function(t){return r.Ue(t,e).next((function(t){return t?t.target:null}))}))}function uc(t){var e=wr(t);return e.persistence.runTransaction("Get new document changes","readonly",(function(t){return function(t,e,n){var r=wr(t),i=hi(),o=tu(n),s=yu(e),a=IDBKeyRange.lowerBound(o,!0);return s.rs({index:Du.readTimeIndex,range:a},(function(t,e){var n=Qa(r.serializer,e);i=i.ot(n.key,n),o=e.readTime})).next((function(){return{kh:i,readTime:eu(o)}}))}(e.Ch,t,e.Dh)})).then((function(t){var n=t.kh,r=t.readTime;return e.Dh=r,n}))}function cc(t){return(0,r.mG)(this,void 0,void 0,(function(){var e;return(0,r.Jh)(this,(function(n){return[2,(e=wr(t)).persistence.runTransaction("Synchronize last document change read time","readonly",(function(t){return function(t){var e=yu(t),n=Ur.min();return e.rs({index:Du.readTimeIndex,reverse:!0},(function(t,e,r){e.readTime&&(n=eu(e.readTime)),r.done()})).next((function(){return n}))}(t)})).then((function(t){e.Dh=t}))]}))}))}function hc(t){return(0,r.mG)(this,void 0,void 0,(function(){return(0,r.Jh)(this,(function(e){if(t.code!==hr.FAILED_PRECONDITION||t.message!==Va)throw t;return dr("LocalStore","Unexpectedly lost primary lease"),[2]}))}))}var fc=function(){function t(){this.Oh=new ai(lc.Mh),this.$h=new ai(lc.Lh)}return t.prototype.P=function(){return this.Oh.P()},t.prototype.Da=function(t,e){var n=new lc(t,e);this.Oh=this.Oh.add(n),this.$h=this.$h.add(n)},t.prototype.Bh=function(t,e){var n=this;t.forEach((function(t){return n.Da(t,e)}))},t.prototype.Na=function(t,e){this.qh(new lc(t,e))},t.prototype.Uh=function(t,e){var n=this;t.forEach((function(t){return n.Na(t,e)}))},t.prototype.Kh=function(t){var e=this,n=new Br(new Fr([])),r=new lc(n,t),i=new lc(n,t+1),o=[];return this.$h.xt([r,i],(function(t){e.qh(t),o.push(t.key)})),o},t.prototype.Qh=function(){var t=this;this.Oh.forEach((function(e){return t.qh(e)}))},t.prototype.qh=function(t){this.Oh=this.Oh.delete(t),this.$h=this.$h.delete(t)},t.prototype.Wh=function(t){var e=new Br(new Fr([])),n=new lc(e,t),r=new lc(e,t+1),i=yi();return this.$h.xt([n,r],(function(t){i=i.add(t.key)})),i},t.prototype.Ho=function(t){var e=new lc(t,0),n=this.Oh.kt(e);return null!==n&&t.isEqual(n.key)},t}(),lc=function(){function t(t,e){this.key=t,this.jh=e}return t.Mh=function(t,e){return Br.D(t.key,e.key)||Tr(t.jh,e.jh)},t.Lh=function(t,e){return Tr(t.jh,e.jh)||Br.D(t.key,e.key)},t}(),pc=function(t,e){this.user=e,this.type="OAuth",this.Gh={},this.Gh.Authorization="Bearer "+t},dc=function(){function t(){this.zh=null}return t.prototype.getToken=function(){return Promise.resolve(null)},t.prototype.Hh=function(){},t.prototype.Jh=function(t){this.zh=t,t(Ea.UNAUTHENTICATED)},t.prototype.Yh=function(){this.zh=null},t}(),vc=function(){function t(t){var e=this;this.Xh=null,this.currentUser=Ea.UNAUTHENTICATED,this.Zh=!1,this.tc=0,this.zh=null,this.forceRefresh=!1,this.Xh=function(){e.tc++,e.currentUser=e.ec(),e.Zh=!0,e.zh&&e.zh(e.currentUser)},this.tc=0,this.auth=t.getImmediate({optional:!0}),this.auth?this.auth.addAuthTokenListener(this.Xh):(this.Xh(null),t.get().then((function(t){e.auth=t,e.Xh&&e.auth.addAuthTokenListener(e.Xh)}),(function(){})))}return t.prototype.getToken=function(){var t=this,e=this.tc,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return t.tc!==e?(dr("FirebaseCredentialsProvider","getToken aborted due to token change."),t.getToken()):n?(br("string"==typeof n.accessToken),new pc(n.accessToken,t.currentUser)):null})):Promise.resolve(null)},t.prototype.Hh=function(){this.forceRefresh=!0},t.prototype.Jh=function(t){this.zh=t,this.Zh&&t(this.currentUser)},t.prototype.Yh=function(){this.auth&&this.auth.removeAuthTokenListener(this.Xh),this.Xh=null,this.zh=null},t.prototype.ec=function(){var t=this.auth&&this.auth.getUid();return br(null===t||"string"==typeof t),new Ea(t)},t}(),yc=function(){function t(t,e){this.nc=t,this.sc=e,this.type="FirstParty",this.user=Ea.ni}return Object.defineProperty(t.prototype,"Gh",{get:function(){var t={"X-Goog-AuthUser":this.sc},e=this.nc.auth.getAuthHeaderValueForFirstParty([]);return e&&(t.Authorization=e),t},enumerable:!1,configurable:!0}),t}(),mc=function(){function t(t,e){this.nc=t,this.sc=e}return t.prototype.getToken=function(){return Promise.resolve(new yc(this.nc,this.sc))},t.prototype.Jh=function(t){t(Ea.ni)},t.prototype.Yh=function(){},t.prototype.Hh=function(){},t}(),gc=function(){function t(t,e,n,r,i,o){this.fn=t,this.ic=n,this.rc=r,this.oc=i,this.listener=o,this.state=0,this.ac=0,this.hc=null,this.stream=null,this.Vs=new Qs(t,e)}return t.prototype.cc=function(){return 1===this.state||2===this.state||4===this.state},t.prototype.uc=function(){return 2===this.state},t.prototype.start=function(){3!==this.state?this.auth():this.lc()},t.prototype.stop=function(){return(0,r.mG)(this,void 0,void 0,(function(){return(0,r.Jh)(this,(function(t){switch(t.label){case 0:return this.cc()?[4,this.close(0)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))},t.prototype._c=function(){this.state=0,this.Vs.reset()},t.prototype.fc=function(){var t=this;this.uc()&&null===this.hc&&(this.hc=this.fn.Vn(this.ic,6e4,(function(){return t.dc()})))},t.prototype.wc=function(t){this.Ec(),this.stream.send(t)},t.prototype.dc=function(){return(0,r.mG)(this,void 0,void 0,(function(){return(0,r.Jh)(this,(function(t){return this.uc()?[2,this.close(0)]:[2]}))}))},t.prototype.Ec=function(){this.hc&&(this.hc.cancel(),this.hc=null)},t.prototype.close=function(t,e){return(0,r.mG)(this,void 0,void 0,(function(){return(0,r.Jh)(this,(function(n){switch(n.label){case 0:return this.Ec(),this.Vs.cancel(),this.ac++,3!==t?this.Vs.reset():e&&e.code===hr.RESOURCE_EXHAUSTED?(vr(e.toString()),vr("Using maximum backoff delay to prevent overloading the backend."),this.Vs.Rn()):e&&e.code===hr.UNAUTHENTICATED&&this.oc.Hh(),null!==this.stream&&(this.Tc(),this.stream.close(),this.stream=null),this.state=t,[4,this.listener.Ic(e)];case 1:return n.sent(),[2]}}))}))},t.prototype.Tc=function(){},t.prototype.auth=function(){var t=this;this.state=1;var e=this.mc(this.ac),n=this.ac;this.oc.getToken().then((function(e){t.ac===n&&t.Ac(e)}),(function(n){e((function(){var e=new fr(hr.UNKNOWN,"Fetching auth token failed: "+n.message);return t.Rc(e)}))}))},t.prototype.Ac=function(t){var e=this,n=this.mc(this.ac);this.stream=this.Pc(t),this.stream.gc((function(){n((function(){return e.state=2,e.listener.gc()}))})),this.stream.Ic((function(t){n((function(){return e.Rc(t)}))})),this.stream.onMessage((function(t){n((function(){return e.onMessage(t)}))}))},t.prototype.lc=function(){var t=this;this.state=4,this.Vs.Pn((function(){return(0,r.mG)(t,void 0,void 0,(function(){return(0,r.Jh)(this,(function(t){return this.state=0,this.start(),[2]}))}))}))},t.prototype.Rc=function(t){return dr("PersistentStream","close with error: "+t),this.stream=null,this.close(3,t)},t.prototype.mc=function(t){var e=this;return function(n){e.fn.ws((function(){return e.ac===t?n():(dr("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}},t}(),bc=function(t){function e(e,n,r,i,o){var s=this;return(s=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle",n,r,o)||this).serializer=i,s}return(0,r.ZT)(e,t),e.prototype.Pc=function(t){return this.rc.Vc("Listen",t)},e.prototype.onMessage=function(t){this.Vs.reset();var e=function(t,e){var n;if("targetChange"in e){e.targetChange;var r=function(t){return"NO_CHANGE"===t?0:"ADD"===t?1:"REMOVE"===t?2:"CURRENT"===t?3:"RESET"===t?4:gr()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(t,e){return t.Ke?(br(void 0===e||"string"==typeof e),Nr.fromBase64String(e||"")):(br(void 0===e||e instanceof Uint8Array),Nr.fromUint8Array(e||new Uint8Array))}(t,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&function(t){var e=void 0===t.code?hr.UNKNOWN:ri(t.code);return new fr(e,t.message||"")}(s);n=new Ni(r,i,o,a||null)}else if("documentChange"in e){e.documentChange;var u=e.documentChange;u.document,u.document.name,u.document.updateTime;var c=ho(t,u.document.name),h=so(u.document.updateTime),f=new hs({mapValue:{fields:u.document.fields}}),l=new ds(c,h,f,{}),p=u.targetIds||[],d=u.removedTargetIds||[];n=new _i(p,d,l.key,l)}else if("documentDelete"in e){e.documentDelete;var v=e.documentDelete;v.document;var y=ho(t,v.document),m=v.readTime?so(v.readTime):Ur.min(),g=new vs(y,m),b=v.removedTargetIds||[];n=new _i([],b,g.key,g)}else if("documentRemove"in e){e.documentRemove;var w=e.documentRemove;w.document;var I=ho(t,w.document),E=w.removedTargetIds||[];n=new _i([],E,I,null)}else{if(!("filter"in e))return gr();e.filter;var T=e.filter;T.targetId;var _=T.count||0,A=new ei(_),N=T.targetId;n=new Ai(N,A)}return n}(this.serializer,t),n=function(t){if(!("targetChange"in t))return Ur.min();var e=t.targetChange;return e.targetIds&&e.targetIds.length?Ur.min():e.readTime?so(e.readTime):Ur.min()}(t);return this.listener.yc(e,n)},e.prototype.bc=function(t){var e={};e.database=po(this.serializer),e.addTarget=function(t,e){var n,r=e.target;return(n=Zr(r)?{documents:bo(t,r)}:{query:wo(t,r)}).targetId=e.targetId,e.resumeToken.o()>0&&(n.resumeToken=io(t,e.resumeToken)),n}(this.serializer,t);var n=function(t,e){var n=function(t,e){switch(e){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return gr()}}(0,e.et);return null==n?null:{"goog-listen-tags":n}}(this.serializer,t);n&&(e.labels=n),this.wc(e)},e.prototype.vc=function(t){var e={};e.database=po(this.serializer),e.removeTarget=t,this.wc(e)},e}(gc),wc=function(t){function e(e,n,r,i,o){var s=this;return(s=t.call(this,e,"write_stream_connection_backoff","write_stream_idle",n,r,o)||this).serializer=i,s.Sc=!1,s}return(0,r.ZT)(e,t),Object.defineProperty(e.prototype,"Dc",{get:function(){return this.Sc},enumerable:!1,configurable:!0}),e.prototype.start=function(){this.Sc=!1,this.lastStreamToken=void 0,t.prototype.start.call(this)},e.prototype.Tc=function(){this.Sc&&this.Cc([])},e.prototype.Pc=function(t){return this.rc.Vc("Write",t)},e.prototype.onMessage=function(t){if(br(!!t.streamToken),this.lastStreamToken=t.streamToken,this.Sc){this.Vs.reset();var e=function(t,e){return t&&t.length>0?(br(void 0!==e),t.map((function(t){return function(t,e){var n=t.updateTime?so(t.updateTime):so(e);n.isEqual(Ur.min())&&(n=so(e));var r=null;return t.transformResults&&t.transformResults.length>0&&(r=t.transformResults),new Jo(n,r)}(t,e)}))):[]}(t.writeResults,t.commitTime),n=so(t.commitTime);return this.listener.Nc(n,e)}return br(!t.writeResults||0===t.writeResults.length),this.Sc=!0,this.listener.xc()},e.prototype.Fc=function(){var t={};t.database=po(this.serializer),this.wc(t)},e.prototype.Cc=function(t){var e=this,n={streamToken:this.lastStreamToken,writes:t.map((function(t){return mo(e.serializer,t)}))};this.wc(n)},e}(gc),Ic=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).credentials=e,i.rc=n,i.serializer=r,i.kc=!1,i}return(0,r.ZT)(e,t),e.prototype.Oc=function(){if(this.kc)throw new fr(hr.FAILED_PRECONDITION,"The client has already been terminated.")},e.prototype.Mc=function(t,e,n){var r=this;return this.Oc(),this.credentials.getToken().then((function(i){return r.rc.Mc(t,e,n,i)})).catch((function(t){throw t.code===hr.UNAUTHENTICATED&&r.credentials.Hh(),t}))},e.prototype.$c=function(t,e,n){var r=this;return this.Oc(),this.credentials.getToken().then((function(i){return r.rc.$c(t,e,n,i)})).catch((function(t){throw t.code===hr.UNAUTHENTICATED&&r.credentials.Hh(),t}))},e.prototype.terminate=function(){this.kc=!1},e}((function(){})),Ec=function(){function t(t,e){this.hs=t,this.di=e,this.state="Unknown",this.Lc=0,this.Bc=null,this.qc=!0}return t.prototype.Uc=function(){var t=this;0===this.Lc&&(this.Kc("Unknown"),this.Bc=this.hs.Vn("online_state_timeout",1e4,(function(){return t.Bc=null,t.Qc("Backend didn't respond within 10 seconds."),t.Kc("Offline"),Promise.resolve()})))},t.prototype.Wc=function(t){"Online"===this.state?this.Kc("Unknown"):(this.Lc++,this.Lc>=1&&(this.jc(),this.Qc("Connection failed 1 times. Most recent error: "+t.toString()),this.Kc("Offline")))},t.prototype.set=function(t){this.jc(),this.Lc=0,"Online"===t&&(this.qc=!1),this.Kc(t)},t.prototype.Kc=function(t){t!==this.state&&(this.state=t,this.di(t))},t.prototype.Qc=function(t){var e="Could not reach Cloud Firestore backend. "+t+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.qc?(vr(e),this.qc=!1):dr("OnlineStateTracker",e)},t.prototype.jc=function(){null!==this.Bc&&(this.Bc.cancel(),this.Bc=null)},t}(),Tc=function(t,e,n,i,o){var s=this;this.Gc=t,this.zc=e,this.hs=n,this.Hc={},this.Jc=[],this.Yc=new Map,this.Xc=new Set,this.Zc=[],this.tu=o,this.tu.eu((function(t){n.ws((function(){return(0,r.mG)(s,void 0,void 0,(function(){return(0,r.Jh)(this,(function(t){switch(t.label){case 0:return Cc(this)?(dr("RemoteStore","Restarting streams for network reachability change."),[4,function(t){return(0,r.mG)(this,void 0,void 0,(function(){var e;return(0,r.Jh)(this,(function(n){switch(n.label){case 0:return(e=wr(t)).Xc.add(4),[4,Ac(e)];case 1:return n.sent(),e.nu.set("Unknown"),e.Xc.delete(4),[4,_c(e)];case 2:return n.sent(),[2]}}))}))}(this)]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))}))})),this.nu=new Ec(n,i)};function _c(t){return(0,r.mG)(this,void 0,void 0,(function(){var e,n;return(0,r.Jh)(this,(function(r){switch(r.label){case 0:if(!Cc(t))return[3,4];e=0,n=t.Zc,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!0)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}}))}))}function Ac(t){return(0,r.mG)(this,void 0,void 0,(function(){var e,n;return(0,r.Jh)(this,(function(r){switch(r.label){case 0:e=0,n=t.Zc,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!1)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}}))}))}function Nc(t){return(0,r.mG)(this,void 0,void 0,(function(){var e;return(0,r.Jh)(this,(function(n){switch(n.label){case 0:return e=wr(t),dr("RemoteStore","RemoteStore shutting down."),e.Xc.add(5),[4,Ac(e)];case 1:return n.sent(),e.tu.Di(),e.nu.set("Unknown"),[2]}}))}))}function Sc(t,e){var n=wr(t);n.Yc.has(e.targetId)||(n.Yc.set(e.targetId,e),Lc(n)?Pc(n):Wc(n).uc()&&Dc(n,e))}function kc(t,e){var n=wr(t),r=Wc(n);n.Yc.delete(e),r.uc()&&Oc(n,e),0===n.Yc.size&&(r.uc()?r.fc():Cc(n)&&n.nu.set("Unknown"))}function Dc(t,e){t.su.me(e.targetId),Wc(t).bc(e)}function Oc(t,e){t.su.me(e),Wc(t).vc(e)}function Pc(t){t.su=new ki({qe:function(e){return t.Hc.qe(e)},Ue:function(e){return t.Yc.get(e)||null}}),Wc(t).start(),t.nu.Uc()}function Lc(t){return Cc(t)&&!Wc(t).cc()&&t.Yc.size>0}function Cc(t){return 0===wr(t).Xc.size}function Rc(t){t.su=void 0}function xc(t){return(0,r.mG)(this,void 0,void 0,(function(){return(0,r.Jh)(this,(function(e){return t.Yc.forEach((function(e,n){Dc(t,e)})),[2]}))}))}function Mc(t,e){return(0,r.mG)(this,void 0,void 0,(function(){return(0,r.Jh)(this,(function(n){return Rc(t),Lc(t)?(t.nu.Wc(e),Pc(t)):t.nu.set("Unknown"),[2]}))}))}function Vc(t,e,n){return(0,r.mG)(this,void 0,void 0,(function(){var i,o,s;return(0,r.Jh)(this,(function(a){switch(a.label){case 0:if(t.nu.set("Online"),!(e instanceof Ni&&2===e.state&&e.cause))return[3,6];a.label=1;case 1:return a.trys.push([1,3,,5]),[4,function(t,e){return(0,r.mG)(this,void 0,void 0,(function(){var n,i,o,s;return(0,r.Jh)(this,(function(r){switch(r.label){case 0:n=e.cause,i=0,o=e.targetIds,r.label=1;case 1:return i<o.length?(s=o[i],t.Yc.has(s)?[4,t.Hc.iu(s,n)]:[3,3]):[3,5];case 2:r.sent(),t.Yc.delete(s),t.su.removeTarget(s),r.label=3;case 3:r.label=4;case 4:return i++,[3,1];case 5:return[2]}}))}))}(t,e)];case 2:return a.sent(),[3,5];case 3:return i=a.sent(),dr("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),i),[4,Uc(t,i)];case 4:return a.sent(),[3,5];case 5:return[3,13];case 6:if(e instanceof _i?t.su.be(e):e instanceof Ai?t.su.ke(e):t.su.De(e),n.isEqual(Ur.min()))return[3,13];a.label=7;case 7:return a.trys.push([7,11,,13]),[4,ec(t.Gc)];case 8:return o=a.sent(),n.h(o)>=0?[4,function(t,e){var n=t.su.$e(e);return n.zt.forEach((function(n,r){if(n.resumeToken.o()>0){var i=t.Yc.get(r);i&&t.Yc.set(r,i.it(n.resumeToken,e))}})),n.Ht.forEach((function(e){var n=t.Yc.get(e);if(n){t.Yc.set(e,n.it(Nr.u,n.nt)),Oc(t,e);var r=new ti(n.target,e,1,n.sequenceNumber);Dc(t,r)}})),t.Hc.ru(n)}(t,n)]:[3,10];case 9:a.sent(),a.label=10;case 10:return[3,13];case 11:return dr("RemoteStore","Failed to raise snapshot:",s=a.sent()),[4,Uc(t,s)];case 12:return a.sent(),[3,13];case 13:return[2]}}))}))}function Uc(t,e,n){return(0,r.mG)(this,void 0,void 0,(function(){var i=this;return(0,r.Jh)(this,(function(o){switch(o.label){case 0:if(!ra(e))throw e;return t.Xc.add(1),[4,Ac(t)];case 1:return o.sent(),t.nu.set("Offline"),n||(n=function(){return ec(t.Gc)}),t.hs.Cs((function(){return(0,r.mG)(i,void 0,void 0,(function(){return(0,r.Jh)(this,(function(e){switch(e.label){case 0:return dr("RemoteStore","Retrying IndexedDB access"),[4,n()];case 1:return e.sent(),t.Xc.delete(1),[4,_c(t)];case 2:return e.sent(),[2]}}))}))})),[2]}}))}))}function jc(t,e){return e().catch((function(n){return Uc(t,n,e)}))}function Fc(t){return(0,r.mG)(this,void 0,void 0,(function(){var e,n,i,o,s;return(0,r.Jh)(this,(function(r){switch(r.label){case 0:e=wr(t),n=Xc(e),i=e.Jc.length>0?e.Jc[e.Jc.length-1].batchId:-1,r.label=1;case 1:if(!function(t){return Cc(t)&&t.Jc.length<10}(e))return[3,7];r.label=2;case 2:return r.trys.push([2,4,,6]),[4,rc(e.Gc,i)];case 3:return null===(o=r.sent())?(0===e.Jc.length&&n.fc(),[3,7]):(i=o.batchId,function(t,e){t.Jc.push(e);var n=Xc(t);n.uc()&&n.Dc&&n.Cc(e.mutations)}(e,o),[3,6]);case 4:return s=r.sent(),[4,Uc(e,s)];case 5:return r.sent(),[3,6];case 6:return[3,1];case 7:return Gc(e)&&qc(e),[2]}}))}))}function Gc(t){return Cc(t)&&!Xc(t).cc()&&t.Jc.length>0}function qc(t){Xc(t).start()}function Bc(t){return(0,r.mG)(this,void 0,void 0,(function(){return(0,r.Jh)(this,(function(e){return Xc(t).Fc(),[2]}))}))}function zc(t){return(0,r.mG)(this,void 0,void 0,(function(){var e,n,i,o;return(0,r.Jh)(this,(function(r){for(e=Xc(t),n=0,i=t.Jc;n<i.length;n++)o=i[n],e.Cc(o.mutations);return[2]}))}))}function Kc(t,e,n){return(0,r.mG)(this,void 0,void 0,(function(){var i,o;return(0,r.Jh)(this,(function(r){switch(r.label){case 0:return i=t.Jc.shift(),o=xa.from(i,e,n),[4,jc(t,(function(){return t.Hc.ou(o)}))];case 1:return r.sent(),[4,Fc(t)];case 2:return r.sent(),[2]}}))}))}function Hc(t,e){return(0,r.mG)(this,void 0,void 0,(function(){return(0,r.Jh)(this,(function(n){switch(n.label){case 0:return e&&Xc(t).Dc?[4,function(t,e){return(0,r.mG)(this,void 0,void 0,(function(){var n,i;return(0,r.Jh)(this,(function(r){switch(r.label){case 0:return ni(i=e.code)&&i!==hr.ABORTED?(n=t.Jc.shift(),Xc(t)._c(),[4,jc(t,(function(){return t.Hc.au(n.batchId,e)}))]):[3,3];case 1:return r.sent(),[4,Fc(t)];case 2:r.sent(),r.label=3;case 3:return[2]}}))}))}(t,e)]:[3,2];case 1:n.sent(),n.label=2;case 2:return Gc(t)&&qc(t),[2]}}))}))}function Jc(t,e){return(0,r.mG)(this,void 0,void 0,(function(){var n;return(0,r.Jh)(this,(function(r){switch(r.label){case 0:return n=wr(t),e?(n.Xc.delete(2),[4,_c(n)]):[3,2];case 1:return r.sent(),[3,5];case 2:return e?[3,4]:(n.Xc.add(2),[4,Ac(n)]);case 3:r.sent(),n.nu.set("Unknown"),r.label=4;case 4:r.label=5;case 5:return[2]}}))}))}function Wc(t){var e=this;return t.hu||(t.hu=function(t,e,n){var r=wr(t);return r.Oc(),new bc(e,r.rc,r.credentials,r.serializer,n)}(t.zc,t.hs,{gc:xc.bind(null,t),Ic:Mc.bind(null,t),yc:Vc.bind(null,t)}),t.Zc.push((function(n){return(0,r.mG)(e,void 0,void 0,(function(){return(0,r.Jh)(this,(function(e){switch(e.label){case 0:return n?(t.hu._c(),Lc(t)?Pc(t):t.nu.set("Unknown"),[3,3]):[3,1];case 1:return[4,t.hu.stop()];case 2:e.sent(),Rc(t),e.label=3;case 3:return[2]}}))}))}))),t.hu}function Xc(t){var e=this;return t.cu||(t.cu=function(t,e,n){var r=wr(t);return r.Oc(),new wc(e,r.rc,r.credentials,r.serializer,n)}(t.zc,t.hs,{gc:Bc.bind(null,t),Ic:Hc.bind(null,t),xc:zc.bind(null,t),Nc:Kc.bind(null,t)}),t.Zc.push((function(n){return(0,r.mG)(e,void 0,void 0,(function(){return(0,r.Jh)(this,(function(e){switch(e.label){case 0:return n?(t.cu._c(),[4,Fc(t)]):[3,2];case 1:return e.sent(),[3,4];case 2:return[4,t.cu.stop()];case 3:e.sent(),t.Jc.length>0&&(dr("RemoteStore","Stopping write stream with "+t.Jc.length+" pending writes"),t.Jc=[]),e.label=4;case 4:return[2]}}))}))}))),t.cu}var Yc=function(t){this.key=t},Zc=function(t){this.key=t},Qc=function(){function t(t,e){this.query=t,this.uu=e,this.lu=null,this.te=!1,this._u=yi(),this.Qt=yi(),this.fu=Rs(t),this.du=new bi(this.fu)}return Object.defineProperty(t.prototype,"wu",{get:function(){return this.uu},enumerable:!1,configurable:!0}),t.prototype.Eu=function(t,e){var n=this,r=e?e.Tu:new wi,i=e?e.du:this.du,o=e?e.Qt:this.Qt,s=i,a=!1,u=ws(this.query)&&i.size===this.query.limit?i.last():null,c=Is(this.query)&&i.size===this.query.limit?i.first():null;if(t.ut((function(t,e){var h=i.get(t),f=e instanceof ds?e:null;f&&(f=Cs(n.query,f)?f:null);var l=!!h&&n.Qt.has(h.key),p=!!f&&(f.Ye||n.Qt.has(f.key)&&f.hasCommittedMutations),d=!1;h&&f?h.data().isEqual(f.data())?l!==p&&(r.track({type:3,doc:f}),d=!0):n.Iu(h,f)||(r.track({type:2,doc:f}),d=!0,(u&&n.fu(f,u)>0||c&&n.fu(f,c)<0)&&(a=!0)):!h&&f?(r.track({type:0,doc:f}),d=!0):h&&!f&&(r.track({type:1,doc:h}),d=!0,(u||c)&&(a=!0)),d&&(f?(s=s.add(f),o=p?o.add(t):o.delete(t)):(s=s.delete(t),o=o.delete(t)))})),ws(this.query)||Is(this.query))for(;s.size>this.query.limit;){var h=ws(this.query)?s.last():s.first();s=s.delete(h.key),o=o.delete(h.key),r.track({type:1,doc:h})}return{du:s,Tu:r,mu:a,Qt:o}},t.prototype.Iu=function(t,e){return t.Ye&&e.hasCommittedMutations&&!e.Ye},t.prototype.Vr=function(t,e,n){var r=this,i=this.du;this.du=t.du,this.Qt=t.Qt;var o=t.Tu.Ut();o.sort((function(t,e){return function(t,e){var n=function(t){switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return gr()}};return n(t)-n(e)}(t.type,e.type)||r.fu(t.doc,e.doc)})),this.Au(n);var s=e?this.Ru():[],a=0===this._u.size&&this.te?1:0,u=a!==this.lu;return this.lu=a,0!==o.length||u?{snapshot:new Ii(this.query,t.du,i,o,t.Qt,0===a,u,!1),Pu:s}:{Pu:s}},t.prototype.Ks=function(t){return this.te&&"Offline"===t?(this.te=!1,this.Vr({du:this.du,Tu:new wi,Qt:this.Qt,mu:!1},!1)):{Pu:[]}},t.prototype.gu=function(t){return!this.uu.has(t)&&!!this.du.has(t)&&!this.du.get(t).Ye},t.prototype.Au=function(t){var e=this;t&&(t.ee.forEach((function(t){return e.uu=e.uu.add(t)})),t.ne.forEach((function(t){})),t.se.forEach((function(t){return e.uu=e.uu.delete(t)})),this.te=t.te)},t.prototype.Ru=function(){var t=this;if(!this.te)return[];var e=this._u;this._u=yi(),this.du.forEach((function(e){t.gu(e.key)&&(t._u=t._u.add(e.key))}));var n=[];return e.forEach((function(e){t._u.has(e)||n.push(new Zc(e))})),this._u.forEach((function(t){e.has(t)||n.push(new Yc(t))})),n},t.prototype.Vu=function(t){this.uu=t.Fh,this._u=yi();var e=this.Eu(t.documents);return this.Vr(e,!0)},t.prototype.yu=function(){return Ii.Gt(this.query,this.du,this.Qt,0===this.lu)},t}(),$c=function(t,e,n){this.query=t,this.targetId=e,this.view=n},th=function(t){this.key=t,this.pu=!1},eh=function(){function t(t,e,n,r,i,o){this.Gc=t,this.bu=e,this.vu=n,this.Su=r,this.currentUser=i,this.Du=o,this.Cu={},this.Nu=new Mr((function(t){return Ps(t)}),Os),this.xu=new Map,this.Fu=[],this.ku=new ii(Br.D),this.Ou=new Map,this.Mu=new fc,this.$u={},this.Lu=new Map,this.Bu=Fu.da(),this.onlineState="Unknown",this.qu=void 0}return Object.defineProperty(t.prototype,"Uu",{get:function(){return!0===this.qu},enumerable:!1,configurable:!0}),t}();function nh(t,e){return(0,r.mG)(this,void 0,void 0,(function(){var n,i,o,s,a,u;return(0,r.Jh)(this,(function(r){switch(r.label){case 0:return n=kh(t),(s=n.Nu.get(e))?(i=s.targetId,n.Su.$i(i),o=s.view.yu(),[3,4]):[3,1];case 1:return[4,ic(n.Gc,Ns(e))];case 2:return a=r.sent(),u=n.Su.$i(a.targetId),i=a.targetId,[4,rh(n,e,i,"current"===u)];case 3:o=r.sent(),n.Uu&&Sc(n.bu,a),r.label=4;case 4:return[2,o]}}))}))}function rh(t,e,n,i){return(0,r.mG)(this,void 0,void 0,(function(){var o,s,a,u,c,h;return(0,r.Jh)(this,(function(f){switch(f.label){case 0:return t.Ku=function(e,n,i){return function(t,e,n,i){return(0,r.mG)(this,void 0,void 0,(function(){var o,s,a;return(0,r.Jh)(this,(function(r){switch(r.label){case 0:return(o=e.view.Eu(n)).mu?[4,sc(t.Gc,e.query,!1).then((function(t){var n=t.documents;return e.view.Eu(n,o)}))]:[3,2];case 1:o=r.sent(),r.label=2;case 2:return s=i&&i.zt.get(e.targetId),a=e.view.Vr(o,t.Uu,s),[2,(dh(t,e.targetId,a.Pu),a.snapshot)]}}))}))}(t,e,n,i)},[4,sc(t.Gc,e,!0)];case 1:return o=f.sent(),s=new Qc(e,o.Fh),a=s.Eu(o.documents),u=Ti.Zt(n,i&&"Offline"!==t.onlineState),c=s.Vr(a,t.Uu,u),dh(t,n,c.Pu),h=new $c(e,n,s),[2,(t.Nu.set(e,h),t.xu.has(n)?t.xu.get(n).push(e):t.xu.set(n,[e]),c.snapshot)]}}))}))}function ih(t,e){return(0,r.mG)(this,void 0,void 0,(function(){var n,i,o;return(0,r.Jh)(this,(function(r){switch(r.label){case 0:return n=wr(t),i=n.Nu.get(e),(o=n.xu.get(i.targetId)).length>1?[2,(n.xu.set(i.targetId,o.filter((function(t){return!Os(t,e)}))),void n.Nu.delete(e))]:n.Uu?(n.Su.Bi(i.targetId),n.Su.xi(i.targetId)?[3,2]:[4,oc(n.Gc,i.targetId,!1).then((function(){n.Su.Ui(i.targetId),kc(n.bu,i.targetId),lh(n,i.targetId)})).catch(hc)]):[3,3];case 1:r.sent(),r.label=2;case 2:return[3,5];case 3:return lh(n,i.targetId),[4,oc(n.Gc,i.targetId,!0)];case 4:r.sent(),r.label=5;case 5:return[2]}}))}))}function oh(t,e){return(0,r.mG)(this,void 0,void 0,(function(){var n,i;return(0,r.Jh)(this,(function(r){switch(r.label){case 0:n=wr(t),r.label=1;case 1:return r.trys.push([1,4,,6]),[4,nc(n.Gc,e)];case 2:return i=r.sent(),e.zt.forEach((function(t,e){var r=n.Ou.get(e);r&&(br(t.ee.size+t.ne.size+t.se.size<=1),t.ee.size>0?r.pu=!0:t.ne.size>0?br(r.pu):t.se.size>0&&(br(r.pu),r.pu=!1))})),[4,mh(n,i,e)];case 3:return r.sent(),[3,6];case 4:return[4,hc(r.sent())];case 5:return r.sent(),[3,6];case 6:return[2]}}))}))}function sh(t,e,n){var r=wr(t);if(r.Uu&&0===n||!r.Uu&&1===n){var i=[];r.Nu.forEach((function(t,n){var r=n.view.Ks(e);r.snapshot&&i.push(r.snapshot)})),function(t,e){var n=wr(t);n.onlineState=e;var r=!1;n.Bs.forEach((function(t,n){for(var i=0,o=n.listeners;i<o.length;i++)o[i].Ks(e)&&(r=!0)})),r&&wa(n)}(r.vu,e),i.length&&r.Cu.yc(i),r.onlineState=e,r.Uu&&r.Su.ji(e)}}function ah(t,e,n){return(0,r.mG)(this,void 0,void 0,(function(){var i,o,s,a,u,c;return(0,r.Jh)(this,(function(r){switch(r.label){case 0:return(i=wr(t)).Su.Ki(e,"rejected",n),o=i.Ou.get(e),(s=o&&o.key)?(a=(a=new ii(Br.D)).ot(s,new vs(s,Ur.min())),u=yi().add(s),c=new Ei(Ur.min(),new Map,new ai(Tr),a,u),[4,oh(i,c)]):[3,2];case 1:return r.sent(),i.ku=i.ku.remove(s),i.Ou.delete(e),yh(i),[3,4];case 2:return[4,oc(i.Gc,e,!1).then((function(){return lh(i,e,n)})).catch(hc)];case 3:r.sent(),r.label=4;case 4:return[2]}}))}))}function uh(t,e){return(0,r.mG)(this,void 0,void 0,(function(){var n,i,o;return(0,r.Jh)(this,(function(r){switch(r.label){case 0:n=wr(t),i=e.batch.batchId,r.label=1;case 1:return r.trys.push([1,4,,6]),[4,tc(n.Gc,e)];case 2:return o=r.sent(),fh(n,i,null),hh(n,i),n.Su.Oi(i,"acknowledged"),[4,mh(n,o)];case 3:return r.sent(),[3,6];case 4:return[4,hc(r.sent())];case 5:return r.sent(),[3,6];case 6:return[2]}}))}))}function ch(t,e,n){return(0,r.mG)(this,void 0,void 0,(function(){var i,o;return(0,r.Jh)(this,(function(r){switch(r.label){case 0:i=wr(t),r.label=1;case 1:return r.trys.push([1,4,,6]),[4,function(t,e){var n=wr(t);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(t){var r;return n.Sr.$o(t,e).next((function(e){return br(null!==e),r=e.keys(),n.Sr.Qo(t,e)})).next((function(){return n.Sr.zo(t)})).next((function(){return n.Nh.Or(t,r)}))}))}(i.Gc,e)];case 2:return o=r.sent(),fh(i,e,n),hh(i,e),i.Su.Oi(e,"rejected",n),[4,mh(i,o)];case 3:return r.sent(),[3,6];case 4:return[4,hc(r.sent())];case 5:return r.sent(),[3,6];case 6:return[2]}}))}))}function hh(t,e){(t.Lu.get(e)||[]).forEach((function(t){t.resolve()})),t.Lu.delete(e)}function fh(t,e,n){var r=wr(t),i=r.$u[r.currentUser.ti()];if(i){var o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.$u[r.currentUser.ti()]=i}}function lh(t,e,n){void 0===n&&(n=null),t.Su.Bi(e);for(var r=0,i=t.xu.get(e);r<i.length;r++){var o=i[r];t.Nu.delete(o),n&&t.Cu.Qu(o,n)}t.xu.delete(e),t.Uu&&t.Mu.Kh(e).forEach((function(e){t.Mu.Ho(e)||ph(t,e)}))}function ph(t,e){var n=t.ku.get(e);null!==n&&(kc(t.bu,n),t.ku=t.ku.remove(e),t.Ou.delete(n),yh(t))}function dh(t,e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];o instanceof Yc?(t.Mu.Da(o.key,e),vh(t,o)):o instanceof Zc?(dr("SyncEngine","Document no longer in limbo: "+o.key),t.Mu.Na(o.key,e),t.Mu.Ho(o.key)||ph(t,o.key)):gr()}}function vh(t,e){var n=e.key;t.ku.get(n)||(dr("SyncEngine","New document in limbo: "+n),t.Fu.push(n),yh(t))}function yh(t){for(;t.Fu.length>0&&t.ku.size<t.Du;){var e=t.Fu.shift(),n=t.Bu.next();t.Ou.set(n,new th(e)),t.ku=t.ku.ot(e,n),Sc(t.bu,new ti(Ns(bs(e.path)),n,2,Ta.ai))}}function mh(t,e,n){return(0,r.mG)(this,void 0,void 0,(function(){var i,o,s,a;return(0,r.Jh)(this,(function(u){switch(u.label){case 0:return i=wr(t),o=[],s=[],a=[],i.Nu.P()?[3,3]:(i.Nu.forEach((function(t,r){a.push(i.Ku(r,e,n).then((function(t){if(t){i.Uu&&i.Su.Ki(r.targetId,t.fromCache?"not-current":"current"),o.push(t);var e=Fa.zr(r.targetId,t);s.push(e)}})))})),[4,Promise.all(a)]);case 1:return u.sent(),i.Cu.yc(o),[4,function(t,e){return(0,r.mG)(this,void 0,void 0,(function(){var n,i,o,s,a,u,c,h,f;return(0,r.Jh)(this,(function(r){switch(r.label){case 0:n=wr(t),r.label=1;case 1:return r.trys.push([1,3,,4]),[4,n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(t){return $s.forEach(e,(function(e){return $s.forEach(e.jr,(function(r){return n.persistence.No.Da(t,e.targetId,r)})).next((function(){return $s.forEach(e.Gr,(function(r){return n.persistence.No.Na(t,e.targetId,r)}))}))}))}))];case 2:return r.sent(),[3,4];case 3:if(!ra(i=r.sent()))throw i;return dr("LocalStore","Failed to update sequence numbers: "+i),[3,4];case 4:for(o=0,s=e;o<s.length;o++)a=s[o],u=a.targetId,a.fromCache||(c=n.bh.get(u),h=c.nt,f=c.rt(h),n.bh=n.bh.ot(u,f));return[2]}}))}))}(i.Gc,s)];case 2:u.sent(),u.label=3;case 3:return[2]}}))}))}function gh(t,e){return(0,r.mG)(this,void 0,void 0,(function(){var n,i;return(0,r.Jh)(this,(function(o){switch(o.label){case 0:return(n=wr(t)).currentUser.isEqual(e)?[3,3]:(dr("SyncEngine","User change. New user:",e.ti()),[4,function(t,e){return(0,r.mG)(this,void 0,void 0,(function(){var n,i,o,s;return(0,r.Jh)(this,(function(r){switch(r.label){case 0:return n=wr(t),i=n.Sr,o=n.Nh,[4,n.persistence.runTransaction("Handle user change","readonly",(function(t){var r;return n.Sr.Uo(t).next((function(s){return r=s,i=n.persistence.Th(e),o=new ja(n.Ch,i,n.persistence.Ah()),i.Uo(t)})).next((function(e){for(var n=[],i=[],s=yi(),a=0,u=r;a<u.length;a++){var c=u[a];n.push(c.batchId);for(var h=0,f=c.mutations;h<f.length;h++){var l=f[h];s=s.add(l.key)}}for(var p=0,d=e;p<d.length;p++){var v=d[p];i.push(v.batchId);for(var y=0,m=v.mutations;y<m.length;y++){var g=m[y];s=s.add(g.key)}}return o.Or(t,s).next((function(t){return{Wu:t,ju:n,Gu:i}}))}))}))];case 1:return s=r.sent(),[2,(n.Sr=i,n.Nh=o,n.ph.xh(n.Nh),s)]}}))}))}(n.Gc,e)]);case 1:return i=o.sent(),n.currentUser=e,function(t,e){t.Lu.forEach((function(t){t.forEach((function(t){t.reject(new fr(hr.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),t.Lu.clear()}(n),n.Su.Wi(e,i.ju,i.Gu),[4,mh(n,i.Wu)];case 2:o.sent(),o.label=3;case 3:return[2]}}))}))}function bh(t,e){var n=wr(t),r=n.Ou.get(e);if(r&&r.pu)return yi().add(r.key);var i=yi(),o=n.xu.get(e);if(!o)return i;for(var s=0,a=o;s<a.length;s++){var u=a[s],c=n.Nu.get(u);i=i.Ot(c.view.wu)}return i}function wh(t,e){return(0,r.mG)(this,void 0,void 0,(function(){var n,i,o;return(0,r.Jh)(this,(function(r){switch(r.label){case 0:return[4,sc((n=wr(t)).Gc,e.query,!0)];case 1:return i=r.sent(),o=e.view.Vu(i),[2,(n.Uu&&dh(n,e.targetId,o.Pu),o)]}}))}))}function Ih(t,e,n,i){return(0,r.mG)(this,void 0,void 0,(function(){var o,s;return(0,r.Jh)(this,(function(r){switch(r.label){case 0:return[4,function(t,e){var n=wr(t),r=wr(n.Sr);return n.persistence.runTransaction("Lookup mutation documents","readonly",(function(t){return r.Lo(t,e).next((function(e){return e?n.Nh.Or(t,e):$s.resolve(null)}))}))}((o=wr(t)).Gc,e)];case 1:return null===(s=r.sent())?[3,6]:"pending"!==n?[3,3]:[4,Fc(o.bu)];case 2:return r.sent(),[3,4];case 3:"acknowledged"===n||"rejected"===n?(fh(o,e,i||null),hh(o,e),function(t,e){wr(wr(t).Sr).jo(e)}(o.Gc,e)):gr(),r.label=4;case 4:return[4,mh(o,s)];case 5:return r.sent(),[3,7];case 6:dr("SyncEngine","Cannot apply mutation batch with id: "+e),r.label=7;case 7:return[2]}}))}))}function Eh(t,e){return(0,r.mG)(this,void 0,void 0,(function(){var n,i,o,s,a,u,c,h;return(0,r.Jh)(this,(function(r){switch(r.label){case 0:return kh(n=wr(t)),Dh(n),!0!==e||!0===n.qu?[3,3]:(i=n.Su.Ci(),[4,Th(n,i.L())]);case 1:return o=r.sent(),n.qu=!0,[4,Jc(n.bu,!0)];case 2:for(r.sent(),s=0,a=o;s<a.length;s++)u=a[s],Sc(n.bu,u);return[3,7];case 3:return!1!==e||!1===n.qu?[3,7]:(c=[],h=Promise.resolve(),n.xu.forEach((function(t,e){n.Su.qi(e)?c.push(e):h=h.then((function(){return lh(n,e),oc(n.Gc,e,!0)})),kc(n.bu,e)})),[4,h]);case 4:return r.sent(),[4,Th(n,c)];case 5:return r.sent(),function(t){var e=wr(t);e.Ou.forEach((function(t,n){kc(e.bu,n)})),e.Mu.Qh(),e.Ou=new Map,e.ku=new ii(Br.D)}(n),n.qu=!1,[4,Jc(n.bu,!1)];case 6:r.sent(),r.label=7;case 7:return[2]}}))}))}function Th(t,e,n){return(0,r.mG)(this,void 0,void 0,(function(){var n,i,o,s,a,u,c,h,f,l,p,d,v,y;return(0,r.Jh)(this,(function(r){switch(r.label){case 0:n=wr(t),i=[],o=[],s=0,a=e,r.label=1;case 1:return s<a.length?(u=a[s],c=void 0,(h=n.xu.get(u))&&0!==h.length?[4,ic(n.Gc,Ns(h[0]))]:[3,7]):[3,13];case 2:c=r.sent(),f=0,l=h,r.label=3;case 3:return f<l.length?(p=l[f],d=n.Nu.get(p),[4,wh(n,d)]):[3,6];case 4:(v=r.sent()).snapshot&&o.push(v.snapshot),r.label=5;case 5:return f++,[3,3];case 6:return[3,11];case 7:return[4,ac(n.Gc,u)];case 8:return y=r.sent(),[4,ic(n.Gc,y)];case 9:return c=r.sent(),[4,rh(n,_h(y),u,!1)];case 10:r.sent(),r.label=11;case 11:i.push(c),r.label=12;case 12:return s++,[3,1];case 13:return[2,(n.Cu.yc(o),i)]}}))}))}function _h(t){return gs(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function Ah(t){var e=wr(t);return wr(wr(e.Gc).persistence).pi()}function Nh(t,e,n,i){return(0,r.mG)(this,void 0,void 0,(function(){var o,s,a;return(0,r.Jh)(this,(function(r){switch(r.label){case 0:return(o=wr(t)).qu?(dr("SyncEngine","Ignoring unexpected query state notification."),[3,8]):[3,1];case 1:if(!o.xu.has(e))return[3,8];switch(n){case"current":case"not-current":return[3,2];case"rejected":return[3,5]}return[3,7];case 2:return[4,uc(o.Gc)];case 3:return s=r.sent(),a=Ei.Xt(e,"current"===n),[4,mh(o,s,a)];case 4:return r.sent(),[3,8];case 5:return[4,oc(o.Gc,e,!0)];case 6:return r.sent(),lh(o,e,i),[3,8];case 7:gr(),r.label=8;case 8:return[2]}}))}))}function Sh(t,e,n){return(0,r.mG)(this,void 0,void 0,(function(){var i,o,s,a,u,c,h,f,l,p;return(0,r.Jh)(this,(function(d){switch(d.label){case 0:if(!(i=kh(t)).qu)return[3,10];o=0,s=e,d.label=1;case 1:return o<s.length?(a=s[o],i.xu.has(a)?(dr("SyncEngine","Adding an already active target "+a),[3,5]):[4,ac(i.Gc,a)]):[3,6];case 2:return u=d.sent(),[4,ic(i.Gc,u)];case 3:return c=d.sent(),[4,rh(i,_h(u),c.targetId,!1)];case 4:d.sent(),Sc(i.bu,c),d.label=5;case 5:return o++,[3,1];case 6:h=function(t){return(0,r.Jh)(this,(function(e){switch(e.label){case 0:return i.xu.has(t)?[4,oc(i.Gc,t,!1).then((function(){kc(i.bu,t),lh(i,t)})).catch(hc)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))},f=0,l=n,d.label=7;case 7:return f<l.length?(p=l[f],[5,h(p)]):[3,10];case 8:d.sent(),d.label=9;case 9:return f++,[3,7];case 10:return[2]}}))}))}function kh(t){var e=wr(t);return e.bu.Hc.ru=oh.bind(null,e),e.bu.Hc.qe=bh.bind(null,e),e.bu.Hc.iu=ah.bind(null,e),e.Cu.yc=ga.bind(null,e.vu),e.Cu.Qu=ba.bind(null,e.vu),e}function Dh(t){var e=wr(t);return e.bu.Hc.ou=uh.bind(null,e),e.bu.Hc.au=ch.bind(null,e),e}var Oh=function(){function t(){}return t.prototype.xh=function(t){this.zu=t},t.prototype.Lr=function(t,e,n,r){var i=this;return function(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.on.length||1===t.on.length&&t.on[0].field.W())}(e)||n.isEqual(Ur.min())?this.Hu(t,e):this.zu.Or(t,r).next((function(s){var a=i.Ju(e,s);return(ws(e)||Is(e))&&i.mu(e.an,a,r,n)?i.Hu(t,e):(pr()<=o.in.DEBUG&&dr("IndexFreeQueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),Ls(e)),i.zu.Lr(t,e,n).next((function(t){return a.forEach((function(e){t=t.ot(e.key,e)})),t})))}))},t.prototype.Ju=function(t,e){var n=new ai(Rs(t));return e.forEach((function(e,r){r instanceof ds&&Cs(t,r)&&(n=n.add(r))})),n},t.prototype.mu=function(t,e,n,r){if(n.size!==e.size)return!0;var i="F"===t?e.last():e.first();return!!i&&(i.hasPendingWrites||i.version.h(r)>0)},t.prototype.Hu=function(t,e){return pr()<=o.in.DEBUG&&dr("IndexFreeQueryEngine","Using full collection scan to execute query:",Ls(e)),this.zu.Lr(t,e,Ur.min())},t}(),Ph=function(){function t(t,e){this.Dr=t,this.No=e,this.Sr=[],this.Yu=1,this.Xu=new ai(lc.Mh)}return t.prototype.ko=function(t){return $s.resolve(0===this.Sr.length)},t.prototype.Oo=function(t,e,n,r){var i=this.Yu;this.Yu++,this.Sr.length>0&&this.Sr[this.Sr.length-1];var o=new Ra(i,e,n,r);this.Sr.push(o);for(var s=0,a=r;s<a.length;s++){var u=a[s];this.Xu=this.Xu.add(new lc(u.key,i)),this.Dr.Mo(t,u.key.path.F())}return $s.resolve(o)},t.prototype.$o=function(t,e){return $s.resolve(this.Zu(e))},t.prototype.Bo=function(t,e){var n=e+1,r=this.tl(n),i=r<0?0:r;return $s.resolve(this.Sr.length>i?this.Sr[i]:null)},t.prototype.qo=function(){return $s.resolve(0===this.Sr.length?-1:this.Yu-1)},t.prototype.Uo=function(t){return $s.resolve(this.Sr.slice())},t.prototype.Nr=function(t,e){var n=this,r=new lc(e,0),i=new lc(e,Number.POSITIVE_INFINITY),o=[];return this.Xu.xt([r,i],(function(t){var e=n.Zu(t.jh);o.push(e)})),$s.resolve(o)},t.prototype.$r=function(t,e){var n=this,r=new ai(Tr);return e.forEach((function(t){var e=new lc(t,0),i=new lc(t,Number.POSITIVE_INFINITY);n.Xu.xt([e,i],(function(t){r=r.add(t.jh)}))})),$s.resolve(this.el(r))},t.prototype.Qr=function(t,e){var n=e.path,r=n.length+1,i=n;Br.X(i)||(i=i.child(""));var o=new lc(new Br(i),0),s=new ai(Tr);return this.Xu.Ft((function(t){var e=t.key.path;return!!n.M(e)&&(e.length===r&&(s=s.add(t.jh)),!0)}),o),$s.resolve(this.el(s))},t.prototype.el=function(t){var e=this,n=[];return t.forEach((function(t){var r=e.Zu(t);null!==r&&n.push(r)})),n},t.prototype.Qo=function(t,e){var n=this;br(0===this.nl(e.batchId,"removed")),this.Sr.shift();var r=this.Xu;return $s.forEach(e.mutations,(function(i){var o=new lc(i.key,e.batchId);return r=r.delete(o),n.No.Go(t,i.key)})).next((function(){n.Xu=r}))},t.prototype.jo=function(t){},t.prototype.Ho=function(t,e){var n=new lc(e,0),r=this.Xu.kt(n);return $s.resolve(e.isEqual(r&&r.key))},t.prototype.zo=function(t){return this.Sr.length,$s.resolve()},t.prototype.nl=function(t,e){return this.tl(t)},t.prototype.tl=function(t){return 0===this.Sr.length?0:t-this.Sr[0].batchId},t.prototype.Zu=function(t){var e=this.tl(t);return e<0||e>=this.Sr.length?null:this.Sr[e]},t}(),Lh=function(){function t(t,e){this.Dr=t,this.sl=e,this.docs=new ii(Br.D),this.size=0}return t.prototype.Ir=function(t,e,n){var r=e.key,i=this.docs.get(r),o=i?i.size:0,s=this.sl(e);return this.docs=this.docs.ot(r,{ta:e,size:s,readTime:n}),this.size+=s-o,this.Dr.Mo(t,r.path.F())},t.prototype.Ar=function(t){var e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)},t.prototype.Rr=function(t,e){var n=this.docs.get(e);return $s.resolve(n?n.ta:null)},t.prototype.getEntries=function(t,e){var n=this,r=fi();return e.forEach((function(t){var e=n.docs.get(t);r=r.ot(t,e?e.ta:null)})),$s.resolve(r)},t.prototype.Lr=function(t,e,n){for(var r=pi(),i=new Br(e.path.child("")),o=this.docs.ft(i);o.At();){var s=o.It(),a=s.key,u=s.value,c=u.ta,h=u.readTime;if(!e.path.M(a.path))break;h.h(n)<=0||c instanceof ds&&Cs(e,c)&&(r=r.ot(c.key,c))}return $s.resolve(r)},t.prototype.il=function(t,e){return $s.forEach(this.docs,(function(t){return e(t)}))},t.prototype.ra=function(t){return new Ch(this)},t.prototype.aa=function(t){return $s.resolve(this.size)},t}(),Ch=function(t){function e(e){var n=this;return(n=t.call(this)||this).ha=e,n}return(0,r.ZT)(e,t),e.prototype.Vr=function(t){var e=this,n=[];return this.wr.forEach((function(r,i){i?n.push(e.ha.Ir(t,i,e.readTime)):e.ha.Ar(r)})),$s.kn(n)},e.prototype.Pr=function(t,e){return this.ha.Rr(t,e)},e.prototype.gr=function(t,e){return this.ha.getEntries(t,e)},e}(Ma),Rh=function(){function t(t){this.persistence=t,this.rl=new Mr((function(t){return Xr(t)}),Yr),this.lastRemoteSnapshotVersion=Ur.min(),this.highestTargetId=0,this.ol=0,this.al=new fc,this.targetCount=0,this.hl=Fu.fa()}return t.prototype.Ce=function(t,e){return this.rl.forEach((function(t,n){return e(n)})),$s.resolve()},t.prototype.Ia=function(t){return $s.resolve(this.lastRemoteSnapshotVersion)},t.prototype.ma=function(t){return $s.resolve(this.ol)},t.prototype.wa=function(t){return this.highestTargetId=this.hl.next(),$s.resolve(this.highestTargetId)},t.prototype.Aa=function(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.ol&&(this.ol=e),$s.resolve()},t.prototype.Pa=function(t){this.rl.set(t.target,t);var e=t.targetId;e>this.highestTargetId&&(this.hl=new Fu(e),this.highestTargetId=e),t.sequenceNumber>this.ol&&(this.ol=t.sequenceNumber)},t.prototype.Ra=function(t,e){return this.Pa(e),this.targetCount+=1,$s.resolve()},t.prototype.Va=function(t,e){return this.Pa(e),$s.resolve()},t.prototype.ya=function(t,e){return this.rl.delete(e.target),this.al.Kh(e.targetId),this.targetCount-=1,$s.resolve()},t.prototype.po=function(t,e,n){var r=this,i=0,o=[];return this.rl.forEach((function(s,a){a.sequenceNumber<=e&&null===n.get(a.targetId)&&(r.rl.delete(s),o.push(r.pa(t,a.targetId)),i++)})),$s.kn(o).next((function(){return i}))},t.prototype.ba=function(t){return $s.resolve(this.targetCount)},t.prototype.va=function(t,e){var n=this.rl.get(e)||null;return $s.resolve(n)},t.prototype.Sa=function(t,e,n){return this.al.Bh(e,n),$s.resolve()},t.prototype.Ca=function(t,e,n){this.al.Uh(e,n);var r=this.persistence.No,i=[];return r&&e.forEach((function(e){i.push(r.Go(t,e))})),$s.kn(i)},t.prototype.pa=function(t,e){return this.al.Kh(e),$s.resolve()},t.prototype.xa=function(t,e){var n=this.al.Wh(e);return $s.resolve(n)},t.prototype.Ho=function(t,e){return $s.resolve(this.al.Ho(e))},t}(),xh=function(){function t(t){var e=this;this.cl={},this.Ma=new Ta(0),this.$a=!1,this.$a=!0,this.No=t(this),this.ja=new Rh(this),this.Dr=new bu,this.vr=function(t,n){return new Lh(t,(function(t){return e.No.ul(t)}))}(this.Dr)}return t.prototype.start=function(){return Promise.resolve()},t.prototype.Di=function(){return this.$a=!1,Promise.resolve()},Object.defineProperty(t.prototype,"Ii",{get:function(){return this.$a},enumerable:!1,configurable:!0}),t.prototype.Za=function(){},t.prototype.th=function(){},t.prototype.Ah=function(){return this.Dr},t.prototype.Th=function(t){var e=this.cl[t.ti()];return e||(e=new Ph(this.Dr,this.No),this.cl[t.ti()]=e),e},t.prototype.Ih=function(){return this.ja},t.prototype.mh=function(){return this.vr},t.prototype.runTransaction=function(t,e,n){var r=this;dr("MemoryPersistence","Starting transaction:",t);var i=new Mh(this.Ma.next());return this.No.ll(),n(i).next((function(t){return r.No._l(i).next((function(){return t}))})).xn().then((function(t){return i.br(),t}))},t.prototype.fl=function(t,e){return $s.On(Object.values(this.cl).map((function(n){return function(){return n.Ho(t,e)}})))},t}(),Mh=function(t){function e(e){var n=this;return(n=t.call(this)||this).Fa=e,n}return(0,r.ZT)(e,t),e}(Ua),Vh=function(){function t(t){this.persistence=t,this.dl=new fc,this.wl=null}return t.El=function(e){return new t(e)},Object.defineProperty(t.prototype,"Tl",{get:function(){if(this.wl)return this.wl;throw gr()},enumerable:!1,configurable:!0}),t.prototype.Da=function(t,e,n){return this.dl.Da(n,e),this.Tl.delete(n.toString()),$s.resolve()},t.prototype.Na=function(t,e,n){return this.dl.Na(n,e),this.Tl.add(n.toString()),$s.resolve()},t.prototype.Go=function(t,e){return this.Tl.add(e.toString()),$s.resolve()},t.prototype.removeTarget=function(t,e){var n=this;this.dl.Kh(e.targetId).forEach((function(t){return n.Tl.add(t.toString())}));var r=this.persistence.Ih();return r.xa(t,e.targetId).next((function(t){t.forEach((function(t){return n.Tl.add(t.toString())}))})).next((function(){return r.ya(t,e)}))},t.prototype.ll=function(){this.wl=new Set},t.prototype._l=function(t){var e=this,n=this.persistence.mh().ra();return $s.forEach(this.Tl,(function(r){var i=Br.H(r);return e.Il(t,i).next((function(t){t||n.Ar(i)}))})).next((function(){return e.wl=null,n.apply(t)}))},t.prototype.yh=function(t,e){var n=this;return this.Il(t,e).next((function(t){t?n.Tl.delete(e.toString()):n.Tl.add(e.toString())}))},t.prototype.ul=function(t){return 0},t.prototype.Il=function(t,e){var n=this;return $s.On([function(){return $s.resolve(n.dl.Ho(e))},function(){return n.persistence.Ih().Ho(t,e)},function(){return n.persistence.fl(t,e)}])},t}(),Uh=function(){function t(t){this.ml=t.ml,this.Al=t.Al}return t.prototype.gc=function(t){this.Rl=t},t.prototype.Ic=function(t){this.Pl=t},t.prototype.onMessage=function(t){this.gl=t},t.prototype.close=function(){this.Al()},t.prototype.send=function(t){this.ml(t)},t.prototype.Vl=function(){this.Rl()},t.prototype.yl=function(t){this.Pl(t)},t.prototype.pl=function(t){this.gl(t)},t}(),jh={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},Fh=function(t){function e(e){var n=this;return(n=t.call(this,e)||this).forceLongPolling=e.forceLongPolling,n.T=e.T,n}return(0,r.ZT)(e,t),e.prototype.Nl=function(t,e,n,r){return new Promise((function(i,o){var s=new ur;s.listenOnce(sr.COMPLETE,(function(){try{switch(s.getLastErrorCode()){case or.NO_ERROR:var e=s.getResponseJson();dr("Connection","XHR received:",JSON.stringify(e)),i(e);break;case or.TIMEOUT:dr("Connection",'RPC "'+t+'" timed out'),o(new fr(hr.DEADLINE_EXCEEDED,"Request time out"));break;case or.HTTP_ERROR:var n=s.getStatus();if(dr("Connection",'RPC "'+t+'" failed with status:',n,"response text:",s.getResponseText()),n>0){var r=s.getResponseJson().error;if(r&&r.status&&r.message){var a=function(t){var e=t.toLowerCase().replace("_","-");return Object.values(hr).indexOf(e)>=0?e:hr.UNKNOWN}(r.status);o(new fr(a,r.message))}else o(new fr(hr.UNKNOWN,"Server responded with status "+s.getStatus()))}else o(new fr(hr.UNAVAILABLE,"Connection failed."));break;default:gr()}}finally{dr("Connection",'RPC "'+t+'" completed.')}}));var a=JSON.stringify(r);s.send(e,"POST",a,n,15)}))},e.prototype.Vc=function(t,e){var n=[this.vl,"/","google.firestore.v1.Firestore","/",t,"/channel"],r=new tr,i={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this._.projectId+"/databases/"+this._.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.T};this.Cl(i.initMessageHeaders,e),(0,s.uI)()||(0,s.b$)()||(0,s.d)()||(0,s.w1)()||(0,s.Mn)()||(0,s.ru)()||(i.httpHeadersOverwriteParam="$httpHeaders");var o=n.join("");dr("Connection","Creating WebChannel: "+o,i);var a=r.createWebChannel(o,i),u=!1,c=!1,h=new Uh({ml:function(t){c?dr("Connection","Not sending because WebChannel is closed:",t):(u||(dr("Connection","Opening WebChannel transport."),a.open(),u=!0),dr("Connection","WebChannel sending:",t),a.send(t))},Al:function(){return a.close()}}),f=function(t,e){a.listen(t,(function(t){try{e(t)}catch(t){setTimeout((function(){throw t}),0)}}))};return f(ar.EventType.OPEN,(function(){c||dr("Connection","WebChannel transport opened.")})),f(ar.EventType.CLOSE,(function(){c||(c=!0,dr("Connection","WebChannel transport closed"),h.yl())})),f(ar.EventType.ERROR,(function(t){c||(c=!0,yr("Connection","WebChannel transport errored:",t),h.yl(new fr(hr.UNAVAILABLE,"The operation could not be completed")))})),f(ar.EventType.MESSAGE,(function(t){var e;if(!c){var n=t.data[0];br(!!n);var r=n,i=r.error||(null===(e=r[0])||void 0===e?void 0:e.error);if(i){dr("Connection","WebChannel received error:",i);var o=i.status,s=function(t){var e=Qr[t];if(void 0!==e)return ri(e)}(o),u=i.message;void 0===s&&(s=hr.INTERNAL,u="Unknown error status: "+o+" with message "+i.message),c=!0,h.yl(new fr(s,u)),a.close()}else dr("Connection","WebChannel received:",n),h.pl(n)}})),setTimeout((function(){h.Vl()}),0),h},e}(function(){function t(t){this.bl=t,this._=t._;var e=t.ssl?"https":"http";this.vl=e+"://"+t.host,this.Sl="projects/"+this._.projectId+"/databases/"+this._.database+"/documents"}return t.prototype.Mc=function(t,e,n,r){var i=this.Dl(t,e);dr("RestConnection","Sending: ",i,n);var o={};return this.Cl(o,r),this.Nl(t,i,o,n).then((function(t){return dr("RestConnection","Received: ",t),t}),(function(e){throw yr("RestConnection",t+" failed with error: ",e,"url: ",i,"request:",n),e}))},t.prototype.$c=function(t,e,n,r){return this.Mc(t,e,n,r)},t.prototype.Cl=function(t,e){if(t["X-Goog-Api-Client"]="gl-js/ fire/8.0.0",t["Content-Type"]="text/plain",e)for(var n in e.Gh)e.Gh.hasOwnProperty(n)&&(t[n]=e.Gh[n])},t.prototype.Dl=function(t,e){var n=jh[t];return this.vl+"/v1/"+e+":"+n},t}()),Gh=function(){function t(){var t=this;this.xl=function(){return t.Fl()},this.kl=function(){return t.Ol()},this.Ml=[],this.$l()}return t.prototype.eu=function(t){this.Ml.push(t)},t.prototype.Di=function(){window.removeEventListener("online",this.xl),window.removeEventListener("offline",this.kl)},t.prototype.$l=function(){window.addEventListener("online",this.xl),window.addEventListener("offline",this.kl)},t.prototype.Fl=function(){dr("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var t=0,e=this.Ml;t<e.length;t++)(0,e[t])(0)},t.prototype.Ol=function(){dr("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var t=0,e=this.Ml;t<e.length;t++)(0,e[t])(1)},t.Ln=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},t}(),qh=function(){function t(){}return t.prototype.eu=function(t){},t.prototype.Di=function(){},t}();function Bh(t){return new $i(t,!0)}var zh=function(){function t(){this.synchronizeTabs=!1}return t.prototype.initialize=function(t){return(0,r.mG)(this,void 0,void 0,(function(){return(0,r.Jh)(this,(function(e){switch(e.label){case 0:return this.Su=this.Ll(t),this.persistence=this.Bl(t),[4,this.persistence.start()];case 1:return e.sent(),this.ql=this.Ul(t),this.Gc=this.Kl(t),[2]}}))}))},t.prototype.Ul=function(t){return null},t.prototype.Kl=function(t){return e=this.persistence,n=new Oh,r=t.Ql,new $u(e,n,r);var e,n,r},t.prototype.Bl=function(t){return new xh(Vh.El)},t.prototype.Ll=function(t){return new Ca},t.prototype.terminate=function(){return(0,r.mG)(this,void 0,void 0,(function(){return(0,r.Jh)(this,(function(t){switch(t.label){case 0:return this.ql&&this.ql.stop(),[4,this.Su.Di()];case 1:return t.sent(),[4,this.persistence.Di()];case 2:return t.sent(),[2]}}))}))},t}(),Kh=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).Wl=e,i.cacheSizeBytes=n,i.forceOwnership=r,i.synchronizeTabs=!1,i}return(0,r.ZT)(e,t),e.prototype.initialize=function(e){return(0,r.mG)(this,void 0,void 0,(function(){return(0,r.Jh)(this,(function(n){switch(n.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return n.sent(),[4,cc(this.Gc)];case 2:return n.sent(),[4,this.Wl.initialize(this,e)];case 3:return n.sent(),[4,Dh(this.Wl.fi)];case 4:return n.sent(),[4,Fc(this.Wl.bu)];case 5:return n.sent(),[2]}}))}))},e.prototype.Ul=function(t){var e=this.persistence.No.wo;return new Ka(e,t.hs)},e.prototype.Bl=function(t){var e=Qu(t.bl._,t.bl.persistenceKey),n=void 0!==this.cacheSizeBytes?za.ao(this.cacheSizeBytes):za.fo,r=Bh(t.bl._);return new Ju(this.synchronizeTabs,e,t.clientId,n,t.hs,ca(),ha(),r,this.Su,!!this.forceOwnership)},e.prototype.Ll=function(t){return new Ca},e}(zh),Hh=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n,!1)||this).Wl=e,r.cacheSizeBytes=n,r.synchronizeTabs=!0,r}return(0,r.ZT)(e,t),e.prototype.initialize=function(e){return(0,r.mG)(this,void 0,void 0,(function(){var n,i=this;return(0,r.Jh)(this,(function(o){switch(o.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return o.sent(),n=this.Wl.fi,this.Su instanceof La?(this.Su.fi={er:Ih.bind(null,n),nr:Nh.bind(null,n),sr:Sh.bind(null,n),pi:Ah.bind(null,n)},[4,this.Su.start()]):[3,3];case 2:o.sent(),o.label=3;case 3:return[4,this.persistence.Xa((function(t){return(0,r.mG)(i,void 0,void 0,(function(){return(0,r.Jh)(this,(function(e){switch(e.label){case 0:return[4,Eh(this.Wl.fi,t)];case 1:return e.sent(),this.ql&&(t&&!this.ql.Ii?this.ql.start(this.Gc):t||this.ql.stop()),[2]}}))}))}))];case 4:return o.sent(),[2]}}))}))},e.prototype.Ll=function(t){var e=ca();if(!La.Ln(e))throw new fr(hr.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=Qu(t.bl._,t.bl.persistenceKey);return new La(e,t.hs,n,t.clientId,t.Ql)},e}(Kh),Jh=function(){function t(){}return t.prototype.initialize=function(t,e){return(0,r.mG)(this,void 0,void 0,(function(){var n=this;return(0,r.Jh)(this,(function(r){switch(r.label){case 0:return this.Gc?[3,2]:(this.Gc=t.Gc,this.Su=t.Su,this.zc=this.jl(e),this.bu=this.Gl(e),this.vu=this.zl(e),this.fi=this.Hl(e,!t.synchronizeTabs),this.Su.di=function(t){return sh(n.fi,t,1)},this.bu.Hc.Jl=gh.bind(null,this.fi),[4,Jc(this.bu,this.fi.Uu)]);case 1:r.sent(),r.label=2;case 2:return[2]}}))}))},t.prototype.zl=function(t){return new va},t.prototype.jl=function(t){var e,n=Bh(t.bl._),r=(e=t.bl,new Fh(e));return function(t,e,n){return new Ic(t,e,n)}(t.credentials,r,n)},t.prototype.Gl=function(t){var e,n,r,i,o,s=this;return e=this.Gc,n=this.zc,r=t.hs,i=function(t){return sh(s.fi,t,0)},o=Gh.Ln()?new Gh:new qh,new Tc(e,n,r,i,o)},t.prototype.Hl=function(t,e){return function(t,e,n,r,i,o,s){var a=new eh(t,e,n,r,i,o);return s&&(a.qu=!0),a}(this.Gc,this.bu,this.vu,this.Su,t.Ql,t.Du,e)},t.prototype.terminate=function(){return Nc(this.bu)},t}(),Wh=function(){function t(t){this.observer=t,this.muted=!1}return t.prototype.next=function(t){this.observer.next&&this.Yl(this.observer.next,t)},t.prototype.error=function(t){this.observer.error?this.Yl(this.observer.error,t):console.error("Uncaught Error in snapshot listener:",t)},t.prototype.Xl=function(){this.muted=!0},t.prototype.Yl=function(t,e){var n=this;this.muted||setTimeout((function(){n.muted||t(e)}),0)},t}();function Xh(t,e,n){if(!n)throw new fr(hr.INVALID_ARGUMENT,"Function "+t+"() cannot be called with an empty "+e+".")}function Yh(t,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new fr(hr.INVALID_ARGUMENT,"Invalid options passed to function "+t+'(): You cannot specify both "merge" and "mergeFields".');return e}function Zh(t,e,n,r){if(!0===e&&!0===r)throw new fr(hr.INVALID_ARGUMENT,t+" and "+n+" cannot be used together.")}function Qh(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=t.substring(0,20)+"..."),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";var e=function(t){if(t.constructor){var e=/function\s+([^\s(]+)\s*\(/.exec(t.constructor.toString());if(e&&e.length>1)return e[1]}return null}(t);return e?"a custom "+e+" object":"an object"}return"function"==typeof t?"a function":gr()}function $h(t,e){if(e<=0)throw new fr(hr.INVALID_ARGUMENT,"Function "+t+"() requires a positive number, but it was: "+e+".")}var tf=function(t){for(var e=0;e<t.length;++e)if(0===t[e].length)throw new fr(hr.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this.Zl=new qr(t)},ef=function(t){function e(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return t.call(this,e)||this}return(0,r.ZT)(e,t),e.documentId=function(){return new e(qr.j().B())},e.prototype.isEqual=function(t){return t instanceof e&&this.Zl.isEqual(t.Zl)},e}(tf),nf=new RegExp("[~\\*/\\[\\]]"),rf=function(t){this.t_=t},of=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,r.ZT)(e,t),e.prototype.e_=function(t){if(2!==t.n_)throw 1===t.n_?t.s_(this.t_+"() can only appear at the top level of your update data"):t.s_(this.t_+"() cannot be used with set() unless you pass {merge:true}");return t.Qe.push(t.path),null},e.prototype.isEqual=function(t){return t instanceof e},e}(rf);function sf(t,e,n){return new gf({n_:3,i_:e.settings.i_,methodName:t.t_,r_:n},e._,e.serializer,e.ignoreUndefinedProperties)}var af=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,r.ZT)(e,t),e.prototype.e_=function(t){return new Ho(t.path,new Vo)},e.prototype.isEqual=function(t){return t instanceof e},e}(rf),uf=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).o_=n,r}return(0,r.ZT)(e,t),e.prototype.e_=function(t){var e=sf(this,t,!0),n=this.o_.map((function(t){return _f(t,e)})),r=new Uo(n);return new Ho(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(rf),cf=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).o_=n,r}return(0,r.ZT)(e,t),e.prototype.e_=function(t){var e=sf(this,t,!0),n=this.o_.map((function(t){return _f(t,e)})),r=new Fo(n);return new Ho(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(rf),hf=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).a_=n,r}return(0,r.ZT)(e,t),e.prototype.e_=function(t){var e=new qo(t.serializer,no(t.serializer,this.a_));return new Ho(t.path,e)},e.prototype.isEqual=function(t){return this===t},e}(rf),ff=function(){function t(t,e){if(!isFinite(t)||t<-90||t>90)throw new fr(hr.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new fr(hr.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this.h_=t,this.c_=e}return Object.defineProperty(t.prototype,"latitude",{get:function(){return this.h_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"longitude",{get:function(){return this.c_},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this.h_===t.h_&&this.c_===t.c_},t.prototype.toJSON=function(){return{latitude:this.h_,longitude:this.c_}},t.prototype.g=function(t){return Tr(this.h_,t.h_)||Tr(this.c_,t.c_)},t}(),lf=function(t){this.u_=t},pf=/^__.*__$/,df=function(t,e,n){this.l_=t,this.__=e,this.f_=n},vf=function(){function t(t,e,n){this.data=t,this.Qe=e,this.fieldTransforms=n}return t.prototype.d_=function(t,e){var n=[];return null!==this.Qe?n.push(new rs(t,this.data,this.Qe,e)):n.push(new ns(t,this.data,e)),this.fieldTransforms.length>0&&n.push(new os(t,this.fieldTransforms)),n},t}(),yf=function(){function t(t,e,n){this.data=t,this.Qe=e,this.fieldTransforms=n}return t.prototype.d_=function(t,e){var n=[new rs(t,this.data,this.Qe,e)];return this.fieldTransforms.length>0&&n.push(new os(t,this.fieldTransforms)),n},t}();function mf(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw gr()}}var gf=function(){function t(t,e,n,r,i,o){this.settings=t,this._=e,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===i&&this.w_(),this.fieldTransforms=i||[],this.Qe=o||[]}return Object.defineProperty(t.prototype,"path",{get:function(){return this.settings.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"n_",{get:function(){return this.settings.n_},enumerable:!1,configurable:!0}),t.prototype.E_=function(e){return new t(Object.assign(Object.assign({},this.settings),e),this._,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.Qe)},t.prototype.T_=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.E_({path:n,r_:!1});return r.I_(t),r},t.prototype.m_=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.E_({path:n,r_:!1});return r.w_(),r},t.prototype.A_=function(t){return this.E_({path:void 0,r_:!0})},t.prototype.s_=function(t){return Of(t,this.settings.methodName,this.settings.R_||!1,this.path,this.settings.i_)},t.prototype.contains=function(t){return void 0!==this.Qe.find((function(e){return t.M(e)}))||void 0!==this.fieldTransforms.find((function(e){return t.M(e.field)}))},t.prototype.w_=function(){if(this.path)for(var t=0;t<this.path.length;t++)this.I_(this.path.get(t))},t.prototype.I_=function(t){if(0===t.length)throw this.s_("Document fields must not be empty");if(mf(this.n_)&&pf.test(t))throw this.s_('Document fields cannot begin and end with "__"')},t}(),bf=function(){function t(t,e,n){this._=t,this.ignoreUndefinedProperties=e,this.serializer=n||Bh(t)}return t.prototype.P_=function(t,e,n,r){return void 0===r&&(r=!1),new gf({n_:t,methodName:e,i_:n,path:qr.U(),r_:!1,R_:r},this._,this.serializer,this.ignoreUndefinedProperties)},t}();function wf(t,e,n,r,i,o){void 0===o&&(o={});var s=t.P_(o.merge||o.mergeFields?2:0,e,n,i);Sf("Data must be an object, but it was:",s,r);var a,u,c=Af(r,s);if(o.merge)a=new Ko(s.Qe),u=s.fieldTransforms;else if(o.mergeFields){for(var h=[],f=0,l=o.mergeFields;f<l.length;f++){var p=l[f],d=void 0;if(p instanceof tf)d=p.Zl;else{if("string"!=typeof p)throw gr();d=Df(e,p,n)}if(!s.contains(d))throw new fr(hr.INVALID_ARGUMENT,"Field '"+d+"' is specified in your field mask but missing from your input data.");Pf(h,d)||h.push(d)}a=new Ko(h),u=s.fieldTransforms.filter((function(t){return a.Je(t.field)}))}else a=null,u=s.fieldTransforms;return new vf(new hs(c),a,u)}function If(t,e,n,r){var i=t.P_(1,e,n);Sf("Data must be an object, but it was:",i,r);var o=[],s=new fs;Rr(r,(function(t,r){var a=Df(e,t,n),u=i.m_(a);if(r instanceof of||r instanceof lf&&r.u_ instanceof of)o.push(a);else{var c=_f(r,u);null!=c&&(o.push(a),s.set(a,c))}}));var a=new Ko(o);return new yf(s.Xe(),a,i.fieldTransforms)}function Ef(t,e,n,r,i,o){var s=t.P_(1,e,n),a=[kf(e,r,n)],u=[i];if(o.length%2!=0)throw new fr(hr.INVALID_ARGUMENT,"Function "+e+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var c=0;c<o.length;c+=2)a.push(kf(e,o[c])),u.push(o[c+1]);for(var h=[],f=new fs,l=a.length-1;l>=0;--l)if(!Pf(h,a[l])){var p=a[l],d=u[l],v=s.m_(p);if(d instanceof of||d instanceof lf&&d.u_ instanceof of)h.push(p);else{var y=_f(d,v);null!=y&&(h.push(p),f.set(p,y))}}var m=new Ko(h);return new yf(f.Xe(),m,s.fieldTransforms)}function Tf(t,e,n,r){return void 0===r&&(r=!1),_f(n,t.P_(r?4:3,e))}function _f(t,e){if(t instanceof lf&&(t=t.u_),Nf(t))return Sf("Unsupported field value:",e,t),Af(t,e);if(t instanceof rf)return function(t,e){if(!mf(e.n_))throw e.s_(t.t_+"() can only be used with update() and set()");if(!e.path)throw e.s_(t.t_+"() is not currently supported inside arrays");var n=t.e_(e);n&&e.fieldTransforms.push(n)}(t,e),null;if(e.path&&e.Qe.push(e.path),t instanceof Array){if(e.settings.r_&&4!==e.n_)throw e.s_("Nested arrays are not supported");return function(t,e){for(var n=[],r=0,i=0,o=t;i<o.length;i++){var s=_f(o[i],e.A_(r));null==s&&(s={nullValue:"NULL_VALUE"}),n.push(s),r++}return{arrayValue:{values:n}}}(t,e)}return function(t,e){if(null===t)return{nullValue:"NULL_VALUE"};if("number"==typeof t)return no(e.serializer,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){var n=Vr.fromDate(t);return{timestampValue:ro(e.serializer,n)}}if(t instanceof Vr){var r=new Vr(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:ro(e.serializer,r)}}if(t instanceof ff)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Sr)return{bytesValue:io(e.serializer,t.l)};if(t instanceof df){var i=e._,o=t.l_;if(!o.isEqual(i))throw e.s_("Document reference is for database "+o.projectId+"/"+o.database+" but should be for database "+i.projectId+"/"+i.database);return{referenceValue:ao(t.l_||e._,t.__.path)}}if(void 0===t&&e.ignoreUndefinedProperties)return null;throw e.s_("Unsupported field value: "+Qh(t))}(t,e)}function Af(t,e){var n={};return xr(t)?e.path&&e.path.length>0&&e.Qe.push(e.path):Rr(t,(function(t,r){var i=_f(r,e.T_(t));null!=i&&(n[t]=i)})),{mapValue:{fields:n}}}function Nf(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof Vr||t instanceof ff||t instanceof Sr||t instanceof df||t instanceof rf)}function Sf(t,e,n){if(!Nf(n)||!function(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}(n)){var r=Qh(n);throw"an object"===r?e.s_(t+" a custom object"):e.s_(t+" "+r)}}function kf(t,e,n){if(e instanceof tf)return e.Zl;if("string"==typeof e)return Df(t,e);throw Of("Field path arguments must be of type string or FieldPath.",t,!1,void 0,n)}function Df(t,e,n){try{return function(t){if(t.search(nf)>=0)throw new fr(hr.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not contain '~', '*', '/', '[', or ']'");try{return new(ef.bind.apply(ef,(0,r.pr)([void 0],t.split("."))))}catch(e){throw new fr(hr.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'")}}(e).Zl}catch(e){throw Of((i=e)instanceof Error?i.message:i.toString(),t,!1,void 0,n)}var i}function Of(t,e,n,r,i){var o=r&&!r.P(),s=void 0!==i,a="Function "+e+"() called with invalid data";n&&(a+=" (via `toFirestore()`)");var u="";return(o||s)&&(u+=" (found",o&&(u+=" in field "+r),s&&(u+=" in document "+i),u+=")"),new fr(hr.INVALID_ARGUMENT,(a+=". ")+t+u)}function Pf(t,e){return t.some((function(t){return t.isEqual(e)}))}var Lf=function(){function t(t){this.zc=t,this.g_=new Map,this.mutations=[],this.V_=!1,this.y_=null,this.p_=new Set}return t.prototype.b_=function(t){return(0,r.mG)(this,void 0,void 0,(function(){var e,n=this;return(0,r.Jh)(this,(function(i){switch(i.label){case 0:if(this.v_(),this.mutations.length>0)throw new fr(hr.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(t,e){return(0,r.mG)(this,void 0,void 0,(function(){var n,i,o,s,a,u;return(0,r.Jh)(this,(function(r){switch(r.label){case 0:return n=wr(t),i=po(n.serializer)+"/documents",o={documents:e.map((function(t){return co(n.serializer,t)}))},[4,n.$c("BatchGetDocuments",i,o)];case 1:return s=r.sent(),a=new Map,s.forEach((function(t){var e=function(t,e){return"found"in e?function(t,e){br(!!e.found),e.found.name,e.found.updateTime;var n=ho(t,e.found.name),r=so(e.found.updateTime),i=new hs({mapValue:{fields:e.found.fields}});return new ds(n,r,i,{})}(t,e):"missing"in e?function(t,e){br(!!e.missing),br(!!e.readTime);var n=ho(t,e.missing),r=so(e.readTime);return new vs(n,r)}(t,e):gr()}(n.serializer,t);a.set(e.key.toString(),e)})),u=[],[2,(e.forEach((function(t){var e=a.get(t.toString());br(!!e),u.push(e)})),u)]}}))}))}(this.zc,t)];case 1:return[2,((e=i.sent()).forEach((function(t){t instanceof vs||t instanceof ds?n.S_(t):gr()})),e)]}}))}))},t.prototype.set=function(t,e){this.write(e.d_(t,this.Ge(t))),this.p_.add(t.toString())},t.prototype.update=function(t,e){try{this.write(e.d_(t,this.D_(t)))}catch(t){this.y_=t}this.p_.add(t.toString())},t.prototype.delete=function(t){this.write([new us(t,this.Ge(t))]),this.p_.add(t.toString())},t.prototype.commit=function(){return(0,r.mG)(this,void 0,void 0,(function(){var t,e=this;return(0,r.Jh)(this,(function(n){switch(n.label){case 0:if(this.v_(),this.y_)throw this.y_;return t=this.g_,this.mutations.forEach((function(e){t.delete(e.key.toString())})),t.forEach((function(t,n){var r=Br.H(n);e.mutations.push(new cs(r,e.Ge(r)))})),[4,function(t,e){return(0,r.mG)(this,void 0,void 0,(function(){var n,i,o;return(0,r.Jh)(this,(function(r){switch(r.label){case 0:return n=wr(t),i=po(n.serializer)+"/documents",o={writes:e.map((function(t){return mo(n.serializer,t)}))},[4,n.Mc("Commit",i,o)];case 1:return r.sent(),[2]}}))}))}(this.zc,this.mutations)];case 1:return n.sent(),this.V_=!0,[2]}}))}))},t.prototype.S_=function(t){var e;if(t instanceof ds)e=t.version;else{if(!(t instanceof vs))throw gr();e=Ur.min()}var n=this.g_.get(t.key.toString());if(n){if(!e.isEqual(n))throw new fr(hr.ABORTED,"Document version changed between two reads.")}else this.g_.set(t.key.toString(),e)},t.prototype.Ge=function(t){var e=this.g_.get(t.toString());return!this.p_.has(t.toString())&&e?Wo.updateTime(e):Wo.ze()},t.prototype.D_=function(t){var e=this.g_.get(t.toString());if(!this.p_.has(t.toString())&&e){if(e.isEqual(Ur.min()))throw new fr(hr.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Wo.updateTime(e)}return Wo.exists(!0)},t.prototype.write=function(t){this.v_(),this.mutations=this.mutations.concat(t)},t.prototype.v_=function(){},t}(),Cf=function(){function t(t,e,n,r){this.hs=t,this.zc=e,this.updateFunction=n,this.ls=r,this.C_=5,this.Vs=new Qs(this.hs,"transaction_retry")}return t.prototype.run=function(){this.N_()},t.prototype.N_=function(){var t=this;this.Vs.Pn((function(){return(0,r.mG)(t,void 0,void 0,(function(){var t,e,n=this;return(0,r.Jh)(this,(function(r){return t=new Lf(this.zc),(e=this.x_(t))&&e.then((function(e){n.hs.ws((function(){return t.commit().then((function(){n.ls.resolve(e)})).catch((function(t){n.F_(t)}))}))})).catch((function(t){n.F_(t)})),[2]}))}))}))},t.prototype.x_=function(t){try{var e=this.updateFunction(t);return!zr(e)&&e.catch&&e.then?e:(this.ls.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.ls.reject(t),null}},t.prototype.F_=function(t){var e=this;this.C_>0&&this.k_(t)?(this.C_-=1,this.hs.ws((function(){return e.N_(),Promise.resolve()}))):this.ls.reject(t)},t.prototype.k_=function(t){if("FirebaseError"===t.name){var e=t.code;return"aborted"===e||"failed-precondition"===e||!ni(e)}return!1},t}(),Rf=function(){function t(t,e){this.credentials=t,this.hs=e,this.clientId=Er.t(),this.O_=new Zs}return t.prototype.start=function(t,e,n){var i=this;this.M_(),this.bl=t;var o=new Zs,s=!1;return this.credentials.Jh((function(t){if(!s)return s=!0,dr("FirestoreClient","Initializing. user=",t.uid),i.L_(e,n,t,o).then(i.O_.resolve,i.O_.reject);i.hs.Cs((function(){return function(t,e){return(0,r.mG)(this,void 0,void 0,(function(){var n,i;return(0,r.Jh)(this,(function(r){switch(r.label){case 0:return(n=wr(t)).hs.Fs(),dr("RemoteStore","RemoteStore received new credentials"),i=Cc(n),n.Xc.add(3),[4,Ac(n)];case 1:return r.sent(),i&&n.nu.set("Unknown"),[4,n.Hc.Jl(e)];case 2:return r.sent(),n.Xc.delete(3),[4,_c(n)];case 3:return r.sent(),[2]}}))}))}(i.bu,t)}))})),this.hs.ws((function(){return i.O_.promise})),o.promise},t.prototype.enableNetwork=function(){var t=this;return this.M_(),this.hs.enqueue((function(){return t.persistence.th(!0),function(t){var e=wr(t);return e.Xc.delete(0),_c(e)}(t.bu)}))},t.prototype.L_=function(t,e,n,i){return(0,r.mG)(this,void 0,void 0,(function(){var o,s,a=this;return(0,r.Jh)(this,(function(u){switch(u.label){case 0:return u.trys.push([0,3,,4]),o={hs:this.hs,bl:this.bl,clientId:this.clientId,credentials:this.credentials,Ql:n,Du:100},[4,t.initialize(o)];case 1:return u.sent(),[4,e.initialize(t,o)];case 2:return u.sent(),this.persistence=t.persistence,this.Su=t.Su,this.Gc=t.Gc,this.ql=t.ql,this.zc=e.zc,this.bu=e.bu,this.fi=e.fi,this.B_=e.vu,this.B_.Us=nh.bind(null,this.fi),this.B_.Ws=ih.bind(null,this.fi),this.persistence.Za((function(){return(0,r.mG)(a,void 0,void 0,(function(){return(0,r.Jh)(this,(function(t){switch(t.label){case 0:return[4,this.terminate()];case 1:return t.sent(),[2]}}))}))})),i.resolve(),[3,4];case 3:if(s=u.sent(),i.reject(s),!function(t){return"FirebaseError"===t.name?t.code===hr.FAILED_PRECONDITION||t.code===hr.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code}(s))throw s;return[2,(console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+s),this.L_(new zh,new Jh,n,i))];case 4:return[2]}}))}))},t.prototype.M_=function(){if(this.hs.ps)throw new fr(hr.FAILED_PRECONDITION,"The client has already been terminated.")},t.prototype.disableNetwork=function(){var t=this;return this.M_(),this.hs.enqueue((function(){return t.persistence.th(!1),function(t){return(0,r.mG)(this,void 0,void 0,(function(){var e;return(0,r.Jh)(this,(function(n){switch(n.label){case 0:return(e=wr(t)).Xc.add(0),[4,Ac(e)];case 1:return n.sent(),e.nu.set("Offline"),[2]}}))}))}(t.bu)}))},t.prototype.terminate=function(){var t=this;this.hs.Ds();var e=new Zs;return this.hs.bs((function(){return(0,r.mG)(t,void 0,void 0,(function(){var t,n;return(0,r.Jh)(this,(function(r){switch(r.label){case 0:return r.trys.push([0,4,,5]),this.ql&&this.ql.stop(),[4,Nc(this.bu)];case 1:return r.sent(),[4,this.Su.Di()];case 2:return r.sent(),[4,this.persistence.Di()];case 3:return r.sent(),this.credentials.Yh(),e.resolve(),[3,5];case 4:return t=r.sent(),n=pa(t,"Failed to shutdown persistence"),e.reject(n),[3,5];case 5:return[2]}}))}))})),e.promise},t.prototype.waitForPendingWrites=function(){var t=this;this.M_();var e=new Zs;return this.hs.ws((function(){return function(t,e){return(0,r.mG)(this,void 0,void 0,(function(){var n,i,o,s,a;return(0,r.Jh)(this,(function(r){switch(r.label){case 0:Cc((n=wr(t)).bu)||dr("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),r.label=1;case 1:return r.trys.push([1,3,,4]),[4,function(t){var e=wr(t);return e.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(t){return e.Sr.qo(t)}))}(n.Gc)];case 2:return-1===(i=r.sent())?[2,void e.resolve()]:((o=n.Lu.get(i)||[]).push(e),n.Lu.set(i,o),[3,4]);case 3:return s=r.sent(),a=pa(s,"Initialization of waitForPendingWrites() operation failed"),e.reject(a),[3,4];case 4:return[2]}}))}))}(t.fi,e)})),e.promise},t.prototype.listen=function(t,e,n){var r=this;this.M_();var i=new Wh(n),o=new Ia(t,i,e);return this.hs.ws((function(){return ya(r.B_,o)})),function(){i.Xl(),r.hs.ws((function(){return ma(r.B_,o)}))}},t.prototype.q_=function(t){return(0,r.mG)(this,void 0,void 0,(function(){var e,n=this;return(0,r.Jh)(this,(function(i){switch(i.label){case 0:return this.M_(),[4,this.O_.promise];case 1:return i.sent(),e=new Zs,[2,(this.hs.ws((function(){return function(t,e,n){return(0,r.mG)(this,void 0,void 0,(function(){var i,o,s;return(0,r.Jh)(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,function(t,e){var n=wr(t);return n.persistence.runTransaction("read document","readonly",(function(t){return n.Nh.Cr(t,e)}))}(t,e)];case 1:return(i=r.sent())instanceof ds?n.resolve(i):i instanceof vs?n.resolve(null):n.reject(new fr(hr.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return o=r.sent(),s=pa(o,"Failed to get document '"+e+" from cache"),n.reject(s),[3,3];case 3:return[2]}}))}))}(n.Gc,t,e)})),e.promise)]}}))}))},t.prototype.U_=function(t,e){return void 0===e&&(e={}),(0,r.mG)(this,void 0,void 0,(function(){var n,i=this;return(0,r.Jh)(this,(function(r){switch(r.label){case 0:return this.M_(),[4,this.O_.promise];case 1:return r.sent(),n=new Zs,[2,(this.hs.ws((function(){return function(t,e,n,r,i){var o=new Wh({next:function(o){e.ws((function(){return ma(t,s)}));var a=o.docs.has(n);!a&&o.fromCache?i.reject(new fr(hr.UNAVAILABLE,"Failed to get document because the client is offline.")):a&&o.fromCache&&r&&"server"===r.source?i.reject(new fr(hr.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(o)},error:function(t){return i.reject(t)}}),s=new Ia(bs(n.path),o,{includeMetadataChanges:!0,Xs:!0});return ya(t,s)}(i.B_,i.hs,t,e,n)})),n.promise)]}}))}))},t.prototype.K_=function(t){return(0,r.mG)(this,void 0,void 0,(function(){var e,n=this;return(0,r.Jh)(this,(function(i){switch(i.label){case 0:return this.M_(),[4,this.O_.promise];case 1:return i.sent(),e=new Zs,[2,(this.hs.ws((function(){return function(t,e,n){return(0,r.mG)(this,void 0,void 0,(function(){var i,o,s,a,u,c;return(0,r.Jh)(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,sc(t,e,!0)];case 1:return i=r.sent(),o=new Qc(e,i.Fh),s=o.Eu(i.documents),a=o.Vr(s,!1),n.resolve(a.snapshot),[3,3];case 2:return u=r.sent(),c=pa(u,"Failed to execute query '"+e+" against cache"),n.reject(c),[3,3];case 3:return[2]}}))}))}(n.Gc,t,e)})),e.promise)]}}))}))},t.prototype.Q_=function(t,e){return void 0===e&&(e={}),(0,r.mG)(this,void 0,void 0,(function(){var n,i=this;return(0,r.Jh)(this,(function(r){switch(r.label){case 0:return this.M_(),[4,this.O_.promise];case 1:return r.sent(),n=new Zs,[2,(this.hs.ws((function(){return function(t,e,n,r,i){var o=new Wh({next:function(n){e.ws((function(){return ma(t,s)})),n.fromCache&&"server"===r.source?i.reject(new fr(hr.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(t){return i.reject(t)}}),s=new Ia(n,o,{includeMetadataChanges:!0,Xs:!0});return ya(t,s)}(i.B_,i.hs,t,e,n)})),n.promise)]}}))}))},t.prototype.write=function(t){var e=this;this.M_();var n=new Zs;return this.hs.ws((function(){return function(t,e,n){return(0,r.mG)(this,void 0,void 0,(function(){var i,o,s,a;return(0,r.Jh)(this,(function(r){switch(r.label){case 0:i=Dh(t),r.label=1;case 1:return r.trys.push([1,5,,6]),[4,function(t,e){var n,r=wr(t),i=Vr.now(),o=e.reduce((function(t,e){return t.add(e.key)}),yi());return r.persistence.runTransaction("Locally write mutations","readwrite",(function(t){return r.Nh.Or(t,o).next((function(o){n=o;for(var s=[],a=0,u=e;a<u.length;a++){var c=u[a],h=$o(c,n.get(c.key));null!=h&&s.push(new rs(c.key,h,ls(h.proto.mapValue),Wo.exists(!0)))}return r.Sr.Oo(t,i,s,e)}))})).then((function(t){var e=t.lr(n);return{batchId:t.batchId,wr:e}}))}(i.Gc,e)];case 2:return o=r.sent(),i.Su.Fi(o.batchId),function(t,e,n){var r=t.$u[t.currentUser.ti()];r||(r=new ii(Tr)),r=r.ot(e,n),t.$u[t.currentUser.ti()]=r}(i,o.batchId,n),[4,mh(i,o.wr)];case 3:return r.sent(),[4,Fc(i.bu)];case 4:return r.sent(),[3,6];case 5:return s=r.sent(),a=pa(s,"Failed to persist write"),n.reject(a),[3,6];case 6:return[2]}}))}))}(e.fi,t,n)})),n.promise},t.prototype._=function(){return this.bl._},t.prototype.W_=function(t){var e=this;this.M_();var n=new Wh(t);return this.hs.ws((function(){return(0,r.mG)(e,void 0,void 0,(function(){return(0,r.Jh)(this,(function(t){return[2,function(t,e){wr(t).qs.add(e),e.next()}(this.B_,n)]}))}))})),function(){n.Xl(),e.hs.ws((function(){return(0,r.mG)(e,void 0,void 0,(function(){return(0,r.Jh)(this,(function(t){return[2,function(t,e){wr(t).qs.delete(e)}(this.B_,n)]}))}))}))}},Object.defineProperty(t.prototype,"j_",{get:function(){return this.hs.ps},enumerable:!1,configurable:!0}),t.prototype.transaction=function(t){var e=this;this.M_();var n=new Zs;return this.hs.ws((function(){return new Cf(e.hs,e.zc,t,n).run(),Promise.resolve()})),n.promise},t}();function xf(t){return function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=t,r=0,i=["next","error","complete"];r<i.length;r++){var o=i[r];if(o in n&&"function"==typeof n[o])return!0}return!1}(t)}var Mf=function(){function t(t,e,n,r){this._=t,this.G_=e,this.z_=n,this.H_=r}return t.prototype.J_=function(t){switch(xi(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Bi(t.integerValue||t.doubleValue);case 3:return this.Y_(t.timestampValue);case 4:return this.X_(t);case 5:return t.stringValue;case 6:return this.H_(zi(t.bytesValue));case 7:return this.Z_(t.referenceValue);case 8:return this.tf(t.geoPointValue);case 9:return this.ef(t.arrayValue);case 10:return this.nf(t.mapValue);default:throw gr()}},t.prototype.nf=function(t){var e=this,n={};return Rr(t.fields||{},(function(t,r){n[t]=e.J_(r)})),n},t.prototype.tf=function(t){return new ff(Bi(t.latitude),Bi(t.longitude))},t.prototype.ef=function(t){var e=this;return(t.values||[]).map((function(t){return e.J_(t)}))},t.prototype.X_=function(t){switch(this.G_){case"previous":var e=Li(t);return null==e?null:this.J_(e);case"estimate":return this.Y_(Ci(t));default:return null}},t.prototype.Y_=function(t){var e=qi(t);return new Vr(e.seconds,e.nanos)},t.prototype.Z_=function(t){var e=Fr.q(t);br(Lo(e));var n=new Lr(e.get(1),e.get(3)),r=new Br(e.N(5));return n.isEqual(this._)||vr("Document "+r+" contains a document reference within a different database ("+n.projectId+"/"+n.database+") which is not supported. It will be treated as a reference in the current database ("+this._.projectId+"/"+this._.database+") instead."),this.z_(r)},t}(),Vf=za.uo,Uf=function(){function t(t){var e;if(void 0===t.host){if(void 0!==t.ssl)throw new fr(hr.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=za._o;else{if(t.cacheSizeBytes!==Vf&&t.cacheSizeBytes<za.lo)throw new fr(hr.INVALID_ARGUMENT,"cacheSizeBytes must be at least "+za.lo);this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,Zh("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return t.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties},t}(),jf="You are using the memory-only build of Firestore. Persistence support is only available via the @firebase/firestore bundle or the firebase-firestore.js build.",Ff=function(){function t(){}return t.prototype.enableIndexedDbPersistence=function(t,e){throw new fr(hr.FAILED_PRECONDITION,jf)},t.prototype.enableMultiTabIndexedDbPersistence=function(t){throw new fr(hr.FAILED_PRECONDITION,jf)},t.prototype.clearIndexedDbPersistence=function(t){throw new fr(hr.FAILED_PRECONDITION,jf)},t}(),Gf=function(){function t(){}return t.prototype.enableIndexedDbPersistence=function(t,e){var n=new Jh,r=new Kh(n,t.sf().cacheSizeBytes,e);return t.if(r,n)},t.prototype.enableMultiTabIndexedDbPersistence=function(t){var e=new Jh,n=new Hh(e,t.sf().cacheSizeBytes);return t.if(n,e)},t.prototype.clearIndexedDbPersistence=function(t){var e=this,n=new Zs;return t.rf.bs((function(){return(0,r.mG)(e,void 0,void 0,(function(){var e;return(0,r.Jh)(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,function(t){return(0,r.mG)(this,void 0,void 0,(function(){var e;return(0,r.Jh)(this,(function(n){switch(n.label){case 0:return ta.Ln()?(e=t+"main",[4,ta.delete(e)]):[2,Promise.resolve()];case 1:return n.sent(),[2]}}))}))}(Qu(t.l_,t.af))];case 1:return i.sent(),n.resolve(),[3,3];case 2:return e=i.sent(),n.reject(e),[3,3];case 3:return[2]}}))}))})),n.promise},t}(),qf=function(){function t(e,n,i){var o=this;if(void 0===i&&(i=new Ff),this.hf=i,this.cf=null,this.rf=new la,this.INTERNAL={delete:function(){return(0,r.mG)(o,void 0,void 0,(function(){return(0,r.Jh)(this,(function(t){switch(t.label){case 0:return this.uf(),[4,this.lf.terminate()];case 1:return t.sent(),[2]}}))}))}},"object"==typeof e.options){var s=e;this.cf=s,this.l_=t._f(s),this.af=s.name,this.ff=new vc(n)}else{var a=e;if(!a.projectId)throw new fr(hr.INVALID_ARGUMENT,"Must provide projectId");this.l_=new Lr(a.projectId,a.database),this.af="[DEFAULT]",this.ff=new dc}this.df=new Uf({})}return Object.defineProperty(t.prototype,"wf",{get:function(){return this.Ef||(this.Ef=new bf(this.l_,this.df.ignoreUndefinedProperties)),this.Ef},enumerable:!1,configurable:!0}),t.prototype.settings=function(t){t.merge&&delete(t=Object.assign(Object.assign({},this.df),t)).merge;var e=new Uf(t);if(this.lf&&!this.df.isEqual(e))throw new fr(hr.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this.df=e,void 0!==e.credentials&&(this.ff=function(t){if(!t)return new dc;switch(t.type){case"gapi":var e=t.client;return br(!("object"!=typeof e||null===e||!e.auth||!e.auth.getAuthHeaderValueForFirstParty)),new mc(e,t.sessionIndex||"0");case"provider":return t.client;default:throw new fr(hr.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(e.credentials))},t.prototype.useEmulator=function(t,e){"firestore.googleapis.com"!==this.df.host&&yr("Host has been set in both settings() and useEmulator(), emulator host will be used"),this.settings({host:t+":"+e,ssl:!1,merge:!0})},t.prototype.enableNetwork=function(){return this.uf(),this.lf.enableNetwork()},t.prototype.disableNetwork=function(){return this.uf(),this.lf.disableNetwork()},t.prototype.enablePersistence=function(t){if(this.lf)throw new fr(hr.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only call enablePersistence() before calling any other methods on a Firestore object.");var e=!1,n=!1;return t&&Zh("synchronizeTabs",e=!!t.synchronizeTabs,"experimentalForceOwningTab",n=!!t.experimentalForceOwningTab),e?this.hf.enableMultiTabIndexedDbPersistence(this):this.hf.enableIndexedDbPersistence(this,n)},t.prototype.clearPersistence=function(){return(0,r.mG)(this,void 0,void 0,(function(){return(0,r.Jh)(this,(function(t){if(void 0!==this.lf&&!this.lf.j_)throw new fr(hr.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");return[2,this.hf.clearIndexedDbPersistence(this)]}))}))},t.prototype.terminate=function(){return this.app._removeServiceInstance("firestore"),this.INTERNAL.delete()},Object.defineProperty(t.prototype,"Tf",{get:function(){return this.uf(),this.lf.j_},enumerable:!1,configurable:!0}),t.prototype.waitForPendingWrites=function(){return this.uf(),this.lf.waitForPendingWrites()},t.prototype.onSnapshotsInSync=function(t){if(this.uf(),xf(t))return this.lf.W_(t);var e={next:t};return this.lf.W_(e)},t.prototype.uf=function(){return this.lf||this.if(new zh,new Jh),this.lf},t.prototype.If=function(){return new Pr(this.l_,this.af,this.df.host,this.df.ssl,this.df.experimentalForceLongPolling,this.df.experimentalAutoDetectLongPolling)},t.prototype.if=function(t,e){var n=this.If();return this.lf=new Rf(this.ff,this.rf),this.lf.start(n,t,e)},t._f=function(t){if(e=t.options,!Object.prototype.hasOwnProperty.call(e,"projectId"))throw new fr(hr.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');var e,n=t.options.projectId;if(!n||"string"!=typeof n)throw new fr(hr.INVALID_ARGUMENT,"projectId must be a string in FirebaseApp.options");return new Lr(n)},Object.defineProperty(t.prototype,"app",{get:function(){if(!this.cf)throw new fr(hr.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.cf},enumerable:!1,configurable:!0}),t.prototype.collection=function(t){return Xh("Firestore.collection","path",t),this.uf(),new el(Fr.q(t),this,null)},t.prototype.doc=function(t){return Xh("Firestore.doc","path",t),this.uf(),Kf.mf(Fr.q(t),this,null)},t.prototype.collectionGroup=function(t){if(Xh("Firestore.collectionGroup","collectionId",t),t.indexOf("/")>=0)throw new fr(hr.INVALID_ARGUMENT,"Invalid collection ID '"+t+"' passed to function Firestore.collectionGroup(). Collection IDs must not contain '/'.");return this.uf(),new $f(function(t){return new ms(Fr.U(),t)}(t),this,null)},t.prototype.runTransaction=function(t){var e=this;return this.uf().transaction((function(n){return t(new Bf(e,n))}))},t.prototype.batch=function(){return this.uf(),new zf(this)},t.prototype.sf=function(){return this.df},t}(),Bf=function(){function t(t,e){this.Af=t,this.Rf=e}return t.prototype.get=function(t){var e=this,n=nl(0,t,this.Af);return this.Rf.b_([n.__]).then((function(t){if(!t||1!==t.length)return gr();var r=t[0];if(r instanceof vs)return new Jf(e.Af,n.__,null,!1,!1,n.f_);if(r instanceof ds)return new Jf(e.Af,n.__,r,!1,!1,n.f_);throw gr()}))},t.prototype.set=function(t,e,n){var r=nl(0,t,this.Af);n=Yh("Transaction.set",n);var i=il(r.f_,e,n),o=wf(this.Af.wf,"Transaction.set",r.__,i,null!==r.f_,n);return this.Rf.set(r.__,o),this},t.prototype.update=function(t,e,n){for(var r,i,o=[],s=3;s<arguments.length;s++)o[s-3]=arguments[s];return"string"==typeof e||e instanceof ef?(r=nl(0,t,this.Af),i=Ef(this.Af.wf,"Transaction.update",r.__,e,n,o)):(r=nl(0,t,this.Af),i=If(this.Af.wf,"Transaction.update",r.__,e)),this.Rf.update(r.__,i),this},t.prototype.delete=function(t){var e=nl(0,t,this.Af);return this.Rf.delete(e.__),this},t}(),zf=function(){function t(t){this.Af=t,this.Pf=[],this.gf=!1}return t.prototype.set=function(t,e,n){this.Vf();var r=nl(0,t,this.Af);n=Yh("WriteBatch.set",n);var i=il(r.f_,e,n),o=wf(this.Af.wf,"WriteBatch.set",r.__,i,null!==r.f_,n);return this.Pf=this.Pf.concat(o.d_(r.__,Wo.ze())),this},t.prototype.update=function(t,e,n){for(var r,i,o=[],s=3;s<arguments.length;s++)o[s-3]=arguments[s];return this.Vf(),"string"==typeof e||e instanceof ef?(r=nl(0,t,this.Af),i=Ef(this.Af.wf,"WriteBatch.update",r.__,e,n,o)):(r=nl(0,t,this.Af),i=If(this.Af.wf,"WriteBatch.update",r.__,e)),this.Pf=this.Pf.concat(i.d_(r.__,Wo.exists(!0))),this},t.prototype.delete=function(t){this.Vf();var e=nl(0,t,this.Af);return this.Pf=this.Pf.concat(new us(e.__,Wo.ze())),this},t.prototype.commit=function(){return this.Vf(),this.gf=!0,this.Pf.length>0?this.Af.uf().write(this.Pf):Promise.resolve()},t.prototype.Vf=function(){if(this.gf)throw new fr(hr.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},t}(),Kf=function(t){function e(e,n,r){var i=this;return(i=t.call(this,n.l_,e,r)||this).__=e,i.firestore=n,i.f_=r,i.lf=i.firestore.uf(),i}return(0,r.ZT)(e,t),e.mf=function(t,n,r){if(t.length%2!=0)throw new fr(hr.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t.B()+" has "+t.length);return new e(new Br(t),n,r)},Object.defineProperty(e.prototype,"id",{get:function(){return this.__.path.O()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return new el(this.__.path.F(),this.firestore,this.f_)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this.__.path.B()},enumerable:!1,configurable:!0}),e.prototype.collection=function(t){if(Xh("DocumentReference.collection","path",t),!t)throw new fr(hr.INVALID_ARGUMENT,"Must provide a non-empty collection name to collection()");var e=Fr.q(t);return new el(this.__.path.child(e),this.firestore,null)},e.prototype.isEqual=function(t){return t instanceof e&&this.firestore===t.firestore&&this.__.isEqual(t.__)&&this.f_===t.f_},e.prototype.set=function(t,e){e=Yh("DocumentReference.set",e);var n=il(this.f_,t,e),r=wf(this.firestore.wf,"DocumentReference.set",this.__,n,null!==this.f_,e);return this.lf.write(r.d_(this.__,Wo.ze()))},e.prototype.update=function(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];return n="string"==typeof t||t instanceof ef?Ef(this.firestore.wf,"DocumentReference.update",this.__,t,e,r):If(this.firestore.wf,"DocumentReference.update",this.__,t),this.lf.write(n.d_(this.__,Wo.exists(!0)))},e.prototype.delete=function(){return this.lf.write([new us(this.__,Wo.ze())])},e.prototype.onSnapshot=function(){for(var t,e,n,r=this,i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];var s={includeMetadataChanges:!1},a=0;"object"!=typeof i[a]||xf(i[a])||(s=i[a],a++);var u={includeMetadataChanges:s.includeMetadataChanges};if(xf(i[a])){var c=i[a];i[a]=null===(t=c.next)||void 0===t?void 0:t.bind(c),i[a+1]=null===(e=c.error)||void 0===e?void 0:e.bind(c),i[a+2]=null===(n=c.complete)||void 0===n?void 0:n.bind(c)}var h={next:function(t){i[a]&&i[a](r.yf(t))},error:i[a+1],complete:i[a+2]};return this.lf.listen(bs(this.__.path),u,h)},e.prototype.get=function(t){var e=this,n=this.firestore.uf();return t&&"cache"===t.source?n.q_(this.__).then((function(t){return new Jf(e.firestore,e.__,t,!0,t instanceof ds&&t.Ye,e.f_)})):n.U_(this.__,t).then((function(t){return e.yf(t)}))},e.prototype.withConverter=function(t){return new e(this.__,this.firestore,t)},e.prototype.yf=function(t){var e=t.docs.get(this.__);return new Jf(this.firestore,this.__,e,t.fromCache,t.hasPendingWrites,this.f_)},e}(df),Hf=function(){function t(t,e){this.hasPendingWrites=t,this.fromCache=e}return t.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},t}(),Jf=function(){function t(t,e,n,r,i,o){this.Af=t,this.__=e,this.pf=n,this.bf=r,this.vf=i,this.f_=o}return t.prototype.data=function(t){var e=this;if(void 0===t&&(t={}),this.pf){if(this.f_){var n=new Wf(this.Af,this.__,this.pf,this.bf,this.vf,null);return this.f_.fromFirestore(n,t)}return new Mf(this.Af.l_,t.serverTimestamps||"none",(function(t){return new Kf(t,e.Af,null)}),(function(t){return new Or(t)})).J_(this.pf.rn())}},t.prototype.get=function(t,e){var n=this;if(void 0===e&&(e={}),this.pf){var r=this.pf.data().field(kf("DocumentSnapshot.get",t,this.__));if(null!==r)return new Mf(this.Af.l_,e.serverTimestamps||"none",(function(t){return new Kf(t,n.Af,n.f_)}),(function(t){return new Or(t)})).J_(r)}},Object.defineProperty(t.prototype,"id",{get:function(){return this.__.path.O()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ref",{get:function(){return new Kf(this.__,this.Af,this.f_)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"exists",{get:function(){return null!==this.pf},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return new Hf(this.vf,this.bf)},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&this.Af===e.Af&&this.bf===e.bf&&this.__.isEqual(e.__)&&(null===this.pf?null===e.pf:this.pf.isEqual(e.pf))&&this.f_===e.f_},t}(),Wf=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,r.ZT)(e,t),e.prototype.data=function(e){return t.prototype.data.call(this,e)},e}(Jf);function Xf(t,e,n){if("string"==typeof n){if(""===n)throw new fr(hr.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!_s(e)&&-1!==n.indexOf("/"))throw new fr(hr.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+n+"' contains a '/' character.");var r=e.path.child(Fr.q(n));if(!Br.X(r))throw new fr(hr.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+r+"' is not because it has an odd number of segments ("+r.length+").");return Ki(t,new Br(r))}if(n instanceof df)return Ki(t,n.__);throw new fr(hr.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+Qh(n)+".")}function Yf(t,e){if(!Array.isArray(t)||0===t.length)throw new fr(hr.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+e.toString()+"' filters.");if(t.length>10)throw new fr(hr.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters support a maximum of 10 elements in the value array.")}function Zf(t,e,n){if(!n.isEqual(e))throw new fr(hr.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, >, or >=) on field '"+e.toString()+"' and so you must also use '"+e.toString()+"' as your first orderBy(), but your first orderBy() is on field '"+n.toString()+"' instead.")}function Qf(t){if(Is(t)&&0===t.on.length)throw new fr(hr.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var $f=function(){function t(t,e,n){this.Sf=t,this.firestore=e,this.f_=n}return t.prototype.where=function(e,n,r){var i=kf("Query.where",e),o=function(t,e,n,r,i,o,s){var a;if(i.W()){if("array-contains"===o||"array-contains-any"===o)throw new fr(hr.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+o+"' queries on FieldPath.documentId().");if("in"===o||"not-in"===o){Yf(s,o);for(var u=[],c=0,h=s;c<h.length;c++){var f=h[c];u.push(Xf(r,t,f))}a={arrayValue:{values:u}}}else a=Xf(r,t,s)}else"in"!==o&&"not-in"!==o&&"array-contains-any"!==o||Yf(s,o),a=Tf(n,"Query.where",s,"in"===o||"not-in"===o);var l=xs.create(i,o,a);return function(t,e){if(e.un()){var n=Ts(t);if(null!==n&&!n.isEqual(e.field))throw new fr(hr.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, >, or >=) must be on the same field. But you have inequality filters on '"+n.toString()+"' and '"+e.field.toString()+"'");var r=Es(t);null!==r&&Zf(0,e.field,r)}var i=function(t,e){for(var n=0,r=t.filters;n<r.length;n++){var i=r[n];if(e.indexOf(i.op)>=0)return i.op}return null}(t,function(t){switch(t){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==i)throw i===e.op?new fr(hr.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '"+e.op.toString()+"' filter."):new fr(hr.INVALID_ARGUMENT,"Invalid query. You cannot use '"+e.op.toString()+"' filters with '"+i.toString()+"' filters.")}(t,l),l}(this.Sf,0,this.firestore.wf,this.firestore.l_,i,n,r);return new t(function(t,e){var n=t.filters.concat([e]);return new ms(t.path,t.collectionGroup,t.on.slice(),n,t.limit,t.an,t.startAt,t.endAt)}(this.Sf,o),this.firestore,this.f_)},t.prototype.orderBy=function(e,n){var r;if(void 0===n||"asc"===n)r="asc";else{if("desc"!==n)throw new fr(hr.INVALID_ARGUMENT,"Function Query.orderBy() has unknown direction '"+n+"', expected 'asc' or 'desc'.");r="desc"}var i=kf("Query.orderBy",e),o=function(t,e,n){if(null!==t.startAt)throw new fr(hr.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==t.endAt)throw new fr(hr.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new Ws(e,n);return function(t,e){if(null===Es(t)){var n=Ts(t);null!==n&&Zf(0,n,e.field)}}(t,r),r}(this.Sf,i,r);return new t(function(t,e){var n=t.on.concat([e]);return new ms(t.path,t.collectionGroup,n,t.filters.slice(),t.limit,t.an,t.startAt,t.endAt)}(this.Sf,o),this.firestore,this.f_)},t.prototype.limit=function(e){return $h("Query.limit",e),new t(Ss(this.Sf,e,"F"),this.firestore,this.f_)},t.prototype.limitToLast=function(e){return $h("Query.limitToLast",e),new t(Ss(this.Sf,e,"L"),this.firestore,this.f_)},t.prototype.startAt=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var i=this.Df("Query.startAt",e,n,!0);return new t(ks(this.Sf,i),this.firestore,this.f_)},t.prototype.startAfter=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var i=this.Df("Query.startAfter",e,n,!1);return new t(ks(this.Sf,i),this.firestore,this.f_)},t.prototype.endBefore=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var i=this.Df("Query.endBefore",e,n,!0);return new t(Ds(this.Sf,i),this.firestore,this.f_)},t.prototype.endAt=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var i=this.Df("Query.endAt",e,n,!1);return new t(Ds(this.Sf,i),this.firestore,this.f_)},t.prototype.isEqual=function(e){return e instanceof t&&this.firestore===e.firestore&&Os(this.Sf,e.Sf)&&this.f_===e.f_},t.prototype.withConverter=function(e){return new t(this.Sf,this.firestore,e)},t.prototype.Df=function(t,e,n,r){if(e instanceof Jf)return function(t,e,n,r,i){if(!r)throw new fr(hr.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+n+"().");for(var o=[],s=0,a=As(t);s<a.length;s++){var u=a[s];if(u.field.W())o.push(Ki(e,r.key));else{var c=r.field(u.field);if(Pi(c))throw new fr(hr.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+u.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var h=u.field.B();throw new fr(hr.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+h+"' (used as the orderBy) does not exist.")}o.push(c)}}return new zs(o,i)}(this.Sf,this.firestore.l_,t,e.pf,r);var i=[e].concat(n);return function(t,e,n,r,i,o){var s=t.on;if(i.length>s.length)throw new fr(hr.INVALID_ARGUMENT,"Too many arguments provided to "+r+"(). The number of arguments must be less than or equal to the number of orderBy() clauses");for(var a=[],u=0;u<i.length;u++){var c=i[u];if(s[u].field.W()){if("string"!=typeof c)throw new fr(hr.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+r+"(), but got a "+typeof c);if(!_s(t)&&-1!==c.indexOf("/"))throw new fr(hr.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+r+"() must be a plain document ID, but '"+c+"' contains a slash.");var h=t.path.child(Fr.q(c));if(!Br.X(h))throw new fr(hr.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+r+"() must result in a valid document path, but '"+h+"' is not because it contains an odd number of segments.");var f=new Br(h);a.push(Ki(e,f))}else{var l=Tf(n,r,c);a.push(l)}}return new zs(a,o)}(this.Sf,this.firestore.l_,this.firestore.wf,t,i,r)},t.prototype.onSnapshot=function(){for(var t,e,n,r=this,i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];var s={},a=0;if("object"!=typeof i[a]||xf(i[a])||(s=i[a],a++),xf(i[a])){var u=i[a];i[a]=null===(t=u.next)||void 0===t?void 0:t.bind(u),i[a+1]=null===(e=u.error)||void 0===e?void 0:e.bind(u),i[a+2]=null===(n=u.complete)||void 0===n?void 0:n.bind(u)}var c={next:function(t){i[a]&&i[a](new tl(r.firestore,r.Sf,t,r.f_))},error:i[a+1],complete:i[a+2]};return Qf(this.Sf),this.firestore.uf().listen(this.Sf,s,c)},t.prototype.get=function(t){var e=this;Qf(this.Sf);var n=this.firestore.uf();return(t&&"cache"===t.source?n.K_(this.Sf):n.Q_(this.Sf,t)).then((function(t){return new tl(e.firestore,e.Sf,t,e.f_)}))},t}(),tl=function(){function t(t,e,n,r){this.Af=t,this.Cf=e,this.Nf=n,this.f_=r,this.xf=null,this.Ff=null,this.metadata=new Hf(n.hasPendingWrites,n.fromCache)}return Object.defineProperty(t.prototype,"docs",{get:function(){var t=[];return this.forEach((function(e){return t.push(e)})),t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return this.Nf.docs.P()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this.Nf.docs.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t,e){var n=this;this.Nf.docs.forEach((function(r){t.call(e,n.kf(r,n.metadata.fromCache,n.Nf.Qt.has(r.key)))}))},Object.defineProperty(t.prototype,"query",{get:function(){return new $f(this.Cf,this.Af,this.f_)},enumerable:!1,configurable:!0}),t.prototype.docChanges=function(t){var e=!(!t||!t.includeMetadataChanges);if(e&&this.Nf.jt)throw new fr(hr.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this.xf&&this.Ff===e||(this.xf=function(t,e,n){if(t.Kt.P()){var r=0;return t.docChanges.map((function(e){var i=n(e.doc,t.fromCache,t.Qt.has(e.doc.key));return e.doc,{type:"added",doc:i,oldIndex:-1,newIndex:r++}}))}var i=t.Kt;return t.docChanges.filter((function(t){return e||3!==t.type})).map((function(e){var r=n(e.doc,t.fromCache,t.Qt.has(e.doc.key)),o=-1,s=-1;return 0!==e.type&&(o=i.indexOf(e.doc.key),i=i.delete(e.doc.key)),1!==e.type&&(s=(i=i.add(e.doc)).indexOf(e.doc.key)),{type:rl(e.type),doc:r,oldIndex:o,newIndex:s}}))}(this.Nf,e,this.kf.bind(this)),this.Ff=e),this.xf},t.prototype.isEqual=function(e){return e instanceof t&&this.Af===e.Af&&Os(this.Cf,e.Cf)&&this.Nf.isEqual(e.Nf)&&this.f_===e.f_},t.prototype.kf=function(t,e,n){return new Wf(this.Af,t.key,t,e,n,this.f_)},t}(),el=function(t){function e(e,n,r){var i=this;if((i=t.call(this,bs(e),n,r)||this).Of=e,e.length%2!=1)throw new fr(hr.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+e.B()+" has "+e.length);return i}return(0,r.ZT)(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this.Sf.path.O()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this.Sf.path.F();return t.P()?null:new Kf(new Br(t),this.firestore,null)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this.Sf.path.B()},enumerable:!1,configurable:!0}),e.prototype.doc=function(t){0===arguments.length&&(t=Er.t()),Xh("CollectionReference.doc","path",t);var e=Fr.q(t);return Kf.mf(this.Sf.path.child(e),this.firestore,this.f_)},e.prototype.add=function(t){var e=this.f_?this.f_.toFirestore(t):t,n=this.doc();return new Kf(n.__,this.firestore,null).set(e).then((function(){return n}))},e.prototype.withConverter=function(t){return new e(this.Of,this.firestore,t)},e}($f);function nl(t,e,n){var r=function(t,e){if(!(t instanceof e)){if(e.name===t.constructor.name)throw new fr(hr.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=Qh(t);throw new fr(hr.INVALID_ARGUMENT,"Expected type '"+e.name+"', but it was: "+n)}return t}(e,Kf);if(r.firestore!==n)throw new fr(hr.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return r}function rl(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return gr()}}function il(t,e,n){return t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e}var ol,sl=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,r.ZT)(e,t),e.serverTimestamp=function(){var t=new af("serverTimestamp");return t.t_="FieldValue.serverTimestamp",new e(t)},e.delete=function(){var t=new of("deleteField");return t.t_="FieldValue.delete",new e(t)},e.arrayUnion=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new uf("arrayUnion",t)}.apply(void 0,t);return r.t_="FieldValue.arrayUnion",new e(r)},e.arrayRemove=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new cf("arrayRemove",t)}.apply(void 0,t);return r.t_="FieldValue.arrayRemove",new e(r)},e.increment=function(t){var n=function(t){return new hf("increment",t)}(t);return n.t_="FieldValue.increment",new e(n)},e.prototype.isEqual=function(t){return this.u_.isEqual(t.u_)},e}(lf),al={Firestore:qf,GeoPoint:ff,Timestamp:Vr,Blob:Or,Transaction:Bf,WriteBatch:zf,DocumentReference:Kf,DocumentSnapshot:Jf,Query:$f,QueryDocumentSnapshot:Wf,QuerySnapshot:tl,CollectionReference:el,FieldPath:ef,FieldValue:sl,setLogLevel:function(t){var e;e=t,lr.setLogLevel(e)},CACHE_SIZE_UNLIMITED:Vf};(function(t,e){t.INTERNAL.registerComponent(new cr.wA("firestore",(function(t){return function(t,e){return new qf(t,e,new Gf)}(t.getProvider("app").getImmediate(),t.getProvider("auth-internal"))}),"PUBLIC").setServiceProps(Object.assign({},al)))})(ol=i.Z),ol.registerVersion("@firebase/firestore","2.0.0")},655:(t,e,n)=>{"use strict";n.d(e,{ZT:()=>i,pi:()=>o,mG:()=>s,Jh:()=>a,XA:()=>u,CR:()=>c,fl:()=>h,pr:()=>f});var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function i(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var o=function(){return(o=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function s(t,e,n,r){return new(n||(n=Promise))((function(i,o){function s(t){try{u(r.next(t))}catch(t){o(t)}}function a(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}u((r=r.apply(t,e||[])).next())}))}function a(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}function u(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function c(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}function h(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(c(arguments[e]));return t}function f(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}}}]);